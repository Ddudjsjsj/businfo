/*
 * jQuery JavaScript Library v1.4.4
 * http://jquery.com/
 *
 * Copyright 2010, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2010, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Nov 11 19:04:53 2010 -0500
 */
(function(I,F){function aK(P,E,c){if(c===F&&P.nodeType===1){c=P.getAttribute("data-"+E);if(typeof c==="string"){try{c=c==="true"?true:c==="false"?false:c==="null"?null:!O.isNaN(c)?parseFloat(c):ai.test(c)?O.parseJSON(c):c}catch(B){}O.data(P,E,c)}else{c=F}}return c}function D(){return false}function aS(){return true}function aP(E,B,c){c[0].type=E;return O.event.handle.apply(B,c)}function aj(Z){var X,a1,c,a0,U,W,T,V,Y,P,E,S=[];a0=[];U=O.data(this,this.nodeType?"events":"__events__");if(typeof U==="function"){U=U.events}if(!(Z.liveFired===this||!U||!U.live||Z.button&&Z.type==="click")){if(Z.namespace){E=RegExp("(^|\\.)"+Z.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}Z.liveFired=this;var B=U.live.slice(0);for(T=0;T<B.length;T++){U=B[T];U.origType.replace(s,"")===Z.type?a0.push(U.selector):B.splice(T--,1)}a0=O(Z.target).closest(a0,Z.currentTarget);V=0;for(Y=a0.length;V<Y;V++){P=a0[V];for(T=0;T<B.length;T++){U=B[T];if(P.selector===U.selector&&(!E||E.test(U.namespace))){W=P.elem;c=null;if(U.preType==="mouseenter"||U.preType==="mouseleave"){Z.type=U.preType;c=O(Z.relatedTarget).closest(U.selector)[0]}if(!c||c!==W){S.push({elem:W,handleObj:U,level:P.level})}}}}V=0;for(Y=S.length;V<Y;V++){a0=S[V];if(a1&&a0.level>a1){break}Z.currentTarget=a0.elem;Z.data=a0.handleObj.data;Z.handleObj=a0.handleObj;E=a0.handleObj.origHandler.apply(a0.elem,arguments);if(E===false||Z.isPropagationStopped()){a1=a0.level;if(E===false){X=false}if(Z.isImmediatePropagationStopped()){break}}}return X}}function u(B,c){return(B&&B!=="*"?B+".":"")+c.replace(ao,"`").replace(ap,"&")}function aQ(P,E,c){if(O.isFunction(E)){return O.grep(P,function(T,S){return !!E.call(T,S,T)===c})}else{if(E.nodeType){return O.grep(P,function(S){return S===E===c})}else{if(typeof E==="string"){var B=O.grep(P,function(S){return S.nodeType===1});if(am.test(E)){return O.filter(E,B,!c)}else{E=O.filter(E,B)}}}}return O.grep(P,function(S){return O.inArray(S,E)>=0===c})}function m(E,B){var c=0;B.each(function(){if(this.nodeName===(E[c]&&E[c].nodeName)){var S=O.data(E[c++]),U=O.data(this,S);if(S=S&&S.events){delete U.handle;U.events={};for(var P in S){for(var T in S[P]){O.event.add(this,P,S[P][T],S[P][T].data)}}}}})}function an(B,c){c.src?O.ajax({url:c.src,async:false,dataType:"script"}):O.globalEval(c.text||c.textContent||c.innerHTML||"");c.parentNode&&c.parentNode.removeChild(c)}function G(P,E,c){var B=E==="width"?P.offsetWidth:P.offsetHeight;if(c==="border"){return B}O.each(E==="width"?ac:ad,function(){c||(B-=parseFloat(O.css(P,"padding"+this))||0);if(c==="margin"){B+=parseFloat(O.css(P,"margin"+this))||0}else{B-=parseFloat(O.css(P,"border"+this+"Width"))||0}});return B}function K(P,E,c,B){if(O.isArray(E)&&E.length){O.each(E,function(T,S){c||aa.test(P)?B(P,S):K(P+"["+(typeof S==="object"||O.isArray(S)?T:"")+"]",S,c,B)})}else{if(!c&&E!=null&&typeof E==="object"){O.isEmptyObject(E)?B(P,""):O.each(E,function(T,S){K(P+"["+T+"]",S,c,B)})}else{B(P,E)}}}function x(E,B){var c={};O.each(aD.concat.apply([],aD.slice(0,B)),function(){c[this]=E});return c}function aE(E){if(!L[E]){var B=O("<"+E+">").appendTo("body"),c=B.css("display");B.remove();if(c==="none"||c===""){c="block"}L[E]=c}return L[E]}function aV(c){return O.isWindow(c)?c:c.nodeType===9?c.defaultView||c.parentWindow:false}var M=I.document,O=function(){function a2(){if(!a1.isReady){try{M.documentElement.doScroll("left")}catch(bj){setTimeout(a2,1);return}a1.ready()}}var a1=function(bk,bj){return new a1.fn.init(bk,bj)},a5=I.jQuery,S=I.$,a3,V=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]+)$)/,Z=/\S/,U=/^\s+/,Y=/\s+$/,bg=/\W/,c=/\d/,bd=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bc=/^[\],:{}\s]*$/,a6=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,P=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,a7=/(?:^|:|,)(?:\s*\[)+/g,ba=/(webkit)[ \/]([\w.]+)/,a4=/(opera)(?:.*version)?[ \/]([\w.]+)/,W=/(msie) ([\w.]+)/,X=/(mozilla)(?:.*? rv:([\w.]+))?/,a0=navigator.userAgent,B=false,E=[],T,bh=Object.prototype.toString,be=Object.prototype.hasOwnProperty,bb=Array.prototype.push,a8=Array.prototype.slice,a9=String.prototype.trim,bf=Array.prototype.indexOf,bi={};a1.fn=a1.prototype={init:function(bn,bk){var bm,bl,bj;if(!bn){return this}if(bn.nodeType){this.context=this[0]=bn;this.length=1;return this}if(bn==="body"&&!bk&&M.body){this.context=M;this[0]=M.body;this.selector="body";this.length=1;return this}if(typeof bn==="string"){if((bm=V.exec(bn))&&(bm[1]||!bk)){if(bm[1]){bj=bk?bk.ownerDocument||bk:M;if(bl=bd.exec(bn)){if(a1.isPlainObject(bk)){bn=[M.createElement(bl[1])];a1.fn.attr.call(bn,bk,true)}else{bn=[bj.createElement(bl[1])]}}else{bl=a1.buildFragment([bm[1]],[bj]);bn=(bl.cacheable?bl.fragment.cloneNode(true):bl.fragment).childNodes}return a1.merge(this,bn)}else{if((bl=M.getElementById(bm[2]))&&bl.parentNode){if(bl.id!==bm[2]){return a3.find(bn)}this.length=1;this[0]=bl}this.context=M;this.selector=bn;return this}}else{if(!bk&&!bg.test(bn)){this.selector=bn;this.context=M;bn=M.getElementsByTagName(bn);return a1.merge(this,bn)}else{return !bk||bk.jquery?(bk||a3).find(bn):a1(bk).find(bn)}}}else{if(a1.isFunction(bn)){return a3.ready(bn)}}if(bn.selector!==F){this.selector=bn.selector;this.context=bn.context}return a1.makeArray(bn,this)},selector:"",jquery:"1.4.4",length:0,size:function(){return this.length},toArray:function(){return a8.call(this,0)},get:function(bj){return bj==null?this.toArray():bj<0?this.slice(bj)[0]:this[bj]},pushStack:function(bm,bj,bl){var bk=a1();a1.isArray(bm)?bb.apply(bk,bm):a1.merge(bk,bm);bk.prevObject=this;bk.context=this.context;if(bj==="find"){bk.selector=this.selector+(this.selector?" ":"")+bl}else{if(bj){bk.selector=this.selector+"."+bj+"("+bl+")"}}return bk},each:function(bk,bj){return a1.each(this,bk,bj)},ready:function(bj){a1.bindReady();if(a1.isReady){bj.call(M,a1)}else{E&&E.push(bj)}return this},eq:function(bj){return bj===-1?this.slice(bj):this.slice(bj,+bj+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(a8.apply(this,arguments),"slice",a8.call(arguments).join(","))},map:function(bj){return this.pushStack(a1.map(this,function(bk,bl){return bj.call(bk,bl,bk)}))},end:function(){return this.prevObject||a1(null)},push:bb,sort:[].sort,splice:[].splice};a1.fn.init.prototype=a1.fn;a1.extend=a1.fn.extend=function(){var bo,bk,bm,bq,bl,bp=arguments[0]||{},bj=1,br=arguments.length,bn=false;if(typeof bp==="boolean"){bn=bp;bp=arguments[1]||{};bj=2}if(typeof bp!=="object"&&!a1.isFunction(bp)){bp={}}if(br===bj){bp=this;--bj}for(;bj<br;bj++){if((bo=arguments[bj])!=null){for(bk in bo){bm=bp[bk];bq=bo[bk];if(bp!==bq){if(bn&&bq&&(a1.isPlainObject(bq)||(bl=a1.isArray(bq)))){if(bl){bl=false;bm=bm&&a1.isArray(bm)?bm:[]}else{bm=bm&&a1.isPlainObject(bm)?bm:{}}bp[bk]=a1.extend(bn,bm,bq)}else{if(bq!==F){bp[bk]=bq}}}}}}return bp};a1.extend({noConflict:function(bj){I.$=S;if(bj){I.jQuery=a5}return a1},isReady:false,readyWait:1,ready:function(bl){bl===true&&a1.readyWait--;if(!a1.readyWait||bl!==true&&!a1.isReady){if(!M.body){return setTimeout(a1.ready,1)}a1.isReady=true;if(!(bl!==true&&--a1.readyWait>0)){if(E){var bj=0,bk=E;for(E=null;bl=bk[bj++];){bl.call(M,a1)}a1.fn.trigger&&a1(M).trigger("ready").unbind("ready")}}}},bindReady:function(){if(!B){B=true;if(M.readyState==="complete"){return setTimeout(a1.ready,1)}if(M.addEventListener){M.addEventListener("DOMContentLoaded",T,false);I.addEventListener("load",a1.ready,false)}else{if(M.attachEvent){M.attachEvent("onreadystatechange",T);I.attachEvent("onload",a1.ready);var bk=false;try{bk=I.frameElement==null}catch(bj){}M.documentElement.doScroll&&bk&&a2()}}}},isFunction:function(bj){return a1.type(bj)==="function"},isArray:Array.isArray||function(bj){return a1.type(bj)==="array"},isWindow:function(bj){return bj&&typeof bj==="object"&&"setInterval" in bj},isNaN:function(bj){return bj==null||!c.test(bj)||isNaN(bj)},type:function(bj){return bj==null?String(bj):bi[bh.call(bj)]||"object"},isPlainObject:function(bk){if(!bk||a1.type(bk)!=="object"||bk.nodeType||a1.isWindow(bk)){return false}if(bk.constructor&&!be.call(bk,"constructor")&&!be.call(bk.constructor.prototype,"isPrototypeOf")){return false}for(var bj in bk){}return bj===F||be.call(bk,bj)},isEmptyObject:function(bk){for(var bj in bk){return false}return true},error:function(bj){throw bj},parseJSON:function(bj){if(typeof bj!=="string"||!bj){return null}bj=a1.trim(bj);if(bc.test(bj.replace(a6,"@").replace(P,"]").replace(a7,""))){return I.JSON&&I.JSON.parse?I.JSON.parse(bj):(new Function("return "+bj))()}else{a1.error("Invalid JSON: "+bj)}},noop:function(){},globalEval:function(bl){if(bl&&Z.test(bl)){var bj=M.getElementsByTagName("head")[0]||M.documentElement,bk=M.createElement("script");bk.type="text/javascript";if(a1.support.scriptEval){bk.appendChild(M.createTextNode(bl))}else{bk.text=bl}bj.insertBefore(bk,bj.firstChild);bj.removeChild(bk)}},nodeName:function(bk,bj){return bk.nodeName&&bk.nodeName.toUpperCase()===bj.toUpperCase()},each:function(bp,bl,bo){var bn,bk=0,bm=bp.length,bj=bm===F||a1.isFunction(bp);if(bo){if(bj){for(bn in bp){if(bl.apply(bp[bn],bo)===false){break}}}else{for(;bk<bm;){if(bl.apply(bp[bk++],bo)===false){break}}}}else{if(bj){for(bn in bp){if(bl.call(bp[bn],bn,bp[bn])===false){break}}}else{for(bo=bp[0];bk<bm&&bl.call(bo,bk,bo)!==false;bo=bp[++bk]){}}}return bp},trim:a9?function(bj){return bj==null?"":a9.call(bj)}:function(bj){return bj==null?"":bj.toString().replace(U,"").replace(Y,"")},makeArray:function(bm,bj){var bl=bj||[];if(bm!=null){var bk=a1.type(bm);bm.length==null||bk==="string"||bk==="function"||bk==="regexp"||a1.isWindow(bm)?bb.call(bl,bm):a1.merge(bl,bm)}return bl},inArray:function(bm,bj){if(bj.indexOf){return bj.indexOf(bm)}for(var bl=0,bk=bj.length;bl<bk;bl++){if(bj[bl]===bm){return bl}}return -1},merge:function(bn,bk){var bm=bn.length,bl=0;if(typeof bk.length==="number"){for(var bj=bk.length;bl<bj;bl++){bn[bm++]=bk[bl]}}else{for(;bk[bl]!==F;){bn[bm++]=bk[bl++]}}bn.length=bm;return bn},grep:function(bp,bl,bo){var bn=[],bk;bo=!!bo;for(var bm=0,bj=bp.length;bm<bj;bm++){bk=!!bl(bp[bm],bm);bo!==bk&&bn.push(bp[bm])}return bn},map:function(bp,bl,bo){for(var bn=[],bk,bm=0,bj=bp.length;bm<bj;bm++){bk=bl(bp[bm],bm,bo);if(bk!=null){bn[bn.length]=bk}}return bn.concat.apply([],bn)},guid:1,proxy:function(bl,bj,bk){if(arguments.length===2){if(typeof bj==="string"){bk=bl;bl=bk[bj];bj=F}else{if(bj&&!a1.isFunction(bj)){bk=bj;bj=F}}}if(!bj&&bl){bj=function(){return bl.apply(bk||this,arguments)}}if(bl){bj.guid=bl.guid=bl.guid||bj.guid||a1.guid++}return bj},access:function(bn,bk,bm,bp,bl,bo){var bj=bn.length;if(typeof bk==="object"){for(var bq in bk){a1.access(bn,bq,bk[bq],bp,bl,bm)}return bn}if(bm!==F){bp=!bo&&bp&&a1.isFunction(bm);for(bq=0;bq<bj;bq++){bl(bn[bq],bk,bp?bm.call(bn[bq],bq,bl(bn[bq],bk)):bm,bo)}return bn}return bj?bl(bn[0],bk):F},now:function(){return(new Date).getTime()},uaMatch:function(bj){bj=bj.toLowerCase();bj=ba.exec(bj)||a4.exec(bj)||W.exec(bj)||bj.indexOf("compatible")<0&&X.exec(bj)||[];return{browser:bj[1]||"",version:bj[2]||"0"}},browser:{}});a1.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(bk,bj){bi["[object "+bj+"]"]=bj.toLowerCase()});a0=a1.uaMatch(a0);if(a0.browser){a1.browser[a0.browser]=true;a1.browser.version=a0.version}if(a1.browser.webkit){a1.browser.safari=true}if(bf){a1.inArray=function(bk,bj){return bf.call(bj,bk)}}if(!/\s/.test("\u00a0")){U=/^[\s\xA0]+/;Y=/[\s\xA0]+$/}a3=a1(M);if(M.addEventListener){T=function(){M.removeEventListener("DOMContentLoaded",T,false);a1.ready()}}else{if(M.attachEvent){T=function(){if(M.readyState==="complete"){M.detachEvent("onreadystatechange",T);a1.ready()}}}}return I.jQuery=I.$=a1}();(function(){O.support={};var W=M.documentElement,U=M.createElement("script"),Y=M.createElement("div"),c="script"+O.now();Y.style.display="none";Y.innerHTML="   <link/><table></table><a href='/a' style='color:red;float:left;opacity:.55;'>a</a><input type='checkbox'/>";var X=Y.getElementsByTagName("*"),P=Y.getElementsByTagName("a")[0],T=M.createElement("select"),E=T.appendChild(M.createElement("option"));if(!(!X||!X.length||!P)){O.support={leadingWhitespace:Y.firstChild.nodeType===3,tbody:!Y.getElementsByTagName("tbody").length,htmlSerialize:!!Y.getElementsByTagName("link").length,style:/red/.test(P.getAttribute("style")),hrefNormalized:P.getAttribute("href")==="/a",opacity:/^0.55$/.test(P.style.opacity),cssFloat:!!P.style.cssFloat,checkOn:Y.getElementsByTagName("input")[0].value==="on",optSelected:E.selected,deleteExpando:true,optDisabled:false,checkClone:false,scriptEval:false,noCloneEvent:true,boxModel:null,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableHiddenOffsets:true};T.disabled=true;O.support.optDisabled=!E.disabled;U.type="text/javascript";try{U.appendChild(M.createTextNode("window."+c+"=1;"))}catch(S){}W.insertBefore(U,W.firstChild);if(I[c]){O.support.scriptEval=true;delete I[c]}try{delete U.test}catch(V){O.support.deleteExpando=false}W.removeChild(U);if(Y.attachEvent&&Y.fireEvent){Y.attachEvent("onclick",function B(){O.support.noCloneEvent=false;Y.detachEvent("onclick",B)});Y.cloneNode(true).fireEvent("onclick")}Y=M.createElement("div");Y.innerHTML="<input type='radio' name='radiotest' checked='checked'/>";W=M.createDocumentFragment();W.appendChild(Y.firstChild);O.support.checkClone=W.cloneNode(true).cloneNode(true).lastChild.checked;O(function(){var Z=M.createElement("div");Z.style.width=Z.style.paddingLeft="1px";M.body.appendChild(Z);O.boxModel=O.support.boxModel=Z.offsetWidth===2;if("zoom" in Z.style){Z.style.display="inline";Z.style.zoom=1;O.support.inlineBlockNeedsLayout=Z.offsetWidth===2;Z.style.display="";Z.innerHTML="<div style='width:4px;'></div>";O.support.shrinkWrapBlocks=Z.offsetWidth!==2}Z.innerHTML="<table><tr><td style='padding:0;display:none'></td><td>t</td></tr></table>";var a0=Z.getElementsByTagName("td");O.support.reliableHiddenOffsets=a0[0].offsetHeight===0;a0[0].style.display="";a0[1].style.display="none";O.support.reliableHiddenOffsets=O.support.reliableHiddenOffsets&&a0[0].offsetHeight===0;Z.innerHTML="";M.body.removeChild(Z).style.display="none"});W=function(Z){var a1=M.createElement("div");Z="on"+Z;var a0=Z in a1;if(!a0){a1.setAttribute(Z,"return;");a0=typeof a1[Z]==="function"}return a0};O.support.submitBubbles=W("submit");O.support.changeBubbles=W("change");W=U=Y=X=P=null}})();var aB={},ai=/^(?:\{.*\}|\[.*\])$/;O.extend({cache:{},uuid:0,expando:"jQuery"+O.now(),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},data:function(S,P,B){if(O.acceptData(S)){S=S==I?aB:S;var E=S.nodeType,T=E?S[O.expando]:null,c=O.cache;if(!(E&&!T&&typeof P==="string"&&B===F)){if(E){T||(S[O.expando]=T=++O.uuid)}else{c=S}if(typeof P==="object"){if(E){c[T]=O.extend(c[T],P)}else{O.extend(c,P)}}else{if(E&&!c[T]){c[T]={}}}S=E?c[T]:c;if(B!==F){S[P]=B}return typeof P==="string"?S[P]:S}}},removeData:function(T,S){if(O.acceptData(T)){T=T==I?aB:T;var B=T.nodeType,E=B?T[O.expando]:T,U=O.cache,c=B?U[E]:E;if(S){if(c){delete c[S];B&&O.isEmptyObject(c)&&O.removeData(T)}}else{if(B&&O.support.deleteExpando){delete T[O.expando]}else{if(T.removeAttribute){T.removeAttribute(O.expando)}else{if(B){delete U[E]}else{for(var P in T){delete T[P]}}}}}}},acceptData:function(B){if(B.nodeName){var c=O.noData[B.nodeName.toLowerCase()];if(c){return !(c===true||B.getAttribute("classid")!==c)}}return true}});O.fn.extend({data:function(T,S){var V=null;if(typeof T==="undefined"){if(this.length){var c=this[0].attributes,U;V=O.data(this[0]);for(var E=0,P=c.length;E<P;E++){U=c[E].name;if(U.indexOf("data-")===0){U=U.substr(5);aK(this[0],U,V[U])}}}return V}else{if(typeof T==="object"){return this.each(function(){O.data(this,T)})}}var B=T.split(".");B[1]=B[1]?"."+B[1]:"";if(S===F){V=this.triggerHandler("getData"+B[1]+"!",[B[0]]);if(V===F&&this.length){V=O.data(this[0],T);V=aK(this[0],T,V)}return V===F&&B[1]?this.data(B[0]):V}else{return this.each(function(){var W=O(this),X=[B[0],S];W.triggerHandler("setData"+B[1]+"!",X);O.data(this,T,S);W.triggerHandler("changeData"+B[1]+"!",X)})}},removeData:function(c){return this.each(function(){O.removeData(this,c)})}});O.extend({queue:function(P,E,c){if(P){E=(E||"fx")+"queue";var B=O.data(P,E);if(!c){return B||[]}if(!B||O.isArray(c)){B=O.data(P,E,O.makeArray(c))}else{B.push(c)}return B}},dequeue:function(P,E){E=E||"fx";var c=O.queue(P,E),B=c.shift();if(B==="inprogress"){B=c.shift()}if(B){E==="fx"&&c.unshift("inprogress");B.call(P,function(){O.dequeue(P,E)})}}});O.fn.extend({queue:function(B,c){if(typeof B!=="string"){c=B;B="fx"}if(c===F){return O.queue(this[0],B)}return this.each(function(){var E=O.queue(this,B,c);B==="fx"&&E[0]!=="inprogress"&&O.dequeue(this,B)})},dequeue:function(c){return this.each(function(){O.dequeue(this,c)})},delay:function(B,c){B=O.fx?O.fx.speeds[B]||B:B;c=c||"fx";return this.queue(c,function(){var E=this;setTimeout(function(){O.dequeue(E,c)},B)})},clearQueue:function(c){return this.queue(c||"fx",[])}});var aC=/[\n\t]/g,aL=/\s+/,ab=/\r/g,ag=/^(?:href|src|style)$/,ah=/^(?:button|input)$/i,ae=/^(?:button|input|object|select|textarea)$/i,af=/^a(?:rea)?$/i,aH=/^(?:radio|checkbox)$/i;O.props={"for":"htmlFor","class":"className",readonly:"readOnly",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",colspan:"colSpan",tabindex:"tabIndex",usemap:"useMap",frameborder:"frameBorder"};O.fn.extend({attr:function(B,c){return O.access(this,B,c,true,O.attr)},removeAttr:function(c){return this.each(function(){O.attr(this,c,"");this.nodeType===1&&this.removeAttribute(c)})},addClass:function(U){if(O.isFunction(U)){return this.each(function(Y){var X=O(this);X.addClass(U.call(this,Y,X.attr("class")))})}if(U&&typeof U==="string"){for(var T=(U||"").split(aL),W=0,c=this.length;W<c;W++){var V=this[W];if(V.nodeType===1){if(V.className){for(var E=" "+V.className+" ",S=V.className,B=0,P=T.length;B<P;B++){if(E.indexOf(" "+T[B]+" ")<0){S+=" "+T[B]}}V.className=O.trim(S)}else{V.className=U}}}}return this},removeClass:function(T){if(O.isFunction(T)){return this.each(function(W){var X=O(this);X.removeClass(T.call(this,W,X.attr("class")))})}if(T&&typeof T==="string"||T===F){for(var S=(T||"").split(aL),V=0,c=this.length;V<c;V++){var U=this[V];if(U.nodeType===1&&U.className){if(T){for(var E=(" "+U.className+" ").replace(aC," "),P=0,B=S.length;P<B;P++){E=E.replace(" "+S[P]+" "," ")}U.className=O.trim(E)}else{U.className=""}}}}return this},toggleClass:function(P,E){var c=typeof P,B=typeof E==="boolean";if(O.isFunction(P)){return this.each(function(T){var S=O(this);S.toggleClass(P.call(this,T,S.attr("class"),E),E)})}return this.each(function(){if(c==="string"){for(var W,S=0,V=O(this),T=E,U=P.split(aL);W=U[S++];){T=B?T:!V.hasClass(W);V[T?"addClass":"removeClass"](W)}}else{if(c==="undefined"||c==="boolean"){this.className&&O.data(this,"__className__",this.className);this.className=this.className||P===false?"":O.data(this,"__className__")||""}}})},hasClass:function(E){E=" "+E+" ";for(var B=0,c=this.length;B<c;B++){if((" "+this[B].className+" ").replace(aC," ").indexOf(E)>-1){return true}}return false},val:function(T){if(!arguments.length){var S=this[0];if(S){if(O.nodeName(S,"option")){var V=S.attributes.value;return !V||V.specified?S.value:S.text}if(O.nodeName(S,"select")){var c=S.selectedIndex;V=[];var U=S.options;S=S.type==="select-one";if(c<0){return null}var E=S?c:0;for(c=S?c+1:U.length;E<c;E++){var P=U[E];if(P.selected&&(O.support.optDisabled?!P.disabled:P.getAttribute("disabled")===null)&&(!P.parentNode.disabled||!O.nodeName(P.parentNode,"optgroup"))){T=O(P).val();if(S){return T}V.push(T)}}return V}if(aH.test(S.type)&&!O.support.checkOn){return S.getAttribute("value")===null?"on":S.value}return(S.value||"").replace(ab,"")}return F}var B=O.isFunction(T);return this.each(function(X){var Y=O(this),W=T;if(this.nodeType===1){if(B){W=T.call(this,X,Y.val())}if(W==null){W=""}else{if(typeof W==="number"){W+=""}else{if(O.isArray(W)){W=O.map(W,function(a0){return a0==null?"":a0+""})}}}if(O.isArray(W)&&aH.test(this.type)){this.checked=O.inArray(Y.val(),W)>=0}else{if(O.nodeName(this,"select")){var Z=O.makeArray(W);O("option",this).each(function(){this.selected=O.inArray(O(this).val(),Z)>=0});if(!Z.length){this.selectedIndex=-1}}else{this.value=W}}}})}});O.extend({attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attr:function(S,P,B,E){if(!S||S.nodeType===3||S.nodeType===8){return F}if(E&&P in O.attrFn){return O(S)[P](B)}E=S.nodeType!==1||!O.isXMLDoc(S);var T=B!==F;P=E&&O.props[P]||P;var c=ag.test(P);if((P in S||S[P]!==F)&&E&&!c){if(T){P==="type"&&ah.test(S.nodeName)&&S.parentNode&&O.error("type property can't be changed");if(B===null){S.nodeType===1&&S.removeAttribute(P)}else{S[P]=B}}if(O.nodeName(S,"form")&&S.getAttributeNode(P)){return S.getAttributeNode(P).nodeValue}if(P==="tabIndex"){return(P=S.getAttributeNode("tabIndex"))&&P.specified?P.value:ae.test(S.nodeName)||af.test(S.nodeName)&&S.href?0:F}return S[P]}if(!O.support.style&&E&&P==="style"){if(T){S.style.cssText=""+B}return S.style.cssText}T&&S.setAttribute(P,""+B);if(!S.attributes[P]&&S.hasAttribute&&!S.hasAttribute(P)){return F}S=!O.support.hrefNormalized&&E&&c?S.getAttribute(P,2):S.getAttribute(P);return S===null?F:S}});var s=/\.(.*)$/,aM=/^(?:textarea|input|select)$/i,ao=/\./g,ap=/ /g,Q=/[^\w\s.|`]/g,R=function(c){return c.replace(Q,"\\$&")},aI={focusin:0,focusout:0};O.event={add:function(Y,W,a0,c){if(!(Y.nodeType===3||Y.nodeType===8)){if(O.isWindow(Y)&&Y!==I&&!Y.frameElement){Y=I}if(a0===false){a0=D}else{if(!a0){return}}var Z,T;if(a0.handler){Z=a0;a0=Z.handler}if(!a0.guid){a0.guid=O.guid++}if(T=O.data(Y)){var V=Y.nodeType?"events":"__events__",S=T[V],U=T.handle;if(typeof S==="function"){U=S.handle;S=S.events}else{if(!S){Y.nodeType||(T[V]=T=function(){});T.events=S={}}}if(!U){T.handle=U=function(){return typeof O!=="undefined"&&!O.event.triggered?O.event.handle.apply(U.elem,arguments):F}}U.elem=Y;W=W.split(" ");for(var X=0,E;V=W[X++];){T=Z?O.extend({},Z):{handler:a0,data:c};if(V.indexOf(".")>-1){E=V.split(".");V=E.shift();T.namespace=E.slice(0).sort().join(".")}else{E=[];T.namespace=""}T.type=V;if(!T.guid){T.guid=a0.guid}var B=S[V],P=O.event.special[V]||{};if(!B){B=S[V]=[];if(!P.setup||P.setup.call(Y,c,E,U)===false){if(Y.addEventListener){Y.addEventListener(V,U,false)}else{Y.attachEvent&&Y.attachEvent("on"+V,U)}}}if(P.add){P.add.call(Y,T);if(!T.handler.guid){T.handler.guid=a0.guid}}B.push(T);O.event.global[V]=true}Y=null}}},global:{},remove:function(a1,Z,a3,c){if(!(a1.nodeType===3||a1.nodeType===8)){if(a3===false){a3=D}var a2,W,Y=0,V,X,a0,P,E,U,B=a1.nodeType?"events":"__events__",T=O.data(a1),S=T&&T[B];if(T&&S){if(typeof S==="function"){T=S;S=S.events}if(Z&&Z.type){a3=Z.handler;Z=Z.type}if(!Z||typeof Z==="string"&&Z.charAt(0)==="."){Z=Z||"";for(a2 in S){O.event.remove(a1,a2+Z)}}else{for(Z=Z.split(" ");a2=Z[Y++];){P=a2;V=a2.indexOf(".")<0;X=[];if(!V){X=a2.split(".");a2=X.shift();a0=RegExp("(^|\\.)"+O.map(X.slice(0).sort(),R).join("\\.(?:.*\\.)?")+"(\\.|$)")}if(E=S[a2]){if(a3){P=O.event.special[a2]||{};for(W=c||0;W<E.length;W++){U=E[W];if(a3.guid===U.guid){if(V||a0.test(U.namespace)){c==null&&E.splice(W--,1);P.remove&&P.remove.call(a1,U)}if(c!=null){break}}}if(E.length===0||c!=null&&E.length===1){if(!P.teardown||P.teardown.call(a1,X)===false){O.removeEvent(a1,a2,T.handle)}delete S[a2]}}else{for(W=0;W<E.length;W++){U=E[W];if(V||a0.test(U.namespace)){O.event.remove(a1,P,U.handler,W);E.splice(W--,1)}}}}}if(O.isEmptyObject(S)){if(Z=T.handle){Z.elem=null}delete T.events;delete T.handle;if(typeof T==="function"){O.removeData(a1,B)}else{O.isEmptyObject(T)&&O.removeData(a1)}}}}}},trigger:function(W,U,Y,c){var X=W.type||W;if(!c){W=typeof W==="object"?W[O.expando]?W:O.extend(O.Event(X),W):O.Event(X);if(X.indexOf("!")>=0){W.type=X=X.slice(0,-1);W.exclusive=true}if(!Y){W.stopPropagation();O.event.global[X]&&O.each(O.cache,function(){this.events&&this.events[X]&&O.event.trigger(W,U,this.handle.elem)})}if(!Y||Y.nodeType===3||Y.nodeType===8){return F}W.result=F;W.target=Y;U=O.makeArray(U);U.unshift(W)}W.currentTarget=Y;(c=Y.nodeType?O.data(Y,"handle"):(O.data(Y,"__events__")||{}).handle)&&c.apply(Y,U);c=Y.parentNode||Y.ownerDocument;try{if(!(Y&&Y.nodeName&&O.noData[Y.nodeName.toLowerCase()])){if(Y["on"+X]&&Y["on"+X].apply(Y,U)===false){W.result=false;W.preventDefault()}}}catch(P){}if(!W.isPropagationStopped()&&c){O.event.trigger(W,U,c,true)}else{if(!W.isDefaultPrevented()){var T;c=W.target;var E=X.replace(s,""),S=O.nodeName(c,"a")&&E==="click",V=O.event.special[E]||{};if((!V._default||V._default.call(Y,W)===false)&&!S&&!(c&&c.nodeName&&O.noData[c.nodeName.toLowerCase()])){try{if(c[E]){if(T=c["on"+E]){c["on"+E]=null}O.event.triggered=true;c[E]()}}catch(B){}if(T){c["on"+E]=T}O.event.triggered=false}}}},handle:function(T){var S,V,c,U;V=[];var E=O.makeArray(arguments);T=E[0]=O.event.fix(T||I.event);T.currentTarget=this;S=T.type.indexOf(".")<0&&!T.exclusive;if(!S){c=T.type.split(".");T.type=c.shift();V=c.slice(0).sort();c=RegExp("(^|\\.)"+V.join("\\.(?:.*\\.)?")+"(\\.|$)")}T.namespace=T.namespace||V.join(".");U=O.data(this,this.nodeType?"events":"__events__");if(typeof U==="function"){U=U.events}V=(U||{})[T.type];if(U&&V){V=V.slice(0);U=0;for(var P=V.length;U<P;U++){var B=V[U];if(S||c.test(B.namespace)){T.handler=B.handler;T.data=B.data;T.handleObj=B;B=B.handler.apply(this,E);if(B!==F){T.result=B;if(B===false){T.preventDefault();T.stopPropagation()}}if(T.isImmediatePropagationStopped()){break}}}}return T.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(P){if(P[O.expando]){return P}var E=P;P=O.Event(E);for(var c=this.props.length,B;c;){B=this.props[--c];P[B]=E[B]}if(!P.target){P.target=P.srcElement||M}if(P.target.nodeType===3){P.target=P.target.parentNode}if(!P.relatedTarget&&P.fromElement){P.relatedTarget=P.fromElement===P.target?P.toElement:P.fromElement}if(P.pageX==null&&P.clientX!=null){E=M.documentElement;c=M.body;P.pageX=P.clientX+(E&&E.scrollLeft||c&&c.scrollLeft||0)-(E&&E.clientLeft||c&&c.clientLeft||0);P.pageY=P.clientY+(E&&E.scrollTop||c&&c.scrollTop||0)-(E&&E.clientTop||c&&c.clientTop||0)}if(P.which==null&&(P.charCode!=null||P.keyCode!=null)){P.which=P.charCode!=null?P.charCode:P.keyCode}if(!P.metaKey&&P.ctrlKey){P.metaKey=P.ctrlKey}if(!P.which&&P.button!==F){P.which=P.button&1?1:P.button&2?3:P.button&4?2:0}return P},guid:100000000,proxy:O.proxy,special:{ready:{setup:O.bindReady,teardown:O.noop},live:{add:function(c){O.event.add(this,u(c.origType,c.selector),O.extend({},c,{handler:aj,guid:c.handler.guid}))},remove:function(c){O.event.remove(this,u(c.origType,c.selector),c)}},beforeunload:{setup:function(E,B,c){if(O.isWindow(this)){this.onbeforeunload=c}},teardown:function(B,c){if(this.onbeforeunload===c){this.onbeforeunload=null}}}}};O.removeEvent=M.removeEventListener?function(E,B,c){E.removeEventListener&&E.removeEventListener(B,c,false)}:function(E,B,c){E.detachEvent&&E.detachEvent("on"+B,c)};O.Event=function(c){if(!this.preventDefault){return new O.Event(c)}if(c&&c.type){this.originalEvent=c;this.type=c.type}else{this.type=c}this.timeStamp=O.now();this[O.expando]=true};O.Event.prototype={preventDefault:function(){this.isDefaultPrevented=aS;var c=this.originalEvent;if(c){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}}},stopPropagation:function(){this.isPropagationStopped=aS;var c=this.originalEvent;if(c){c.stopPropagation&&c.stopPropagation();c.cancelBubble=true}},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=aS;this.stopPropagation()},isDefaultPrevented:D,isPropagationStopped:D,isImmediatePropagationStopped:D};var aF=function(E){var B=E.relatedTarget;try{for(;B&&B!==this;){B=B.parentNode}if(B!==this){E.type=E.data;O.event.handle.apply(this,arguments)}}catch(c){}},aG=function(c){c.type=c.data;O.event.handle.apply(this,arguments)};O.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(B,c){O.event.special[B]={setup:function(E){O.event.add(this,c,E&&E.selector?aG:aF,B)},teardown:function(E){O.event.remove(this,c,E&&E.selector?aG:aF)}}});if(!O.support.submitBubbles){O.event.special.submit={setup:function(){if(this.nodeName.toLowerCase()!=="form"){O.event.add(this,"click.specialSubmit",function(E){var B=E.target,c=B.type;if((c==="submit"||c==="image")&&O(B).closest("form").length){E.liveFired=F;return aP("submit",this,arguments)}});O.event.add(this,"keypress.specialSubmit",function(E){var B=E.target,c=B.type;if((c==="text"||c==="password")&&O(B).closest("form").length&&E.keyCode===13){E.liveFired=F;return aP("submit",this,arguments)}})}else{return false}},teardown:function(){O.event.remove(this,".specialSubmit")}}}if(!O.support.changeBubbles){var z,az=function(E){var B=E.type,c=E.value;if(B==="radio"||B==="checkbox"){c=E.checked}else{if(B==="select-multiple"){c=E.selectedIndex>-1?O.map(E.options,function(P){return P.selected}).join("-"):""}else{if(E.nodeName.toLowerCase()==="select"){c=E.selectedIndex}}}return c},r=function(P,E){var c=P.target,B,S;if(!(!aM.test(c.nodeName)||c.readOnly)){B=O.data(c,"_change_data");S=az(c);if(P.type!=="focusout"||c.type!=="radio"){O.data(c,"_change_data",S)}if(!(B===F||S===B)){if(B!=null||S){P.type="change";P.liveFired=F;return O.event.trigger(P,E,c)}}}};O.event.special.change={filters:{focusout:r,beforedeactivate:r,click:function(E){var B=E.target,c=B.type;if(c==="radio"||c==="checkbox"||B.nodeName.toLowerCase()==="select"){return r.call(this,E)}},keydown:function(E){var B=E.target,c=B.type;if(E.keyCode===13&&B.nodeName.toLowerCase()!=="textarea"||E.keyCode===32&&(c==="checkbox"||c==="radio")||c==="select-multiple"){return r.call(this,E)}},beforeactivate:function(c){c=c.target;O.data(c,"_change_data",az(c))}},setup:function(){if(this.type==="file"){return false}for(var c in z){O.event.add(this,c+".specialChange",z[c])}return aM.test(this.nodeName)},teardown:function(){O.event.remove(this,".specialChange");return aM.test(this.nodeName)}};z=O.event.special.change.filters;z.focus=z.beforeactivate}M.addEventListener&&O.each({focus:"focusin",blur:"focusout"},function(E,B){function c(P){P=O.event.fix(P);P.type=B;return O.event.trigger(P,null,P.target)}O.event.special[B]={setup:function(){aI[B]++===0&&M.addEventListener(E,c,true)},teardown:function(){--aI[B]===0&&M.removeEventListener(E,c,true)}}});O.each(["bind","one"],function(B,c){O.fn[c]=function(P,S,V){if(typeof P==="object"){for(var E in P){this[c](E,S,P[E],V)}return this}if(O.isFunction(S)||S===false){V=S;S=F}var U=c==="one"?O.proxy(V,function(W){O(this).unbind(W,U);return V.apply(this,arguments)}):V;if(P==="unload"&&c!=="one"){this.one(P,S,V)}else{E=0;for(var T=this.length;E<T;E++){O.event.add(this[E],P,U,S)}}return this}});O.fn.extend({unbind:function(P,E){if(typeof P==="object"&&!P.preventDefault){for(var c in P){this.unbind(c,P[c])}}else{c=0;for(var B=this.length;c<B;c++){O.event.remove(this[c],P,E)}}return this},delegate:function(P,E,c,B){return this.live(E,c,B,P)},undelegate:function(E,B,c){return arguments.length===0?this.unbind("live"):this.die(B,null,c,E)},trigger:function(B,c){return this.each(function(){O.event.trigger(B,c,this)})},triggerHandler:function(E,B){if(this[0]){var c=O.Event(E);c.preventDefault();c.stopPropagation();O.event.trigger(c,B,this[0]);return c.result}},toggle:function(E){for(var B=arguments,c=1;c<B.length;){O.proxy(E,B[c++])}return this.click(O.proxy(E,function(P){var S=(O.data(this,"lastToggle"+E.guid)||0)%c;O.data(this,"lastToggle"+E.guid,S+1);P.preventDefault();return B[S].apply(this,arguments)||false}))},hover:function(B,c){return this.mouseenter(B).mouseleave(c||B)}});var aA={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};O.each(["live","die"],function(B,c){O.fn[c]=function(Z,E,Y,T){var V,S=0,U,X,P=T||this.selector;T=T?this:O(this.context);if(typeof Z==="object"&&!Z.preventDefault){for(V in Z){T[c](V,E,Z[V],P)}return this}if(O.isFunction(E)){Y=E;E=F}for(Z=(Z||"").split(" ");(V=Z[S++])!=null;){U=s.exec(V);X="";if(U){X=U[0];V=V.replace(s,"")}if(V==="hover"){Z.push("mouseenter"+X,"mouseleave"+X)}else{U=V;if(V==="focus"||V==="blur"){Z.push(aA[V]+X);V+=X}else{V=(aA[V]||V)+X}if(c==="live"){X=0;for(var W=T.length;X<W;X++){O.event.add(T[X],"live."+u(V,P),{data:E,selector:P,handler:Y,origType:V,origHandler:Y,preType:U})}}else{T.unbind("live."+u(V,P),Y)}}}return this}});O.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error".split(" "),function(B,c){O.fn[c]=function(E,P){if(P==null){P=E;E=null}return arguments.length>0?this.bind(c,E,P):this.trigger(c)};if(O.attrFn){O.attrFn[c]=true}});I.attachEvent&&!I.addEventListener&&O(I).bind("unload",function(){for(var B in O.cache){if(O.cache[B].handle){try{O.event.remove(O.cache[B].handle.elem)}catch(c){}}}});(function(){function W(bd,a8,a9,bb,a5,a6){a5=0;for(var a7=bb.length;a5<a7;a5++){var bc=bb[a5];if(bc){var ba=false;for(bc=bc[bd];bc;){if(bc.sizcache===a9){ba=bb[bc.sizset];break}if(bc.nodeType===1&&!a6){bc.sizcache=a9;bc.sizset=a5}if(bc.nodeName.toLowerCase()===a8){ba=bc;break}bc=bc[bd]}bb[a5]=ba}}}function V(bd,a8,a9,bb,a5,a6){a5=0;for(var a7=bb.length;a5<a7;a5++){var bc=bb[a5];if(bc){var ba=false;for(bc=bc[bd];bc;){if(bc.sizcache===a9){ba=bb[bc.sizset];break}if(bc.nodeType===1){if(!a6){bc.sizcache=a9;bc.sizset=a5}if(typeof a8!=="string"){if(bc===a8){ba=true;break}}else{if(P.filter(a8,[bc]).length>0){ba=bc;break}}}bc=bc[bd]}bb[a5]=ba}}}var Y=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,E=0,X=Object.prototype.toString,S=false,U=true;[0,0].sort(function(){U=false;return 0});var P=function(bi,bb,bc,bf){bc=bc||[];var a5=bb=bb||M;if(bb.nodeType!==1&&bb.nodeType!==9){return[]}if(!bi||typeof bi!=="string"){return bc}var a6,ba,bh,be,a9,a8=true,a7=P.isXML(bb),bd=[],bg=bi;do{Y.exec("");if(a6=Y.exec(bg)){bg=a6[3];bd.push(a6[1]);if(a6[2]){be=a6[3];break}}}while(a6);if(bd.length>1&&a4.exec(bi)){if(bd.length===2&&T.relative[bd[0]]){ba=a1(bd[0]+bd[1],bb)}else{for(ba=T.relative[bd[0]]?[bb]:P(bd.shift(),bb);bd.length;){bi=bd.shift();if(T.relative[bi]){bi+=bd.shift()}ba=a1(bi,ba)}}}else{if(!bf&&bd.length>1&&bb.nodeType===9&&!a7&&T.match.ID.test(bd[0])&&!T.match.ID.test(bd[bd.length-1])){a6=P.find(bd.shift(),bb,a7);bb=a6.expr?P.filter(a6.expr,a6.set)[0]:a6.set[0]}if(bb){a6=bf?{expr:bd.pop(),set:a2(bf)}:P.find(bd.pop(),bd.length===1&&(bd[0]==="~"||bd[0]==="+")&&bb.parentNode?bb.parentNode:bb,a7);ba=a6.expr?P.filter(a6.expr,a6.set):a6.set;if(bd.length>0){bh=a2(ba)}else{a8=false}for(;bd.length;){a6=a9=bd.pop();if(T.relative[a9]){a6=bd.pop()}else{a9=""}if(a6==null){a6=bb}T.relative[a9](bh,a6,a7)}}else{bh=[]}}bh||(bh=ba);bh||P.error(a9||bi);if(X.call(bh)==="[object Array]"){if(a8){if(bb&&bb.nodeType===1){for(bi=0;bh[bi]!=null;bi++){if(bh[bi]&&(bh[bi]===true||bh[bi].nodeType===1&&P.contains(bb,bh[bi]))){bc.push(ba[bi])}}}else{for(bi=0;bh[bi]!=null;bi++){bh[bi]&&bh[bi].nodeType===1&&bc.push(ba[bi])}}}else{bc.push.apply(bc,bh)}}else{a2(bh,bc)}if(be){P(be,a5,bc,bf);P.uniqueSort(bc)}return bc};P.uniqueSort=function(a5){if(B){S=U;a5.sort(B);if(S){for(var a6=1;a6<a5.length;a6++){a5[a6]===a5[a6-1]&&a5.splice(a6--,1)}}}return a5};P.matches=function(a5,a6){return P(a5,null,null,a6)};P.matchesSelector=function(a5,a6){return P(a6,null,null,[a5]).length>0};P.find=function(bd,a8,a9){var bb;if(!bd){return[]}for(var a5=0,a6=T.order.length;a5<a6;a5++){var a7,bc=T.order[a5];if(a7=T.leftMatch[bc].exec(bd)){var ba=a7[1];a7.splice(1,1);if(ba.substr(ba.length-1)!=="\\"){a7[1]=(a7[1]||"").replace(/\\/g,"");bb=T.find[bc](a7,a8,a9);if(bb!=null){bd=bd.replace(T.match[bc],"");break}}}}bb||(bb=a8.getElementsByTagName("*"));return{set:bb,expr:bd}};P.filter=function(bk,bd,be,bh){for(var a6,a7,bb=bk,bj=[],bg=bd,ba=bd&&bd[0]&&P.isXML(bd[0]);bk&&bd.length;){for(var a9 in T.filter){if((a6=T.leftMatch[a9].exec(bk))!=null&&a6[2]){var a8,bf,bi=T.filter[a9];bf=a6[1];a7=false;a6.splice(1,1);if(bf.substr(bf.length-1)!=="\\"){if(bg===bj){bj=[]}if(T.preFilter[a9]){if(a6=T.preFilter[a9](a6,bg,be,bj,bh,ba)){if(a6===true){continue}}else{a7=a8=true}}if(a6){for(var bc=0;(bf=bg[bc])!=null;bc++){if(bf){a8=bi(bf,a6,bc,bg);var a5=bh^!!a8;if(be&&a8!=null){if(a5){a7=true}else{bg[bc]=false}}else{if(a5){bj.push(bf);a7=true}}}}}if(a8!==F){be||(bg=bj);bk=bk.replace(T.match[a9],"");if(!a7){return[]}break}}}}if(bk===bb){if(a7==null){P.error(bk)}else{break}}bb=bk}return bg};P.error=function(a5){throw"Syntax error, unrecognized expression: "+a5};var T=P.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a5){return a5.getAttribute("href")}},relative:{"+":function(a5,a6){var a7=typeof a6==="string",ba=a7&&!/\W/.test(a6);a7=a7&&!ba;if(ba){a6=a6.toLowerCase()}ba=0;for(var a8=a5.length,a9;ba<a8;ba++){if(a9=a5[ba]){for(;(a9=a9.previousSibling)&&a9.nodeType!==1;){}a5[ba]=a7||a9&&a9.nodeName.toLowerCase()===a6?a9||false:a9===a6}}a7&&P.filter(a6,a5,true)},">":function(a5,a6){var a7,ba=typeof a6==="string",a8=0,a9=a5.length;if(ba&&!/\W/.test(a6)){for(a6=a6.toLowerCase();a8<a9;a8++){if(a7=a5[a8]){a7=a7.parentNode;a5[a8]=a7.nodeName.toLowerCase()===a6?a7:false}}}else{for(;a8<a9;a8++){if(a7=a5[a8]){a5[a8]=ba?a7.parentNode:a7.parentNode===a6}}ba&&P.filter(a6,a5,true)}},"":function(a5,a6,a7){var ba,a8=E++,a9=V;if(typeof a6==="string"&&!/\W/.test(a6)){ba=a6=a6.toLowerCase();a9=W}a9("parentNode",a6,a8,a5,ba,a7)},"~":function(a5,a6,a7){var ba,a8=E++,a9=V;if(typeof a6==="string"&&!/\W/.test(a6)){ba=a6=a6.toLowerCase();a9=W}a9("previousSibling",a6,a8,a5,ba,a7)}},find:{ID:function(a5,a6,a7){if(typeof a6.getElementById!=="undefined"&&!a7){return(a5=a6.getElementById(a5[1]))&&a5.parentNode?[a5]:[]}},NAME:function(a5,a6){if(typeof a6.getElementsByName!=="undefined"){for(var a7=[],ba=a6.getElementsByName(a5[1]),a8=0,a9=ba.length;a8<a9;a8++){ba[a8].getAttribute("name")===a5[1]&&a7.push(ba[a8])}return a7.length===0?null:a7}},TAG:function(a5,a6){return a6.getElementsByTagName(a5[1])}},preFilter:{CLASS:function(a5,a6,a7,ba,a8,a9){a5=" "+a5[1].replace(/\\/g,"")+" ";if(a9){return a5}a9=0;for(var bb;(bb=a6[a9])!=null;a9++){if(bb){if(a8^(bb.className&&(" "+bb.className+" ").replace(/[\t\n]/g," ").indexOf(a5)>=0)){a7||ba.push(bb)}else{if(a7){a6[a9]=false}}}}return false},ID:function(a5){return a5[1].replace(/\\/g,"")},TAG:function(a5){return a5[1].toLowerCase()},CHILD:function(a5){if(a5[1]==="nth"){var a6=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(a5[2]==="even"&&"2n"||a5[2]==="odd"&&"2n+1"||!/\D/.test(a5[2])&&"0n+"+a5[2]||a5[2]);a5[2]=a6[1]+(a6[2]||1)-0;a5[3]=a6[3]-0}a5[0]=E++;return a5},ATTR:function(a5,a6,a7,ba,a8,a9){a6=a5[1].replace(/\\/g,"");if(!a9&&T.attrMap[a6]){a5[1]=T.attrMap[a6]}if(a5[2]==="~="){a5[4]=" "+a5[4]+" "}return a5},PSEUDO:function(a5,a6,a7,a9,a8){if(a5[1]==="not"){if((Y.exec(a5[3])||"").length>1||/^\w/.test(a5[3])){a5[3]=P(a5[3],null,null,a6)}else{a5=P.filter(a5[3],a6,a7,true^a8);a7||a9.push.apply(a9,a5);return false}}else{if(T.match.POS.test(a5[0])||T.match.CHILD.test(a5[0])){return true}}return a5},POS:function(a5){a5.unshift(true);return a5}},filters:{enabled:function(a5){return a5.disabled===false&&a5.type!=="hidden"},disabled:function(a5){return a5.disabled===true},checked:function(a5){return a5.checked===true},selected:function(a5){return a5.selected===true},parent:function(a5){return !!a5.firstChild},empty:function(a5){return !a5.firstChild},has:function(a5,a6,a7){return !!P(a7[3],a5).length},header:function(a5){return/h\d/i.test(a5.nodeName)},text:function(a5){return"text"===a5.type},radio:function(a5){return"radio"===a5.type},checkbox:function(a5){return"checkbox"===a5.type},file:function(a5){return"file"===a5.type},password:function(a5){return"password"===a5.type},submit:function(a5){return"submit"===a5.type},image:function(a5){return"image"===a5.type},reset:function(a5){return"reset"===a5.type},button:function(a5){return"button"===a5.type||a5.nodeName.toLowerCase()==="button"},input:function(a5){return/input|select|textarea|button/i.test(a5.nodeName)}},setFilters:{first:function(a5,a6){return a6===0},last:function(a5,a6,a7,a8){return a6===a8.length-1},even:function(a5,a6){return a6%2===0},odd:function(a5,a6){return a6%2===1},lt:function(a5,a6,a7){return a6<a7[3]-0},gt:function(a5,a6,a7){return a6>a7[3]-0},nth:function(a5,a6,a7){return a7[3]-0===a6},eq:function(a5,a6,a7){return a7[3]-0===a6}},filter:{PSEUDO:function(a5,a6,a7,ba){var a8=a6[1],a9=T.filters[a8];if(a9){return a9(a5,a7,a6,ba)}else{if(a8==="contains"){return(a5.textContent||a5.innerText||P.getText([a5])||"").indexOf(a6[3])>=0}else{if(a8==="not"){a6=a6[3];a7=0;for(ba=a6.length;a7<ba;a7++){if(a6[a7]===a5){return false}}return true}else{P.error("Syntax error, unrecognized expression: "+a8)}}}},CHILD:function(bc,a8){var a9=a8[1],ba=bc;switch(a9){case"only":case"first":for(;ba=ba.previousSibling;){if(ba.nodeType===1){return false}}if(a9==="first"){return true}ba=bc;case"last":for(;ba=ba.nextSibling;){if(ba.nodeType===1){return false}}return true;case"nth":a9=a8[2];var a5=a8[3];if(a9===1&&a5===0){return true}var a6=a8[0],a7=bc.parentNode;if(a7&&(a7.sizcache!==a6||!bc.nodeIndex)){var bb=0;for(ba=a7.firstChild;ba;ba=ba.nextSibling){if(ba.nodeType===1){ba.nodeIndex=++bb}}a7.sizcache=a6}ba=bc.nodeIndex-a5;return a9===0?ba===0:ba%a9===0&&ba/a9>=0}},ID:function(a5,a6){return a5.nodeType===1&&a5.getAttribute("id")===a6},TAG:function(a5,a6){return a6==="*"&&a5.nodeType===1||a5.nodeName.toLowerCase()===a6},CLASS:function(a5,a6){return(" "+(a5.className||a5.getAttribute("class"))+" ").indexOf(a6)>-1},ATTR:function(a5,a6){var a7=a6[1];a7=T.attrHandle[a7]?T.attrHandle[a7](a5):a5[a7]!=null?a5[a7]:a5.getAttribute(a7);var ba=a7+"",a8=a6[2],a9=a6[4];return a7==null?a8==="!=":a8==="="?ba===a9:a8==="*="?ba.indexOf(a9)>=0:a8==="~="?(" "+ba+" ").indexOf(a9)>=0:!a9?ba&&a7!==false:a8==="!="?ba!==a9:a8==="^="?ba.indexOf(a9)===0:a8==="$="?ba.substr(ba.length-a9.length)===a9:a8==="|="?ba===a9||ba.substr(0,a9.length+1)===a9+"-":false},POS:function(a5,a6,a7,a9){var a8=T.setFilters[a6[2]];if(a8){return a8(a5,a7,a6,a9)}}}},a4=T.match.POS,c=function(a5,a6){return"\\"+(a6-0+1)},a3;for(a3 in T.match){T.match[a3]=RegExp(T.match[a3].source+/(?![^\[]*\])(?![^\(]*\))/.source);T.leftMatch[a3]=RegExp(/(^(?:.|\r|\n)*?)/.source+T.match[a3].source.replace(/\\(\d+)/g,c))}var a2=function(a5,a6){a5=Array.prototype.slice.call(a5,0);if(a6){a6.push.apply(a6,a5);return a6}return a5};try{Array.prototype.slice.call(M.documentElement.childNodes,0)}catch(Z){a2=function(a5,a6){var a7=0,a9=a6||[];if(X.call(a5)==="[object Array]"){Array.prototype.push.apply(a9,a5)}else{if(typeof a5.length==="number"){for(var a8=a5.length;a7<a8;a7++){a9.push(a5[a7])}}else{for(;a5[a7];a7++){a9.push(a5[a7])}}}return a9}}var B,a0;if(M.documentElement.compareDocumentPosition){B=function(a5,a6){if(a5===a6){S=true;return 0}if(!a5.compareDocumentPosition||!a6.compareDocumentPosition){return a5.compareDocumentPosition?-1:1}return a5.compareDocumentPosition(a6)&4?-1:1}}else{B=function(a5,a6){var a7,ba,a8=[],a9=[];a7=a5.parentNode;ba=a6.parentNode;var bb=a7;if(a5===a6){S=true;return 0}else{if(a7===ba){return a0(a5,a6)}else{if(a7){if(!ba){return 1}}else{return -1}}}for(;bb;){a8.unshift(bb);bb=bb.parentNode}for(bb=ba;bb;){a9.unshift(bb);bb=bb.parentNode}a7=a8.length;ba=a9.length;for(bb=0;bb<a7&&bb<ba;bb++){if(a8[bb]!==a9[bb]){return a0(a8[bb],a9[bb])}}return bb===a7?a0(a5,a9[bb],-1):a0(a8[bb],a6,1)};a0=function(a5,a6,a7){if(a5===a6){return a7}for(a5=a5.nextSibling;a5;){if(a5===a6){return -1}a5=a5.nextSibling}return 1}}P.getText=function(a5){for(var a6="",a7,a8=0;a5[a8];a8++){a7=a5[a8];if(a7.nodeType===3||a7.nodeType===4){a6+=a7.nodeValue}else{if(a7.nodeType!==8){a6+=P.getText(a7.childNodes)}}}return a6};(function(){var a5=M.createElement("div"),a6="script"+(new Date).getTime(),a7=M.documentElement;a5.innerHTML="<a name='"+a6+"'/>";a7.insertBefore(a5,a7.firstChild);if(M.getElementById(a6)){T.find.ID=function(ba,a8,a9){if(typeof a8.getElementById!=="undefined"&&!a9){return(a8=a8.getElementById(ba[1]))?a8.id===ba[1]||typeof a8.getAttributeNode!=="undefined"&&a8.getAttributeNode("id").nodeValue===ba[1]?[a8]:F:[]}};T.filter.ID=function(ba,a8){var a9=typeof ba.getAttributeNode!=="undefined"&&ba.getAttributeNode("id");return ba.nodeType===1&&a9&&a9.nodeValue===a8}}a7.removeChild(a5);a7=a5=null})();(function(){var a5=M.createElement("div");a5.appendChild(M.createComment(""));if(a5.getElementsByTagName("*").length>0){T.find.TAG=function(a6,a7){var ba=a7.getElementsByTagName(a6[1]);if(a6[1]==="*"){for(var a8=[],a9=0;ba[a9];a9++){ba[a9].nodeType===1&&a8.push(ba[a9])}ba=a8}return ba}}a5.innerHTML="<a href='#'></a>";if(a5.firstChild&&typeof a5.firstChild.getAttribute!=="undefined"&&a5.firstChild.getAttribute("href")!=="#"){T.attrHandle.href=function(a6){return a6.getAttribute("href",2)}}a5=null})();M.querySelectorAll&&function(){var a5=P,a6=M.createElement("div");a6.innerHTML="<p class='TEST'></p>";if(!(a6.querySelectorAll&&a6.querySelectorAll(".TEST").length===0)){P=function(be,a8,a9,bc){a8=a8||M;be=be.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bc&&!P.isXML(a8)){if(a8.nodeType===9){try{return a2(a8.querySelectorAll(be),a9)}catch(bf){}}else{if(a8.nodeType===1&&a8.nodeName.toLowerCase()!=="object"){var bd=a8.getAttribute("id"),bb=bd||"__sizzle__";bd||a8.setAttribute("id",bb);try{return a2(a8.querySelectorAll("#"+bb+" "+be),a9)}catch(ba){}finally{bd||a8.removeAttribute("id")}}}}return a5(be,a8,a9,bc)};for(var a7 in a5){P[a7]=a5[a7]}a6=null}}();(function(){var a5=M.documentElement,a6=a5.matchesSelector||a5.mozMatchesSelector||a5.webkitMatchesSelector||a5.msMatchesSelector,a7=false;try{a6.call(M.documentElement,"[test!='']:sizzle")}catch(a8){a7=true}if(a6){P.matchesSelector=function(a9,ba){ba=ba.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!P.isXML(a9)){try{if(a7||!T.match.PSEUDO.test(ba)&&!/!=/.test(ba)){return a6.call(a9,ba)}}catch(bb){}}return P(ba,null,null,[a9]).length>0}}})();(function(){var a5=M.createElement("div");a5.innerHTML="<div class='test e'></div><div class='test'></div>";if(!(!a5.getElementsByClassName||a5.getElementsByClassName("e").length===0)){a5.lastChild.className="e";if(a5.getElementsByClassName("e").length!==1){T.order.splice(1,0,"CLASS");T.find.CLASS=function(a6,a7,a8){if(typeof a7.getElementsByClassName!=="undefined"&&!a8){return a7.getElementsByClassName(a6[1])}};a5=null}}})();P.contains=M.documentElement.contains?function(a5,a6){return a5!==a6&&(a5.contains?a5.contains(a6):true)}:M.documentElement.compareDocumentPosition?function(a5,a6){return !!(a5.compareDocumentPosition(a6)&16)}:function(){return false};P.isXML=function(a5){return(a5=(a5?a5.ownerDocument||a5:0).documentElement)?a5.nodeName!=="HTML":false};var a1=function(a5,a6){for(var a7,ba=[],a8="",a9=a6.nodeType?[a6]:a6;a7=T.match.PSEUDO.exec(a5);){a8+=a7[0];a5=a5.replace(T.match.PSEUDO,"")}a5=T.relative[a5]?a5+"*":a5;a7=0;for(var bb=a9.length;a7<bb;a7++){P(a5,a9[a7],ba)}return P.filter(a8,ba)};O.find=P;O.expr=P.selectors;O.expr[":"]=O.expr.filters;O.unique=P.uniqueSort;O.text=P.getText;O.isXMLDoc=P.isXML;O.contains=P.contains})();var N=/Until$/,l=/^(?:parents|prevUntil|prevAll)/,e=/,/,am=/^.[^:#\[\.,]*$/,b=Array.prototype.slice,d=O.expr.match.POS;O.fn.extend({find:function(T){for(var S=this.pushStack("","find",T),B=0,E=0,U=this.length;E<U;E++){B=S.length;O.find(T,this[E],S);if(E>0){for(var c=B;c<S.length;c++){for(var P=0;P<B;P++){if(S[P]===S[c]){S.splice(c--,1);break}}}}}return S},has:function(B){var c=O(B);return this.filter(function(){for(var E=0,P=c.length;E<P;E++){if(O.contains(this,c[E])){return true}}})},not:function(c){return this.pushStack(aQ(this,c,false),"not",c)},filter:function(c){return this.pushStack(aQ(this,c,true),"filter",c)},is:function(c){return !!c&&O.filter(c,this).length>0},closest:function(U,T){var W=[],c,V,E=this[0];if(O.isArray(U)){var S,B={},P=1;if(E&&U.length){c=0;for(V=U.length;c<V;c++){S=U[c];B[S]||(B[S]=O.expr.match.POS.test(S)?O(S,T||this.context):S)}for(;E&&E.ownerDocument&&E!==T;){for(S in B){c=B[S];if(c.jquery?c.index(E)>-1:O(E).is(c)){W.push({selector:S,elem:E,level:P})}}E=E.parentNode;P++}}return W}S=d.test(U)?O(U,T||this.context):null;c=0;for(V=this.length;c<V;c++){for(E=this[c];E;){if(S?S.index(E)>-1:O.find.matchesSelector(E,U)){W.push(E);break}else{E=E.parentNode;if(!E||!E.ownerDocument||E===T){break}}}}W=W.length>1?O.unique(W):W;return this.pushStack(W,"closest",U)},index:function(c){if(!c||typeof c==="string"){return O.inArray(this[0],c?O(c):this.parent().children())}return O.inArray(c.jquery?c[0]:c,this)},add:function(P,E){var c=typeof P==="string"?O(P,E||this.context):O.makeArray(P),B=O.merge(this.get(),c);return this.pushStack(!c[0]||!c[0].parentNode||c[0].parentNode.nodeType===11||!B[0]||!B[0].parentNode||B[0].parentNode.nodeType===11?B:O.unique(B))},andSelf:function(){return this.add(this.prevObject)}});O.each({parent:function(c){return(c=c.parentNode)&&c.nodeType!==11?c:null},parents:function(c){return O.dir(c,"parentNode")},parentsUntil:function(E,B,c){return O.dir(E,"parentNode",c)},next:function(c){return O.nth(c,2,"nextSibling")},prev:function(c){return O.nth(c,2,"previousSibling")},nextAll:function(c){return O.dir(c,"nextSibling")},prevAll:function(c){return O.dir(c,"previousSibling")},nextUntil:function(E,B,c){return O.dir(E,"nextSibling",c)},prevUntil:function(E,B,c){return O.dir(E,"previousSibling",c)},siblings:function(c){return O.sibling(c.parentNode.firstChild,c)},children:function(c){return O.sibling(c.firstChild)},contents:function(c){return O.nodeName(c,"iframe")?c.contentDocument||c.contentWindow.document:O.makeArray(c.childNodes)}},function(B,c){O.fn[B]=function(E,P){var S=O.map(this,c,E);N.test(B)||(P=E);if(P&&typeof P==="string"){S=O.filter(P,S)}S=this.length>1?O.unique(S):S;if((this.length>1||e.test(P))&&l.test(B)){S=S.reverse()}return this.pushStack(S,B,b.call(arguments).join(","))}});O.extend({filter:function(E,B,c){if(c){E=":not("+E+")"}return B.length===1?O.find.matchesSelector(B[0],E)?[B[0]]:[]:O.find.matches(E,B)},dir:function(P,E,c){var B=[];for(P=P[E];P&&P.nodeType!==9&&(c===F||P.nodeType!==1||!O(P).is(c));){P.nodeType===1&&B.push(P);P=P[E]}return B},nth:function(P,E,c){E=E||1;for(var B=0;P;P=P[c]){if(P.nodeType===1&&++B===E){break}}return P},sibling:function(E,B){for(var c=[];E;E=E.nextSibling){E.nodeType===1&&E!==B&&c.push(E)}return c}});var ay=/ jQuery\d+="(?:\d+|null)"/g,J=/^\s+/,at=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,aq=/<([\w:]+)/,h=/<tbody/i,i=/<|&#?\w+;/,ar=/<(?:script|object|embed|option|style)/i,aw=/checked\s*(?:[^=]|=\s*.checked.)/i,f=/\=([^="'>\s]+\/)>/g,y={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};y.optgroup=y.option;y.tbody=y.tfoot=y.colgroup=y.caption=y.thead;y.th=y.td;if(!O.support.htmlSerialize){y._default=[1,"div<div>","</div>"]}O.fn.extend({text:function(c){if(O.isFunction(c)){return this.each(function(E){var B=O(this);B.text(c.call(this,E,B.text()))})}if(typeof c!=="object"&&c!==F){return this.empty().append((this[0]&&this[0].ownerDocument||M).createTextNode(c))}return O.text(this)},wrapAll:function(B){if(O.isFunction(B)){return this.each(function(E){O(this).wrapAll(B.call(this,E))})}if(this[0]){var c=O(B,this[0].ownerDocument).eq(0).clone(true);this[0].parentNode&&c.insertBefore(this[0]);c.map(function(){for(var E=this;E.firstChild&&E.firstChild.nodeType===1;){E=E.firstChild}return E}).append(this)}return this},wrapInner:function(c){if(O.isFunction(c)){return this.each(function(B){O(this).wrapInner(c.call(this,B))})}return this.each(function(){var E=O(this),B=E.contents();B.length?B.wrapAll(c):E.append(c)})},wrap:function(c){return this.each(function(){O(this).wrapAll(c)})},unwrap:function(){return this.parent().each(function(){O.nodeName(this,"body")||O(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.appendChild(c)})},prepend:function(){return this.domManip(arguments,true,function(c){this.nodeType===1&&this.insertBefore(c,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(B){this.parentNode.insertBefore(B,this)})}else{if(arguments.length){var c=O(arguments[0]);c.push.apply(c,this.toArray());return this.pushStack(c,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(B){this.parentNode.insertBefore(B,this.nextSibling)})}else{if(arguments.length){var c=this.pushStack(this,"after",arguments);c.push.apply(c,O(arguments[0]).toArray());return c}}},remove:function(P,E){for(var c=0,B;(B=this[c])!=null;c++){if(!P||O.filter(P,[B]).length){if(!E&&B.nodeType===1){O.cleanData(B.getElementsByTagName("*"));O.cleanData([B])}B.parentNode&&B.parentNode.removeChild(B)}}return this},empty:function(){for(var B=0,c;(c=this[B])!=null;B++){for(c.nodeType===1&&O.cleanData(c.getElementsByTagName("*"));c.firstChild;){c.removeChild(c.firstChild)}}return this},clone:function(B){var c=this.map(function(){if(!O.support.noCloneEvent&&!O.isXMLDoc(this)){var E=this.outerHTML,P=this.ownerDocument;if(!E){E=P.createElement("div");E.appendChild(this.cloneNode(true));E=E.innerHTML}return O.clean([E.replace(ay,"").replace(f,'="$1">').replace(J,"")],P)[0]}else{return this.cloneNode(true)}});if(B===true){m(this,c);m(this.find("*"),c.find("*"))}return c},html:function(P){if(P===F){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(ay,""):null}else{if(typeof P==="string"&&!ar.test(P)&&(O.support.leadingWhitespace||!J.test(P))&&!y[(aq.exec(P)||["",""])[1].toLowerCase()]){P=P.replace(at,"<$1></$2>");try{for(var E=0,c=this.length;E<c;E++){if(this[E].nodeType===1){O.cleanData(this[E].getElementsByTagName("*"));this[E].innerHTML=P}}}catch(B){this.empty().append(P)}}else{O.isFunction(P)?this.each(function(T){var S=O(this);S.html(P.call(this,T,S.html()))}):this.empty().append(P)}}return this},replaceWith:function(c){if(this[0]&&this[0].parentNode){if(O.isFunction(c)){return this.each(function(P){var B=O(this),E=B.html();B.replaceWith(c.call(this,P,E))})}if(typeof c!=="string"){c=O(c).detach()}return this.each(function(){var E=this.nextSibling,B=this.parentNode;O(this).remove();E?O(E).before(c):O(B).append(c)})}else{return this.pushStack(O(O.isFunction(c)?c():c),"replaceWith",c)}},detach:function(c){return this.remove(c,true)},domManip:function(U,T,W){var c,V,E,S=U[0],B=[];if(!O.support.checkClone&&arguments.length===3&&typeof S==="string"&&aw.test(S)){return this.each(function(){O(this).domManip(U,T,W,true)})}if(O.isFunction(S)){return this.each(function(Y){var X=O(this);U[0]=S.call(this,Y,T?X.html():F);X.domManip(U,T,W)})}if(this[0]){c=S&&S.parentNode;c=O.support.parentNode&&c&&c.nodeType===11&&c.childNodes.length===this.length?{fragment:c}:O.buildFragment(U,this,B);E=c.fragment;if(V=E.childNodes.length===1?E=E.firstChild:E.firstChild){T=T&&O.nodeName(V,"tr");V=0;for(var P=this.length;V<P;V++){W.call(T?O.nodeName(this[V],"table")?this[V].getElementsByTagName("tbody")[0]||this[V].appendChild(this[V].ownerDocument.createElement("tbody")):this[V]:this[V],V>0||c.cacheable||this.length>1?E.cloneNode(true):E)}}B.length&&O.each(B,an)}return this}});O.buildFragment=function(S,P,B){var E,T,c;P=P&&P[0]?P[0].ownerDocument||P[0]:M;if(S.length===1&&typeof S[0]==="string"&&S[0].length<512&&P===M&&!ar.test(S[0])&&(O.support.checkClone||!aw.test(S[0]))){T=true;if(c=O.fragments[S[0]]){if(c!==1){E=c}}}if(!E){E=P.createDocumentFragment();O.clean(S,P,E,B)}if(T){O.fragments[S[0]]=c?E:1}return{fragment:E,cacheable:T}};O.fragments={};O.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(B,c){O.fn[B]=function(P){var S=[];P=O(P);var U=this.length===1&&this[0].parentNode;if(U&&U.nodeType===11&&U.childNodes.length===1&&P.length===1){P[c](this[0]);return this}else{U=0;for(var E=P.length;U<E;U++){var T=(U>0?this.clone(true):this).get();O(P[U])[c](T);S=S.concat(T)}return this.pushStack(S,B,P.selector)}}});O.extend({clean:function(W,U,Y,c){U=U||M;if(typeof U.createElement==="undefined"){U=U.ownerDocument||U[0]&&U[0].ownerDocument||M}for(var X=[],P=0,T;(T=W[P])!=null;P++){if(typeof T==="number"){T+=""}if(T){if(typeof T==="string"&&!i.test(T)){T=U.createTextNode(T)}else{if(typeof T==="string"){T=T.replace(at,"<$1></$2>");var E=(aq.exec(T)||["",""])[1].toLowerCase(),S=y[E]||y._default,V=S[0],B=U.createElement("div");for(B.innerHTML=S[1]+T+S[2];V--;){B=B.lastChild}if(!O.support.tbody){V=h.test(T);E=E==="table"&&!V?B.firstChild&&B.firstChild.childNodes:S[1]==="<table>"&&!V?B.childNodes:[];for(S=E.length-1;S>=0;--S){O.nodeName(E[S],"tbody")&&!E[S].childNodes.length&&E[S].parentNode.removeChild(E[S])}}!O.support.leadingWhitespace&&J.test(T)&&B.insertBefore(U.createTextNode(J.exec(T)[0]),B.firstChild);T=B.childNodes}}if(T.nodeType){X.push(T)}else{X=O.merge(X,T)}}}if(Y){for(P=0;X[P];P++){if(c&&O.nodeName(X[P],"script")&&(!X[P].type||X[P].type.toLowerCase()==="text/javascript")){c.push(X[P].parentNode?X[P].parentNode.removeChild(X[P]):X[P])}else{X[P].nodeType===1&&X.splice.apply(X,[P+1,0].concat(O.makeArray(X[P].getElementsByTagName("script"))));Y.appendChild(X[P])}}}return X},cleanData:function(U){for(var T,W,c=O.cache,V=O.event.special,E=O.support.deleteExpando,S=0,B;(B=U[S])!=null;S++){if(!(B.nodeName&&O.noData[B.nodeName.toLowerCase()])){if(W=B[O.expando]){if((T=c[W])&&T.events){for(var P in T.events){V[P]?O.event.remove(B,P):O.removeEvent(B,P,T.handle)}}if(E){delete B[O.expando]}else{B.removeAttribute&&B.removeAttribute(O.expando)}delete c[W]}}}}});var ax=/alpha\([^)]*\)/i,g=/opacity=([^)]*)/,w=/-([a-z])/ig,aW=/([A-Z])/g,au=/^-?\d+(?:px)?$/i,aT=/^-?\d/,aU={position:"absolute",visibility:"hidden",display:"block"},ac=["Left","Right"],ad=["Top","Bottom"],A,av,n,aZ=function(B,c){return c.toUpperCase()};O.fn.css=function(B,c){if(arguments.length===2&&c===F){return this}return O.access(this,B,c,true,function(E,P,S){return S!==F?O.style(E,P,S):O.css(E,P)})};O.extend({cssHooks:{opacity:{get:function(E,B){if(B){var c=A(E,"opacity","opacity");return c===""?"1":c}else{return E.style.opacity}}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,zoom:true,lineHeight:true},cssProps:{"float":O.support.cssFloat?"cssFloat":"styleFloat"},style:function(U,T,W,c){if(!(!U||U.nodeType===3||U.nodeType===8||!U.style)){var V,E=O.camelCase(T),S=U.style,B=O.cssHooks[E];T=O.cssProps[E]||E;if(W!==F){if(!(typeof W==="number"&&isNaN(W)||W==null)){if(typeof W==="number"&&!O.cssNumber[E]){W+="px"}if(!B||!("set" in B)||(W=B.set(U,W))!==F){try{S[T]=W}catch(P){}}}}else{if(B&&"get" in B&&(V=B.get(U,false,c))!==F){return V}return S[T]}}},css:function(S,P,B){var E,T=O.camelCase(P),c=O.cssHooks[T];P=O.cssProps[T]||T;if(c&&"get" in c&&(E=c.get(S,true,B))!==F){return E}else{if(A){return A(S,P,T)}}},swap:function(P,E,c){var B={},S;for(S in E){B[S]=P.style[S];P.style[S]=E[S]}c.call(P);for(S in E){P.style[S]=B[S]}},camelCase:function(c){return c.replace(w,aZ)}});O.curCSS=O.css;O.each(["height","width"],function(B,c){O.cssHooks[c]={get:function(P,S,T){var E;if(S){if(P.offsetWidth!==0){E=G(P,c,T)}else{O.swap(P,aU,function(){E=G(P,c,T)})}if(E<=0){E=A(P,c,c);if(E==="0px"&&n){E=n(P,c,c)}if(E!=null){return E===""||E==="auto"?"0px":E}}if(E<0||E==null){E=P.style[c];return E===""||E==="auto"?"0px":E}return typeof E==="string"?E:E+"px"}},set:function(E,P){if(au.test(P)){P=parseFloat(P);if(P>=0){return P+"px"}}else{return P}}}});if(!O.support.opacity){O.cssHooks.opacity={get:function(B,c){return g.test((c&&B.currentStyle?B.currentStyle.filter:B.style.filter)||"")?parseFloat(RegExp.$1)/100+"":c?"1":""},set:function(P,E){var c=P.style;c.zoom=1;var B=O.isNaN(E)?"":"alpha(opacity="+E*100+")",S=c.filter||"";c.filter=ax.test(S)?S.replace(ax,B):c.filter+" "+B}}}if(M.defaultView&&M.defaultView.getComputedStyle){av=function(P,E,c){var B;c=c.replace(aW,"-$1").toLowerCase();if(!(E=P.ownerDocument.defaultView)){return F}if(E=E.getComputedStyle(P,null)){B=E.getPropertyValue(c);if(B===""&&!O.contains(P.ownerDocument.documentElement,P)){B=O.style(P,c)}}return B}}if(M.documentElement.currentStyle){n=function(S,P){var B,E,T=S.currentStyle&&S.currentStyle[P],c=S.style;if(!au.test(T)&&aT.test(T)){B=c.left;E=S.runtimeStyle.left;S.runtimeStyle.left=S.currentStyle.left;c.left=P==="fontSize"?"1em":T||0;T=c.pixelLeft+"px";c.left=B;S.runtimeStyle.left=E}return T===""?"auto":T}}A=av||n;if(O.expr&&O.expr.filters){O.expr.filters.hidden=function(B){var c=B.offsetHeight;return B.offsetWidth===0&&c===0||!O.support.reliableHiddenOffsets&&(B.style.display||O.css(B,"display"))==="none"};O.expr.filters.visible=function(c){return !O.expr.filters.hidden(c)}}var a=O.now(),aX=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,aY=/^(?:select|textarea)/i,aN=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aO=/^(?:GET|HEAD)$/,aa=/\[\]$/,C=/\=\?(&|$)/,aJ=/\?/,p=/([?&])_=[^&]*/,q=/^(\w+:)?\/\/([^\/?#]+)/,aR=/%20/g,v=/#.*$/,ak=O.fn.load;O.fn.extend({load:function(S,P,B){if(typeof S!=="string"&&ak){return ak.apply(this,arguments)}else{if(!this.length){return this}}var E=S.indexOf(" ");if(E>=0){var T=S.slice(E,S.length);S=S.slice(0,E)}E="GET";if(P){if(O.isFunction(P)){B=P;P=null}else{if(typeof P==="object"){P=O.param(P,O.ajaxSettings.traditional);E="POST"}}}var c=this;O.ajax({url:S,type:E,dataType:"html",data:P,complete:function(U,V){if(V==="success"||V==="notmodified"){c.html(T?O("<div>").append(U.responseText.replace(aX,"")).find(T):U.responseText)}B&&c.each(B,[U.responseText,V,U])}});return this},serialize:function(){return O.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?O.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||aY.test(this.nodeName)||aN.test(this.type))}).map(function(E,B){var c=O(this).val();return c==null?null:O.isArray(c)?O.map(c,function(P){return{name:B.name,value:P}}):{name:B.name,value:c}}).get()}});O.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(B,c){O.fn[c]=function(E){return this.bind(c,E)}});O.extend({get:function(P,E,c,B){if(O.isFunction(E)){B=B||c;c=E;E=null}return O.ajax({type:"GET",url:P,data:E,success:c,dataType:B})},getScript:function(B,c){return O.get(B,null,c,"script")},getJSON:function(E,B,c){return O.get(E,B,c,"json")},post:function(P,E,c,B){if(O.isFunction(E)){B=B||c;c=E;E={}}return O.ajax({type:"POST",url:P,data:E,success:c,dataType:B})},ajaxSetup:function(c){O.extend(O.ajaxSettings,c)},ajaxSettings:{url:location.href,global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,xhr:function(){return new I.XMLHttpRequest},accepts:{xml:"application/xml, text/xml",html:"text/html",script:"text/javascript, application/javascript",json:"application/json, text/javascript",text:"text/plain",_default:"*/*"}},ajax:function(Y){var X=O.extend(true,{},O.ajaxSettings,Y),a1,E,Z,S=X.type.toUpperCase(),W=aO.test(S);X.url=X.url.replace(v,"");X.context=Y&&Y.context!=null?Y.context:X;if(X.data&&X.processData&&typeof X.data!=="string"){X.data=O.param(X.data,X.traditional)}if(X.dataType==="jsonp"){if(S==="GET"){C.test(X.url)||(X.url+=(aJ.test(X.url)?"&":"?")+(X.jsonp||"callback")+"=?")}else{if(!X.data||!C.test(X.data)){X.data=(X.data?X.data+"&":"")+(X.jsonp||"callback")+"=?"}}X.dataType="json"}if(X.dataType==="json"&&(X.data&&C.test(X.data)||C.test(X.url))){a1=X.jsonpCallback||"jsonp"+a++;if(X.data){X.data=(X.data+"").replace(C,"="+a1+"$1")}X.url=X.url.replace(C,"="+a1+"$1");X.dataType="script";var P=I[a1];I[a1]=function(a9){if(O.isFunction(P)){P(a9)}else{I[a1]=F;try{delete I[a1]}catch(a8){}}Z=a9;O.handleSuccess(X,B,E,Z);O.handleComplete(X,B,E,Z);c&&c.removeChild(a6)}}if(X.dataType==="script"&&X.cache===null){X.cache=false}if(X.cache===false&&W){var V=O.now(),a7=X.url.replace(p,"$1_="+V);X.url=a7+(a7===X.url?(aJ.test(X.url)?"&":"?")+"_="+V:"")}if(X.data&&W){X.url+=(aJ.test(X.url)?"&":"?")+X.data}X.global&&O.active++===0&&O.event.trigger("ajaxStart");V=(V=q.exec(X.url))&&(V[1]&&V[1].toLowerCase()!==location.protocol||V[2].toLowerCase()!==location.host);if(X.dataType==="script"&&S==="GET"&&V){var c=M.getElementsByTagName("head")[0]||M.documentElement,a6=M.createElement("script");if(X.scriptCharset){a6.charset=X.scriptCharset}a6.src=X.url;if(!a1){var a5=false;a6.onload=a6.onreadystatechange=function(){if(!a5&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){a5=true;O.handleSuccess(X,B,E,Z);O.handleComplete(X,B,E,Z);a6.onload=a6.onreadystatechange=null;c&&a6.parentNode&&c.removeChild(a6)}}}c.insertBefore(a6,c.firstChild);return F}var a2=false,B=X.xhr();if(B){X.username?B.open(S,X.url,X.async,X.username,X.password):B.open(S,X.url,X.async);try{if(X.data!=null&&!W||Y&&Y.contentType){B.setRequestHeader("Content-Type",X.contentType)}if(X.ifModified){O.lastModified[X.url]&&B.setRequestHeader("If-Modified-Since",O.lastModified[X.url]);O.etag[X.url]&&B.setRequestHeader("If-None-Match",O.etag[X.url])}V||B.setRequestHeader("X-Requested-With","XMLHttpRequest");B.setRequestHeader("Accept",X.dataType&&X.accepts[X.dataType]?X.accepts[X.dataType]+", */*; q=0.01":X.accepts._default)}catch(a3){}if(X.beforeSend&&X.beforeSend.call(X.context,B,X)===false){X.global&&O.active--===1&&O.event.trigger("ajaxStop");B.abort();return false}X.global&&O.triggerGlobal(X,"ajaxSend",[B,X]);var a4=B.onreadystatechange=function(ba){if(!B||B.readyState===0||ba==="abort"){a2||O.handleComplete(X,B,E,Z);a2=true;if(B){B.onreadystatechange=O.noop}}else{if(!a2&&B&&(B.readyState===4||ba==="timeout")){a2=true;B.onreadystatechange=O.noop;E=ba==="timeout"?"timeout":!O.httpSuccess(B)?"error":X.ifModified&&O.httpNotModified(B,X.url)?"notmodified":"success";var a8;if(E==="success"){try{Z=O.httpData(B,X.dataType,X)}catch(a9){E="parsererror";a8=a9}}if(E==="success"||E==="notmodified"){a1||O.handleSuccess(X,B,E,Z)}else{O.handleError(X,B,E,a8)}a1||O.handleComplete(X,B,E,Z);ba==="timeout"&&B.abort();if(X.async){B=null}}}};try{var a0=B.abort;B.abort=function(){B&&Function.prototype.call.call(a0,B);a4("abort")}}catch(T){}X.async&&X.timeout>0&&setTimeout(function(){B&&!a2&&a4("timeout")},X.timeout);try{B.send(W||X.data==null?null:X.data)}catch(U){O.handleError(X,B,null,U);O.handleComplete(X,B,E,Z)}X.async||a4();return B}},param:function(P,E){var c=[],B=function(T,U){U=O.isFunction(U)?U():U;c[c.length]=encodeURIComponent(T)+"="+encodeURIComponent(U)};if(E===F){E=O.ajaxSettings.traditional}if(O.isArray(P)||P.jquery){O.each(P,function(){B(this.name,this.value)})}else{for(var S in P){K(S,P[S],E,B)}}return c.join("&").replace(aR,"+")}});O.extend({active:0,lastModified:{},etag:{},handleError:function(P,E,c,B){P.error&&P.error.call(P.context,E,c,B);P.global&&O.triggerGlobal(P,"ajaxError",[E,P,B])},handleSuccess:function(P,E,c,B){P.success&&P.success.call(P.context,B,c,E);P.global&&O.triggerGlobal(P,"ajaxSuccess",[E,P])},handleComplete:function(E,B,c){E.complete&&E.complete.call(E.context,B,c);E.global&&O.triggerGlobal(E,"ajaxComplete",[B,E]);E.global&&O.active--===1&&O.event.trigger("ajaxStop")},triggerGlobal:function(E,B,c){(E.context&&E.context.url==null?O(E.context):O.event).trigger(B,c)},httpSuccess:function(B){try{return !B.status&&location.protocol==="file:"||B.status>=200&&B.status<300||B.status===304||B.status===1223}catch(c){}return false},httpNotModified:function(P,E){var c=P.getResponseHeader("Last-Modified"),B=P.getResponseHeader("Etag");if(c){O.lastModified[E]=c}if(B){O.etag[E]=B}return P.status===304},httpData:function(P,E,c){var B=P.getResponseHeader("content-type")||"",S=E==="xml"||!E&&B.indexOf("xml")>=0;P=S?P.responseXML:P.responseText;S&&P.documentElement.nodeName==="parsererror"&&O.error("parsererror");if(c&&c.dataFilter){P=c.dataFilter(P,E)}if(typeof P==="string"){if(E==="json"||!E&&B.indexOf("json")>=0){P=O.parseJSON(P)}else{if(E==="script"||!E&&B.indexOf("javascript")>=0){O.globalEval(P)}}}return P}});if(I.ActiveXObject){O.ajaxSettings.xhr=function(){if(I.location.protocol!=="file:"){try{return new I.XMLHttpRequest}catch(B){}}try{return new I.ActiveXObject("Microsoft.XMLHTTP")}catch(c){}}}O.support.ajax=!!O.ajaxSettings.xhr();var L={},j=/^(?:toggle|show|hide)$/,k=/^([+\-]=)?([\d+.\-]+)(.*)$/,H,aD=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]];O.fn.extend({show:function(P,E,c){if(P||P===0){return this.animate(x("show",3),P,E,c)}else{c=0;for(var B=this.length;c<B;c++){P=this[c];E=P.style.display;if(!O.data(P,"olddisplay")&&E==="none"){E=P.style.display=""}E===""&&O.css(P,"display")==="none"&&O.data(P,"olddisplay",aE(P.nodeName))}for(c=0;c<B;c++){P=this[c];E=P.style.display;if(E===""||E==="none"){P.style.display=O.data(P,"olddisplay")||""}}return this}},hide:function(E,B,c){if(E||E===0){return this.animate(x("hide",3),E,B,c)}else{E=0;for(B=this.length;E<B;E++){c=O.css(this[E],"display");c!=="none"&&O.data(this[E],"olddisplay",c)}for(E=0;E<B;E++){this[E].style.display="none"}return this}},_toggle:O.fn.toggle,toggle:function(P,E,c){var B=typeof P==="boolean";if(O.isFunction(P)&&O.isFunction(E)){this._toggle.apply(this,arguments)}else{P==null||B?this.each(function(){var S=B?P:O(this).is(":hidden");O(this)[S?"show":"hide"]()}):this.animate(x("toggle",3),P,E,c)}return this},fadeTo:function(P,E,c,B){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:E},P,c,B)},animate:function(P,E,c,B){var S=O.speed(E,c,B);if(O.isEmptyObject(P)){return this.each(S.complete)}return this[S.queue===false?"each":"queue"](function(){var T=O.extend({},S),W,Y=this.nodeType===1,V=Y&&O(this).is(":hidden"),X=this;for(W in P){var U=O.camelCase(W);if(W!==U){P[U]=P[W];delete P[W];W=U}if(P[W]==="hide"&&V||P[W]==="show"&&!V){return T.complete.call(this)}if(Y&&(W==="height"||W==="width")){T.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(O.css(this,"display")==="inline"&&O.css(this,"float")==="none"){if(O.support.inlineBlockNeedsLayout){if(aE(this.nodeName)==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}else{this.style.display="inline-block"}}}if(O.isArray(P[W])){(T.specialEasing=T.specialEasing||{})[W]=P[W][1];P[W]=P[W][0]}}if(T.overflow!=null){this.style.overflow="hidden"}T.curAnim=O.extend({},P);O.each(P,function(a5,a3){var a4=new O.fx(X,T,a5);if(j.test(a3)){a4[a3==="toggle"?V?"show":"hide":a3](P)}else{var a2=k.exec(a3),a0=a4.cur()||0;if(a2){var a1=parseFloat(a2[2]),Z=a2[3]||"px";if(Z!=="px"){O.style(X,a5,(a1||1)+Z);a0=(a1||1)/a4.cur()*a0;O.style(X,a5,a0+Z)}if(a2[1]){a1=(a2[1]==="-="?-1:1)*a1+a0}a4.custom(a0,a1,Z)}else{a4.custom(a0,a3,"")}}});return true})},stop:function(E,B){var c=O.timers;E&&this.queue([]);this.each(function(){for(var P=c.length-1;P>=0;P--){if(c[P].elem===this){B&&c[P](true);c.splice(P,1)}}});B||this.dequeue();return this}});O.each({slideDown:x("show",1),slideUp:x("hide",1),slideToggle:x("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(B,c){O.fn[B]=function(E,P,S){return this.animate(c,E,P,S)}});O.extend({speed:function(P,E,c){var B=P&&typeof P==="object"?O.extend({},P):{complete:c||!c&&E||O.isFunction(P)&&P,duration:P,easing:c&&E||E&&!O.isFunction(E)&&E};B.duration=O.fx.off?0:typeof B.duration==="number"?B.duration:B.duration in O.fx.speeds?O.fx.speeds[B.duration]:O.fx.speeds._default;B.old=B.complete;B.complete=function(){B.queue!==false&&O(this).dequeue();O.isFunction(B.old)&&B.old.call(this)};return B},easing:{linear:function(P,E,c,B){return c+B*P},swing:function(P,E,c,B){return(-Math.cos(P*Math.PI)/2+0.5)*B+c}},timers:[],fx:function(E,B,c){this.options=B;this.elem=E;this.prop=c;if(!B.orig){B.orig={}}}});O.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this);(O.fx.step[this.prop]||O.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var c=parseFloat(O.css(this.elem,this.prop));return c&&c>-10000?c:0},custom:function(S,P,B){function E(U){return T.step(U)}var T=this,c=O.fx;this.startTime=O.now();this.start=S;this.end=P;this.unit=B||this.unit||"px";this.now=this.start;this.pos=this.state=0;E.elem=this.elem;if(E()&&O.timers.push(E)&&!H){H=setInterval(c.tick,c.interval)}},show:function(){this.options.orig[this.prop]=O.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());O(this.elem).show()},hide:function(){this.options.orig[this.prop]=O.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(T){var S=O.now(),B=true;if(T||S>=this.options.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();this.options.curAnim[this.prop]=true;for(var E in this.options.curAnim){if(this.options.curAnim[E]!==true){B=false}}if(B){if(this.options.overflow!=null&&!O.support.shrinkWrapBlocks){var U=this.elem,c=this.options;O.each(["","X","Y"],function(W,V){U.style["overflow"+V]=c.overflow[W]})}this.options.hide&&O(this.elem).hide();if(this.options.hide||this.options.show){for(var P in this.options.curAnim){O.style(this.elem,P,this.options.orig[P])}}this.options.complete.call(this.elem)}return false}else{T=S-this.startTime;this.state=T/this.options.duration;S=this.options.easing||(O.easing.swing?"swing":"linear");this.pos=O.easing[this.options.specialEasing&&this.options.specialEasing[this.prop]||S](this.state,T,0,1,this.options.duration);this.now=this.start+(this.end-this.start)*this.pos;this.update()}return true}};O.extend(O.fx,{tick:function(){for(var B=O.timers,c=0;c<B.length;c++){B[c]()||B.splice(c--,1)}B.length||O.fx.stop()},interval:13,stop:function(){clearInterval(H);H=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(c){O.style(c.elem,"opacity",c.now)},_default:function(c){if(c.elem.style&&c.elem.style[c.prop]!=null){c.elem.style[c.prop]=(c.prop==="width"||c.prop==="height"?Math.max(0,c.now):c.now)+c.unit}else{c.elem[c.prop]=c.now}}}});if(O.expr&&O.expr.filters){O.expr.filters.animated=function(c){return O.grep(O.timers,function(B){return c===B.elem}).length}}var o=/^t(?:able|d|h)$/i,al=/^(?:body|html)$/i;O.fn.offset="getBoundingClientRect" in M.documentElement?function(S){var P=this[0],B;if(S){return this.each(function(U){O.offset.setOffset(this,S,U)})}if(!P||!P.ownerDocument){return null}if(P===P.ownerDocument.body){return O.offset.bodyOffset(P)}try{B=P.getBoundingClientRect()}catch(E){}var T=P.ownerDocument,c=T.documentElement;if(!B||!O.contains(c,P)){return B||{top:0,left:0}}P=T.body;T=aV(T);return{top:B.top+(T.pageYOffset||O.support.boxModel&&c.scrollTop||P.scrollTop)-(c.clientTop||P.clientTop||0),left:B.left+(T.pageXOffset||O.support.boxModel&&c.scrollLeft||P.scrollLeft)-(c.clientLeft||P.clientLeft||0)}}:function(U){var T=this[0];if(U){return this.each(function(X){O.offset.setOffset(this,U,X)})}if(!T||!T.ownerDocument){return null}if(T===T.ownerDocument.body){return O.offset.bodyOffset(T)}O.offset.initialize();var W,c=T.offsetParent,V=T.ownerDocument,E=V.documentElement,S=V.body;W=(V=V.defaultView)?V.getComputedStyle(T,null):T.currentStyle;for(var B=T.offsetTop,P=T.offsetLeft;(T=T.parentNode)&&T!==S&&T!==E;){if(O.offset.supportsFixedPosition&&W.position==="fixed"){break}W=V?V.getComputedStyle(T,null):T.currentStyle;B-=T.scrollTop;P-=T.scrollLeft;if(T===c){B+=T.offsetTop;P+=T.offsetLeft;if(O.offset.doesNotAddBorder&&!(O.offset.doesAddBorderForTableAndCells&&o.test(T.nodeName))){B+=parseFloat(W.borderTopWidth)||0;P+=parseFloat(W.borderLeftWidth)||0}c=T.offsetParent}if(O.offset.subtractsBorderForOverflowNotVisible&&W.overflow!=="visible"){B+=parseFloat(W.borderTopWidth)||0;P+=parseFloat(W.borderLeftWidth)||0}W=W}if(W.position==="relative"||W.position==="static"){B+=S.offsetTop;P+=S.offsetLeft}if(O.offset.supportsFixedPosition&&W.position==="fixed"){B+=Math.max(E.scrollTop,S.scrollTop);P+=Math.max(E.scrollLeft,S.scrollLeft)}return{top:B,left:P}};O.offset={initialize:function(){var S=M.body,P=M.createElement("div"),B,E,T,c=parseFloat(O.css(S,"marginTop"))||0;O.extend(P.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});P.innerHTML="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";S.insertBefore(P,S.firstChild);B=P.firstChild;E=B.firstChild;T=B.nextSibling.firstChild.firstChild;this.doesNotAddBorder=E.offsetTop!==5;this.doesAddBorderForTableAndCells=T.offsetTop===5;E.style.position="fixed";E.style.top="20px";this.supportsFixedPosition=E.offsetTop===20||E.offsetTop===15;E.style.position=E.style.top="";B.style.overflow="hidden";B.style.position="relative";this.subtractsBorderForOverflowNotVisible=E.offsetTop===-5;this.doesNotIncludeMarginInBodyOffset=S.offsetTop!==c;S.removeChild(P);O.offset.initialize=O.noop},bodyOffset:function(E){var B=E.offsetTop,c=E.offsetLeft;O.offset.initialize();if(O.offset.doesNotIncludeMarginInBodyOffset){B+=parseFloat(O.css(E,"marginTop"))||0;c+=parseFloat(O.css(E,"marginLeft"))||0}return{top:B,left:c}},setOffset:function(V,T,X){var c=O.css(V,"position");if(c==="static"){V.style.position="relative"}var W=O(V),E=W.offset(),S=O.css(V,"top"),B=O.css(V,"left"),P=c==="absolute"&&O.inArray("auto",[S,B])>-1;c={};var U={};if(P){U=W.position()}S=P?U.top:parseInt(S,10)||0;B=P?U.left:parseInt(B,10)||0;if(O.isFunction(T)){T=T.call(V,X,E)}if(T.top!=null){c.top=T.top-E.top+S}if(T.left!=null){c.left=T.left-E.left+B}"using" in T?T.using.call(V,c):W.css(c)}};O.fn.extend({position:function(){if(!this[0]){return null}var P=this[0],E=this.offsetParent(),c=this.offset(),B=al.test(E[0].nodeName)?{top:0,left:0}:E.offset();c.top-=parseFloat(O.css(P,"marginTop"))||0;c.left-=parseFloat(O.css(P,"marginLeft"))||0;B.top+=parseFloat(O.css(E[0],"borderTopWidth"))||0;B.left+=parseFloat(O.css(E[0],"borderLeftWidth"))||0;return{top:c.top-B.top,left:c.left-B.left}},offsetParent:function(){return this.map(function(){for(var c=this.offsetParent||M.body;c&&!al.test(c.nodeName)&&O.css(c,"position")==="static";){c=c.offsetParent}return c})}});O.each(["Left","Top"],function(E,B){var c="scroll"+B;O.fn[c]=function(S){var T=this[0],P;if(!T){return null}if(S!==F){return this.each(function(){if(P=aV(this)){P.scrollTo(!E?S:O(P).scrollLeft(),E?S:O(P).scrollTop())}else{this[c]=S}})}else{return(P=aV(T))?"pageXOffset" in P?P[E?"pageYOffset":"pageXOffset"]:O.support.boxModel&&P.document.documentElement[c]||P.document.body[c]:T[c]}}});O.each(["Height","Width"],function(E,B){var c=B.toLowerCase();O.fn["inner"+B]=function(){return this[0]?parseFloat(O.css(this[0],c,"padding")):null};O.fn["outer"+B]=function(P){return this[0]?parseFloat(O.css(this[0],c,P?"margin":"border")):null};O.fn[c]=function(S){var T=this[0];if(!T){return S==null?null:this}if(O.isFunction(S)){return this.each(function(U){var V=O(this);V[c](S.call(this,U,V[c]()))})}if(O.isWindow(T)){return T.document.compatMode==="CSS1Compat"&&T.document.documentElement["client"+B]||T.document.body["client"+B]}else{if(T.nodeType===9){return Math.max(T.documentElement["client"+B],T.body["scroll"+B],T.documentElement["scroll"+B],T.body["offset"+B],T.documentElement["offset"+B])}else{if(S===F){T=O.css(T,c);var P=parseFloat(T);return O.isNaN(P)?T:P}else{return this.css(c,typeof S==="string"?S:S+"px")}}}}})})(window);
/*
 * jQuery UI 1.8.4
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI
 */
(function(a,b){function d(c){return !a(c).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{};if(!a.ui.version){a.extend(a.ui,{version:"1.8.4",plugin:{add:function(h,g,c){h=a.ui[h].prototype;for(var f in c){h.plugins[f]=h.plugins[f]||[];h.plugins[f].push([g,c[f]])}},call:function(h,g,c){if((g=h.plugins[g])&&h.element[0].parentNode){for(var f=0;f<g.length;f++){h.options[g[f][0]]&&g[f][1].apply(h.element,c)}}}},contains:function(e,c){return document.compareDocumentPosition?e.compareDocumentPosition(c)&16:e!==c&&e.contains(c)},hasScroll:function(f,e){if(a(f).css("overflow")==="hidden"){return false}e=e&&e==="left"?"scrollLeft":"scrollTop";var c=false;if(f[e]>0){return true}f[e]=1;c=f[e]>0;f[e]=0;return c},isOverAxis:function(f,e,c){return f>e&&f<e+c},isOver:function(l,k,f,g,c,j){return a.ui.isOverAxis(l,f,c)&&a.ui.isOverAxis(k,g,j)},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});a.fn.extend({_focus:a.fn.focus,focus:function(e,c){return typeof e==="number"?this.each(function(){var f=this;setTimeout(function(){a(f).focus();c&&c.call(f)},e)}):this._focus.apply(this,arguments)},enableSelection:function(){return this.attr("unselectable","off").css("MozUserSelect","")},disableSelection:function(){return this.attr("unselectable","on").css("MozUserSelect","none")},scrollParent:function(){var c;c=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!c.length?a(document):c},zIndex:function(e){if(e!==b){return this.css("zIndex",e)}if(this.length){e=a(this[0]);for(var c;e.length&&e[0]!==document;){c=e.css("position");if(c==="absolute"||c==="relative"||c==="fixed"){c=parseInt(e.css("zIndex"));if(!isNaN(c)&&c!=0){return c}}e=e.parent()}}return 0}});a.each(["Width","Height"],function(l,k){function f(n,e,h,i){a.each(g,function(){e-=parseFloat(a.curCSS(n,"padding"+this,true))||0;if(h){e-=parseFloat(a.curCSS(n,"border"+this+"Width",true))||0}if(i){e-=parseFloat(a.curCSS(n,"margin"+this,true))||0}});return e}var g=k==="Width"?["Left","Right"]:["Top","Bottom"],c=k.toLowerCase(),j={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+k]=function(e){if(e===b){return j["inner"+k].call(this)}return this.each(function(){a.style(this,c,f(this,e)+"px")})};a.fn["outer"+k]=function(h,e){if(typeof h!=="number"){return j["outer"+k].call(this,h)}return this.each(function(){a.style(this,c,f(this,h,true,e)+"px")})}});a.extend(a.expr[":"],{data:function(f,e,c){return !!a.data(f,c[3])},focusable:function(f){var e=f.nodeName.toLowerCase(),c=a.attr(f,"tabindex");if("area"===e){e=f.parentNode;c=e.name;if(!f.href||!c||e.nodeName.toLowerCase()!=="map"){return false}f=a("img[usemap=#"+c+"]")[0];return !!f&&d(f)}return(/input|select|textarea|button|object/.test(e)?!f.disabled:"a"==e?f.href||!isNaN(c):!isNaN(c))&&d(f)},tabbable:function(e){var c=a.attr(e,"tabindex");return(isNaN(c)||c>=0)&&a(e).is(":focusable")}})}})(jQuery);
/*
 * jQuery UI Widget 1.8.4
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Widget
 */
(function(a,c){var d=a.fn.remove;a.fn.remove=function(e,b){return this.each(function(){if(!b){if(!e||a.filter(e,[this]).length){a("*",this).add([this]).each(function(){a(this).triggerHandler("remove")})}}return d.call(a(this),e,b)})};a.widget=function(i,h,b){var g=i.split(".")[0],j;i=i.split(".")[1];j=g+"-"+i;if(!b){b=h;h=a.Widget}a.expr[":"][j]=function(e){return !!a.data(e,i)};a[g]=a[g]||{};a[g][i]=function(e,f){arguments.length&&this._createWidget(e,f)};h=new h;h.options=a.extend(true,{},h.options);a[g][i].prototype=a.extend(true,h,{namespace:g,widgetName:i,widgetEventPrefix:a[g][i].prototype.widgetEventPrefix||i,widgetBaseClass:j},b);a.widget.bridge(i,a[g][i])};a.widget.bridge=function(e,b){a.fn[e]=function(i){var j=typeof i==="string",k=Array.prototype.slice.call(arguments,1),g=this;i=!j&&k.length?a.extend.apply(null,[true,i].concat(k)):i;if(j&&i.substring(0,1)==="_"){return g}j?this.each(function(){var f=a.data(this,e),h=f&&a.isFunction(f[i])?f[i].apply(f,k):f;if(h!==f&&h!==c){g=h;return false}}):this.each(function(){var f=a.data(this,e);if(f){i&&f.option(i);f._init()}else{a.data(this,e,new b(i,this))}});return g}};a.Widget=function(e,b){arguments.length&&this._createWidget(e,b)};a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(f,e){a.data(e,this.widgetName,this);this.element=a(e);this.options=a.extend(true,{},this.options,a.metadata&&a.metadata.get(e)[this.widgetName],f);var b=this;this.element.bind("remove."+this.widgetName,function(){b.destroy()});this._create();this._init()},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")},widget:function(){return this.element},option:function(h,g){var b=h,f=this;if(arguments.length===0){return a.extend({},f.options)}if(typeof h==="string"){if(g===c){return this.options[h]}b={};b[h]=g}a.each(b,function(i,e){f._setOption(i,e)});return f},_setOption:function(e,b){this.options[e]=b;if(e==="disabled"){this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(i,h,b){var g=this.options[i];h=a.Event(h);h.type=(i===this.widgetEventPrefix?i:this.widgetEventPrefix+i).toLowerCase();b=b||{};if(h.originalEvent){i=a.event.props.length;for(var j;i;){j=a.event.props[--i];h[j]=h.originalEvent[j]}}this.element.trigger(h,b);return !(a.isFunction(g)&&g.call(this.element[0],h,b)===false||h.isDefaultPrevented())}}})(jQuery);
/*
 * jQuery UI Mouse 1.8.4
 *
 * Copyright 2010, AUTHORS.txt (http://jqueryui.com/about)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * http://docs.jquery.com/UI/Mouse
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(a){a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(c){return b._mouseDown(c)}).bind("click."+this.widgetName,function(c){if(b._preventClickEvent){b._preventClickEvent=false;c.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(g){g.originalEvent=g.originalEvent||{};if(!g.originalEvent.mouseHandled){this._mouseStarted&&this._mouseUp(g);this._mouseDownEvent=g;var d=this,c=g.which==1,h=typeof this.options.cancel=="string"?a(g.target).parents().add(g.target).filter(this.options.cancel).length:false;if(!c||h||!this._mouseCapture(g)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(g)&&this._mouseDelayMet(g)){this._mouseStarted=this._mouseStart(g)!==false;if(!this._mouseStarted){g.preventDefault();return true}}this._mouseMoveDelegate=function(b){return d._mouseMove(b)};this._mouseUpDelegate=function(b){return d._mouseUp(b)};a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);a.browser.safari||g.preventDefault();return g.originalEvent.mouseHandled=true}},_mouseMove:function(b){if(a.browser.msie&&!b.button){return this._mouseUp(b)}if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==false)?this._mouseDrag(b):this._mouseUp(b)}return !this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;this._preventClickEvent=b.target==this._mouseDownEvent.target;this._mouseStop(b)}return false},_mouseDistanceMet:function(b){return Math.max(Math.abs(this._mouseDownEvent.pageX-b.pageX),Math.abs(this._mouseDownEvent.pageY-b.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);(function(f){f.ui=f.ui||{};var e=/left|center|right/,a=/top|center|bottom/,b=f.fn.position,d=f.fn.offset;f.fn.position=function(o){if(!o||!o.of){return b.apply(this,arguments)}o=f.extend({},o);var n=f(o.of),j=(o.collision||"flip").split(" "),k=o.offset?o.offset.split(" "):[0,0],c,l,m;if(o.of.nodeType===9){c=n.width();l=n.height();m={top:0,left:0}}else{if(o.of.scrollTo&&o.of.document){c=n.width();l=n.height();m={top:n.scrollTop(),left:n.scrollLeft()}}else{if(o.of.preventDefault){o.at="left top";c=l=0;m={top:o.of.pageY,left:o.of.pageX}}else{c=n.outerWidth();l=n.outerHeight();m=n.offset()}}}f.each(["my","at"],function(){var g=(o[this]||"").split(" ");if(g.length===1){g=e.test(g[0])?g.concat(["center"]):a.test(g[0])?["center"].concat(g):["center","center"]}g[0]=e.test(g[0])?g[0]:"center";g[1]=a.test(g[1])?g[1]:"center";o[this]=g});if(j.length===1){j[1]=j[0]}k[0]=parseInt(k[0],10)||0;if(k.length===1){k[1]=k[0]}k[1]=parseInt(k[1],10)||0;if(o.at[0]==="right"){m.left+=c}else{if(o.at[0]==="center"){m.left+=c/2}}if(o.at[1]==="bottom"){m.top+=l}else{if(o.at[1]==="center"){m.top+=l/2}}m.left+=k[0];m.top+=k[1];return this.each(function(){var p=f(this),g=p.outerWidth(),h=p.outerHeight(),i=f.extend({},m);if(o.my[0]==="right"){i.left-=g}else{if(o.my[0]==="center"){i.left-=g/2}}if(o.my[1]==="bottom"){i.top-=h}else{if(o.my[1]==="center"){i.top-=h/2}}i.left=parseInt(i.left);i.top=parseInt(i.top);f.each(["left","top"],function(s,q){f.ui.position[j[s]]&&f.ui.position[j[s]][q](i,{targetWidth:c,targetHeight:l,elemWidth:g,elemHeight:h,offset:k,my:o.my,at:o.at})});f.fn.bgiframe&&p.bgiframe();p.offset(f.extend(i,{using:o.using}))})};f.ui.position={fit:{left:function(h,g){var c=f(window);g=h.left+g.elemWidth-c.width()-c.scrollLeft();h.left=g>0?h.left-g:Math.max(0,h.left)},top:function(h,g){var c=f(window);g=h.top+g.elemHeight-c.height()-c.scrollTop();h.top=g>0?h.top-g:Math.max(0,h.top)}},flip:{left:function(k,j){if(j.at[0]!=="center"){var h=f(window);h=k.left+j.elemWidth-h.width()-h.scrollLeft();var i=j.my[0]==="left"?-j.elemWidth:j.my[0]==="right"?j.elemWidth:0,c=-2*j.offset[0];k.left+=k.left<0?i+j.targetWidth+c:h>0?i-j.targetWidth+c:0}},top:function(m,l){if(l.at[1]!=="center"){var i=f(window);i=m.top+l.elemHeight-i.height()-i.scrollTop();var j=l.my[1]==="top"?-l.elemHeight:l.my[1]==="bottom"?l.elemHeight:0,c=l.at[1]==="top"?l.targetHeight:-l.targetHeight,k=-2*l.offset[1];m.top+=m.top<0?j+l.targetHeight+k:i>0?j+c+k:0}}}};if(!f.offset.setOffset){f.offset.setOffset=function(m,l){if(/static/.test(f.curCSS(m,"position"))){m.style.position="relative"}var i=f(m),j=i.offset(),c=parseInt(f.curCSS(m,"top",true),10)||0,k=parseInt(f.curCSS(m,"left",true),10)||0;j={top:l.top-j.top+c,left:l.left-j.left+k};"using" in l?l.using.call(m,j):i.css(j)};f.fn.offset=function(g){var c=this[0];if(!c||!c.ownerDocument){return null}if(g){return this.each(function(){f.offset.setOffset(this,g)})}return d.call(this)}}})(jQuery);(function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false},_create:function(){if(this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))){this.element[0].style.position="relative"}this.options.addClasses&&this.element.addClass("ui-draggable");this.options.disabled&&this.element.addClass("ui-draggable-disabled");this._mouseInit()},destroy:function(){if(this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy();return this}},_mouseCapture:function(d){var c=this.options;if(this.helper||c.disabled||a(d.target).is(".ui-resizable-handle")){return false}this.handle=this._getHandle(d);if(!this.handle){return false}return true},_mouseStart:function(d){var c=this.options;this.helper=this._createHelper(d);this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt);c.containment&&this._setContainment();if(this._trigger("start",d)===false){this._clear();return false}this._cacheHelperProportions();a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,d);this.helper.addClass("ui-draggable-dragging");this._mouseDrag(d,true);return true},_mouseDrag:function(d,c){this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");if(!c){c=this._uiHash();if(this._trigger("drag",d,c)===false){this._mouseUp({});return false}this.position=c.position}if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}a.ui.ddmanager&&a.ui.ddmanager.drag(this,d);return false},_mouseStop:function(f){var d=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){d=a.ui.ddmanager.drop(this,f)}if(this.dropped){d=this.dropped;this.dropped=false}if(!this.element[0]||!this.element[0].parentNode){return false}if(this.options.revert=="invalid"&&!d||this.options.revert=="valid"&&d||this.options.revert===true||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)){var e=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){e._trigger("stop",f)!==false&&e._clear()})}else{this._trigger("stop",f)!==false&&this._clear()}return false},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(d){var c=!this.options.handle||!a(this.options.handle,this.element).length?true:false;a(this.options.handle,this.element).find("*").andSelf().each(function(){if(this==d.target){c=true}});return c},_createHelper:function(d){var c=this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d])):c.helper=="clone"?this.element.clone():this.element;d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo);d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute");return d},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left" in b){this.offset.click.left=b.left+this.margins.left}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top" in b){this.offset.click.top=b.top+this.margins.top}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.element.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f=this.options;if(f.containment=="parent"){f.containment=this.helper[0].parentNode}if(f.containment=="document"||f.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(f.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(f.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(f.containment)&&f.containment.constructor!=Array){var d=a(f.containment)[0];if(d){f=a(f.containment).offset();var e=a(d).css("overflow")!="hidden";this.containment=[f.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,f.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,f.left+(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,f.top+(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}}else{if(f.containment.constructor==Array){this.containment=f.containment}}},_convertPositionTo:function(g,d){if(!d){d=this.position}g=g=="absolute"?1:-1;var e=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(e[0].tagName);return{top:d.top+this.offset.relative.top*g+this.offset.parent.top*g-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:e.scrollTop())*g),left:d.left+this.offset.relative.left*g+this.offset.parent.left*g-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:e.scrollLeft())*g)}},_generatePosition:function(k){var i=this.options,j=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,l=/(html|body)/i.test(j[0].tagName),h=k.pageX,d=k.pageY;if(this.originalPosition){if(this.containment){if(k.pageX-this.offset.click.left<this.containment[0]){h=this.containment[0]+this.offset.click.left}if(k.pageY-this.offset.click.top<this.containment[1]){d=this.containment[1]+this.offset.click.top}if(k.pageX-this.offset.click.left>this.containment[2]){h=this.containment[2]+this.offset.click.left}if(k.pageY-this.offset.click.top>this.containment[3]){d=this.containment[3]+this.offset.click.top}}if(i.grid){d=this.originalPageY+Math.round((d-this.originalPageY)/i.grid[1])*i.grid[1];d=this.containment?!(d-this.offset.click.top<this.containment[1]||d-this.offset.click.top>this.containment[3])?d:!(d-this.offset.click.top<this.containment[1])?d-i.grid[1]:d+i.grid[1]:d;h=this.originalPageX+Math.round((h-this.originalPageX)/i.grid[0])*i.grid[0];h=this.containment?!(h-this.offset.click.left<this.containment[0]||h-this.offset.click.left>this.containment[2])?h:!(h-this.offset.click.left<this.containment[0])?h-i.grid[0]:h+i.grid[0]:h}}return{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():l?0:j.scrollTop()),left:h-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():l?0:j.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove();this.helper=null;this.cancelHelperRemoval=false},_trigger:function(f,d,e){e=e||this._uiHash();a.ui.plugin.call(this,f,[d,e]);if(f=="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.Widget.prototype._trigger.call(this,f,d,e)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.extend(a.ui.draggable,{version:"1.8.4"});a.ui.plugin.add("draggable","connectToSortable",{start:function(i,g){var h=a(this).data("draggable"),j=h.options,d=a.extend({},g,{item:h.element});h.sortables=[];a(j.connectToSortable).each(function(){var b=a.data(this,"sortable");if(b&&!b.options.disabled){h.sortables.push({instance:b,shouldRevert:b.options.revert});b._refreshItems();b._trigger("activate",i,d)}})},stop:function(g,d){var e=a(this).data("draggable"),h=a.extend({},d,{item:e.element});a.each(e.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;e.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=true}this.instance._mouseStop(g);this.instance.options.helper=this.instance.options._helper;e.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",g,h)}})},drag:function(g,d){var e=a(this).data("draggable"),h=this;a.each(e.sortables,function(){this.instance.positionAbs=e.positionAbs;this.instance.helperProportions=e.helperProportions;this.instance.offset.click=e.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(h).clone().appendTo(this.instance.element).data("sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return d.helper[0]};g.target=this.instance.currentItem[0];this.instance._mouseCapture(g,true);this.instance._mouseStart(g,true,true);this.instance.offset.click.top=e.offset.click.top;this.instance.offset.click.left=e.offset.click.left;this.instance.offset.parent.left-=e.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=e.offset.parent.top-this.instance.offset.parent.top;e._trigger("toSortable",g);e.dropped=this.instance.element;e.currentItem=e.element;this.instance.fromOutside=e}this.instance.currentItem&&this.instance._mouseDrag(g)}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",g,this.instance._uiHash(this.instance));this.instance._mouseStop(g,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();this.instance.placeholder&&this.instance.placeholder.remove();e._trigger("fromSortable",g);e.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var d=a("body"),c=a(this).data("draggable").options;if(d.css("cursor")){c._cursor=d.css("cursor")}d.css("cursor",c.cursor)},stop:function(){var b=a(this).data("draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}});a.ui.plugin.add("draggable","iframeFix",{start:function(){var b=a(this).data("draggable").options;a(b.iframeFix===true?"iframe":b.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")})},stop:function(){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)})}});a.ui.plugin.add("draggable","opacity",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("opacity")){c._opacity=d.css("opacity")}d.css("opacity",c.opacity)},stop:function(d,c){d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}});a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("draggable");if(b.scrollParent[0]!=document&&b.scrollParent[0].tagName!="HTML"){b.overflowOffset=b.scrollParent.offset()}},drag:function(g){var d=a(this).data("draggable"),e=d.options,h=false;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x"){if(d.overflowOffset.top+d.scrollParent[0].offsetHeight-g.pageY<e.scrollSensitivity){d.scrollParent[0].scrollTop=h=d.scrollParent[0].scrollTop+e.scrollSpeed}else{if(g.pageY-d.overflowOffset.top<e.scrollSensitivity){d.scrollParent[0].scrollTop=h=d.scrollParent[0].scrollTop-e.scrollSpeed}}}if(!e.axis||e.axis!="y"){if(d.overflowOffset.left+d.scrollParent[0].offsetWidth-g.pageX<e.scrollSensitivity){d.scrollParent[0].scrollLeft=h=d.scrollParent[0].scrollLeft+e.scrollSpeed}else{if(g.pageX-d.overflowOffset.left<e.scrollSensitivity){d.scrollParent[0].scrollLeft=h=d.scrollParent[0].scrollLeft-e.scrollSpeed}}}}else{if(!e.axis||e.axis!="x"){if(g.pageY-a(document).scrollTop()<e.scrollSensitivity){h=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed)}else{if(a(window).height()-(g.pageY-a(document).scrollTop())<e.scrollSensitivity){h=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed)}}}if(!e.axis||e.axis!="y"){if(g.pageX-a(document).scrollLeft()<e.scrollSensitivity){h=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed)}else{if(a(window).width()-(g.pageX-a(document).scrollLeft())<e.scrollSensitivity){h=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed)}}}}h!==false&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,g)}});a.ui.plugin.add("draggable","snap",{start:function(){var d=a(this).data("draggable"),c=d.options;d.snapElements=[];a(c.snap.constructor!=String?c.snap.items||":data(draggable)":c.snap).each(function(){var b=a(this),e=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:e.top,left:e.left})})},drag:function(I,G){for(var H=a(this).data("draggable"),J=H.options,L=J.snapTolerance,K=G.offset.left,C=K+H.helperProportions.width,F=G.offset.top,D=F+H.helperProportions.height,A=H.snapElements.length-1;A>=0;A--){var B=H.snapElements[A].left,z=B+H.snapElements[A].width,y=H.snapElements[A].top,E=y+H.snapElements[A].height;if(B-L<K&&K<z+L&&y-L<F&&F<E+L||B-L<K&&K<z+L&&y-L<D&&D<E+L||B-L<C&&C<z+L&&y-L<F&&F<E+L||B-L<C&&C<z+L&&y-L<D&&D<E+L){if(J.snapMode!="inner"){var v=Math.abs(y-D)<=L,w=Math.abs(E-F)<=L,d=Math.abs(B-C)<=L,u=Math.abs(z-K)<=L;if(v){G.position.top=H._convertPositionTo("relative",{top:y-H.helperProportions.height,left:0}).top-H.margins.top}if(w){G.position.top=H._convertPositionTo("relative",{top:E,left:0}).top-H.margins.top}if(d){G.position.left=H._convertPositionTo("relative",{top:0,left:B-H.helperProportions.width}).left-H.margins.left}if(u){G.position.left=H._convertPositionTo("relative",{top:0,left:z}).left-H.margins.left}}var x=v||w||d||u;if(J.snapMode!="outer"){v=Math.abs(y-F)<=L;w=Math.abs(E-D)<=L;d=Math.abs(B-K)<=L;u=Math.abs(z-C)<=L;if(v){G.position.top=H._convertPositionTo("relative",{top:y,left:0}).top-H.margins.top}if(w){G.position.top=H._convertPositionTo("relative",{top:E-H.helperProportions.height,left:0}).top-H.margins.top}if(d){G.position.left=H._convertPositionTo("relative",{top:0,left:B}).left-H.margins.left}if(u){G.position.left=H._convertPositionTo("relative",{top:0,left:z-H.helperProportions.width}).left-H.margins.left}}if(!H.snapElements[A].snapping&&(v||w||d||u||x)){H.options.snap.snap&&H.options.snap.snap.call(H.element,I,a.extend(H._uiHash(),{snapItem:H.snapElements[A].item}))}H.snapElements[A].snapping=v||w||d||u||x}else{H.snapElements[A].snapping&&H.options.snap.release&&H.options.snap.release.call(H.element,I,a.extend(H._uiHash(),{snapItem:H.snapElements[A].item}));H.snapElements[A].snapping=false}}}});a.ui.plugin.add("draggable","stack",{start:function(){var d=a(this).data("draggable").options;d=a.makeArray(a(d.stack)).sort(function(b,e){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(e).css("zIndex"),10)||0)});if(d.length){var c=parseInt(d[0].style.zIndex)||0;a(d).each(function(b){this.style.zIndex=c+b});this[0].style.zIndex=c+d.length}}});a.ui.plugin.add("draggable","zIndex",{start:function(d,c){d=a(c.helper);c=a(this).data("draggable").options;if(d.css("zIndex")){c._zIndex=d.css("zIndex")}d.css("zIndex",c.zIndex)},stop:function(d,c){d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jQuery);(function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:false,addClasses:true,greedy:false,hoverClass:false,scope:"default",tolerance:"intersect"},_create:function(){var d=this.options,c=d.accept;this.isover=0;this.isout=1;this.accept=a.isFunction(c)?c:function(b){return b.is(c)};this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};a.ui.ddmanager.droppables[d.scope]=a.ui.ddmanager.droppables[d.scope]||[];a.ui.ddmanager.droppables[d.scope].push(this);d.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var d=a.ui.ddmanager.droppables[this.options.scope],c=0;c<d.length;c++){d[c]==this&&d.splice(c,1)}this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable");return this},_setOption:function(d,c){if(d=="accept"){this.accept=a.isFunction(c)?c:function(b){return b.is(c)}}a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass);c&&this._trigger("activate",d,this.ui(c))},_deactivate:function(d){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass);c&&this._trigger("deactivate",d,this.ui(c))},_over:function(d){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0])){if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.addClass(this.options.hoverClass);this._trigger("over",d,this.ui(c))}}},_out:function(d){var c=a.ui.ddmanager.current;if(!(!c||(c.currentItem||c.element)[0]==this.element[0])){if(this.accept.call(this.element[0],c.currentItem||c.element)){this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("out",d,this.ui(c))}}},_drop:function(h,f){var g=f||a.ui.ddmanager.current;if(!g||(g.currentItem||g.element)[0]==this.element[0]){return false}var d=false;this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");if(b.options.greedy&&!b.options.disabled&&b.options.scope==g.options.scope&&b.accept.call(b.element[0],g.currentItem||g.element)&&a.ui.intersect(g,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)){d=true;return false}});if(d){return false}if(this.accept.call(this.element[0],g.currentItem||g.element)){this.options.activeClass&&this.element.removeClass(this.options.activeClass);this.options.hoverClass&&this.element.removeClass(this.options.hoverClass);this._trigger("drop",h,this.ui(g));return this.element}return false},ui:function(b){return{draggable:b.currentItem||b.element,helper:b.helper,position:b.position,offset:b.positionAbs}}});a.extend(a.ui.droppable,{version:"1.8.4"});a.ui.intersect=function(u,r,s){if(!r.offset){return false}var d=(u.positionAbs||u.position.absolute).left,w=d+u.helperProportions.width,v=(u.positionAbs||u.position.absolute).top,o=v+u.helperProportions.height,p=r.offset.left,n=p+r.proportions.width,m=r.offset.top,q=m+r.proportions.height;switch(s){case"fit":return p<=d&&w<=n&&m<=v&&o<=q;case"intersect":return p<d+u.helperProportions.width/2&&w-u.helperProportions.width/2<n&&m<v+u.helperProportions.height/2&&o-u.helperProportions.height/2<q;case"pointer":return a.ui.isOver((u.positionAbs||u.position.absolute).top+(u.clickOffset||u.offset.click).top,(u.positionAbs||u.position.absolute).left+(u.clickOffset||u.offset.click).left,m,p,r.proportions.height,r.proportions.width);case"touch":return(v>=m&&v<=q||o>=m&&o<=q||v<m&&o>q)&&(d>=p&&d<=n||w>=p&&w<=n||d<p&&w>n);default:return false}};a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(m,k){var l=a.ui.ddmanager.droppables[m.options.scope]||[],j=k?k.type:null,d=(m.currentItem||m.element).find(":data(droppable)").andSelf(),n=0;m:for(;n<l.length;n++){if(!(l[n].options.disabled||m&&!l[n].accept.call(l[n].element[0],m.currentItem||m.element))){for(var i=0;i<d.length;i++){if(d[i]==l[n].element[0]){l[n].proportions.height=0;continue m}}l[n].visible=l[n].element.css("display")!="none";if(l[n].visible){l[n].offset=l[n].element.offset();l[n].proportions={width:l[n].element[0].offsetWidth,height:l[n].element[0].offsetHeight};j=="mousedown"&&l[n]._activate.call(l[n],k)}}}},drop:function(f,d){var e=false;a.each(a.ui.ddmanager.droppables[f.options.scope]||[],function(){if(this.options){if(!this.options.disabled&&this.visible&&a.ui.intersect(f,this,this.options.tolerance)){e=e||this._drop.call(this,d)}if(!this.options.disabled&&this.visible&&this.accept.call(this.element[0],f.currentItem||f.element)){this.isout=1;this.isover=0;this._deactivate.call(this,d)}}});return e},drag:function(d,c){d.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(d,c);a.each(a.ui.ddmanager.droppables[d.options.scope]||[],function(){if(!(this.options.disabled||this.greedyChild||!this.visible)){var h=a.ui.intersect(d,this,this.options.tolerance);if(h=!h&&this.isover==1?"isout":h&&this.isover==0?"isover":null){var f;if(this.options.greedy){var b=this.element.parents(":data(droppable):eq(0)");if(b.length){f=a.data(b[0],"droppable");f.greedyChild=h=="isover"?1:0}}if(f&&h=="isover"){f.isover=0;f.isout=1;f._out.call(f,c)}this[h]=1;this[h=="isout"?"isover":"isout"]=0;this[h=="isover"?"_over":"_out"].call(this,c);if(f&&h=="isout"){f.isout=0;f.isover=1;f._over.call(f,c)}}}})}}})(jQuery);(function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:false,animate:false,animateDuration:"slow",animateEasing:"swing",aspectRatio:false,autoHide:false,containment:false,ghost:false,grid:false,handles:"e,s,se",helper:false,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1000},_create:function(){var i=this,k=this.options;this.element.addClass("ui-resizable");a.extend(this,{_aspectRatio:!!k.aspectRatio,aspectRatio:k.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:k.helper||k.ghost||k.animate?k.helper||"ui-resizable-helper":null});if(this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)){/relative/.test(this.element.css("position"))&&a.browser.opera&&this.element.css({position:"relative",top:"auto",left:"auto"});this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")}));this.element=this.element.parent().data("resizable",this.element.data("resizable"));this.elementIsWrapper=true;this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")});this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0});this.originalResizeStyle=this.originalElement.css("resize");this.originalElement.css("resize","none");this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"}));this.originalElement.css({margin:this.originalElement.css("margin")});this._proportionallyResize()}this.handles=k.handles||(!a(".ui-resizable-handle",this.element).length?"e,s,se":{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"});if(this.handles.constructor==String){if(this.handles=="all"){this.handles="n,e,s,w,se,sw,ne,nw"}var j=this.handles.split(",");this.handles={};for(var h=0;h<j.length;h++){var l=a.trim(j[h]),e=a('<div class="ui-resizable-handle '+("ui-resizable-"+l)+'"></div>');/sw|se|ne|nw/.test(l)&&e.css({zIndex:++k.zIndex});"se"==l&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se");this.handles[l]=".ui-resizable-"+l;this.element.append(e)}}this._renderAxis=function(d){d=d||this.element;for(var f in this.handles){if(this.handles[f].constructor==String){this.handles[f]=a(this.handles[f],this.element).show()}if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var g=a(this.handles[f],this.element),m=0;m=/sw|ne|nw|se|n|s/.test(f)?g.outerHeight():g.outerWidth();g=["padding",/ne|nw|n/.test(f)?"Top":/se|sw|s/.test(f)?"Bottom":/^e$/.test(f)?"Right":"Left"].join("");d.css(g,m);this._proportionallyResize()}a(this.handles[f])}};this._renderAxis(this.element);this._handles=a(".ui-resizable-handle",this.element).disableSelection();this._handles.mouseover(function(){if(!i.resizing){if(this.className){var d=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)}i.axis=d&&d[1]?d[1]:"se"}});if(k.autoHide){this._handles.hide();a(this.element).addClass("ui-resizable-autohide").hover(function(){a(this).removeClass("ui-resizable-autohide");i._handles.show()},function(){if(!i.resizing){a(this).addClass("ui-resizable-autohide");i._handles.hide()}})}this._mouseInit()},destroy:function(){this._mouseDestroy();var d=function(f){a(f).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){d(this.element);var e=this.element;e.after(this.originalElement.css({position:e.css("position"),width:e.outerWidth(),height:e.outerHeight(),top:e.css("top"),left:e.css("left")})).remove()}this.originalElement.css("resize",this.originalResizeStyle);d(this.originalElement);return this},_mouseCapture:function(d){var f=false;for(var e in this.handles){if(a(this.handles[e])[0]==d.target){f=true}}return !this.options.disabled&&f},_mouseStart:function(g){var i=this.options,h=this.element.position(),e=this.element;this.resizing=true;this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()};if(e.is(".ui-draggable")||/absolute/.test(e.css("position"))){e.css({position:"absolute",top:h.top,left:h.left})}a.browser.opera&&/relative/.test(e.css("position"))&&e.css({position:"relative",top:"auto",left:"auto"});this._renderProxy();h=c(this.helper.css("left"));var j=c(this.helper.css("top"));if(i.containment){h+=a(i.containment).scrollLeft()||0;j+=a(i.containment).scrollTop()||0}this.offset=this.helper.offset();this.position={left:h,top:j};this.size=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalSize=this._helper?{width:e.outerWidth(),height:e.outerHeight()}:{width:e.width(),height:e.height()};this.originalPosition={left:h,top:j};this.sizeDiff={width:e.outerWidth()-e.width(),height:e.outerHeight()-e.height()};this.originalMousePosition={left:g.pageX,top:g.pageY};this.aspectRatio=typeof i.aspectRatio=="number"?i.aspectRatio:this.originalSize.width/this.originalSize.height||1;i=a(".ui-resizable-"+this.axis).css("cursor");a("body").css("cursor",i=="auto"?this.axis+"-resize":i);e.addClass("ui-resizable-resizing");this._propagate("start",g);return true},_mouseDrag:function(f){var h=this.helper,g=this.originalMousePosition,e=this._change[this.axis];if(!e){return false}g=e.apply(this,[f,f.pageX-g.left||0,f.pageY-g.top||0]);if(this._aspectRatio||f.shiftKey){g=this._updateRatio(g,f)}g=this._respectSize(g,f);this._propagate("resize",f);h.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"});!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize();this._updateCache(g);this._trigger("resize",f,this.ui());return false},_mouseStop:function(i){this.resizing=false;var k=this.options,j=this;if(this._helper){var h=this._proportionallyResizeElements,l=h.length&&/textarea/i.test(h[0].nodeName);h=l&&a.ui.hasScroll(h[0],"left")?0:j.sizeDiff.height;l={width:j.size.width-(l?0:j.sizeDiff.width),height:j.size.height-h};h=parseInt(j.element.css("left"),10)+(j.position.left-j.originalPosition.left)||null;var e=parseInt(j.element.css("top"),10)+(j.position.top-j.originalPosition.top)||null;k.animate||this.element.css(a.extend(l,{top:e,left:h}));j.helper.height(j.size.height);j.helper.width(j.size.width);this._helper&&!k.animate&&this._proportionallyResize()}a("body").css("cursor","auto");this.element.removeClass("ui-resizable-resizing");this._propagate("stop",i);this._helper&&this.helper.remove();return false},_updateCache:function(d){this.offset=this.helper.offset();if(b(d.left)){this.position.left=d.left}if(b(d.top)){this.position.top=d.top}if(b(d.height)){this.size.height=d.height}if(b(d.width)){this.size.width=d.width}},_updateRatio:function(f){var h=this.position,g=this.size,e=this.axis;if(f.height){f.width=g.height*this.aspectRatio}else{if(f.width){f.height=g.width/this.aspectRatio}}if(e=="sw"){f.left=h.left+(g.width-f.width);f.top=null}if(e=="nw"){f.top=h.top+(g.height-f.height);f.left=h.left+(g.width-f.width)}return f},_respectSize:function(o){var q=this.options,p=this.axis,u=b(o.width)&&q.maxWidth&&q.maxWidth<o.width,r=b(o.height)&&q.maxHeight&&q.maxHeight<o.height,s=b(o.width)&&q.minWidth&&q.minWidth>o.width,m=b(o.height)&&q.minHeight&&q.minHeight>o.height;if(s){o.width=q.minWidth}if(m){o.height=q.minHeight}if(u){o.width=q.maxWidth}if(r){o.height=q.maxHeight}var n=this.originalPosition.left+this.originalSize.width,e=this.position.top+this.size.height,l=/sw|nw|w/.test(p);p=/nw|ne|n/.test(p);if(s&&l){o.left=n-q.minWidth}if(u&&l){o.left=n-q.maxWidth}if(m&&p){o.top=e-q.minHeight}if(r&&p){o.top=e-q.maxHeight}if((q=!o.width&&!o.height)&&!o.left&&o.top){o.top=null}else{if(q&&!o.top&&o.left){o.left=null}}return o},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){for(var g=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var h=this._proportionallyResizeElements[i];if(!this.borderDif){var e=[h.css("borderTopWidth"),h.css("borderRightWidth"),h.css("borderBottomWidth"),h.css("borderLeftWidth")],j=[h.css("paddingTop"),h.css("paddingRight"),h.css("paddingBottom"),h.css("paddingLeft")];this.borderDif=a.map(e,function(d,f){d=parseInt(d,10)||0;f=parseInt(j[f],10)||0;return d+f})}a.browser.msie&&(a(g).is(":hidden")||a(g).parents(":hidden").length)||h.css({height:g.height()-this.borderDif[0]-this.borderDif[2]||0,width:g.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var d=this.options;this.elementOffset=this.element.offset();if(this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var f=a.browser.msie&&a.browser.version<7,e=f?1:0;f=f?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++d.zIndex});this.helper.appendTo("body").disableSelection()}else{this.helper=this.element}},_change:{e:function(d,e){return{width:this.originalSize.width+e}},w:function(d,e){return{left:this.originalPosition.left+e,width:this.originalSize.width-e}},n:function(d,f,e){return{top:this.originalPosition.top+e,height:this.originalSize.height-e}},s:function(d,f,e){return{height:this.originalSize.height+e}},se:function(d,f,e){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[d,f,e]))},sw:function(d,f,e){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[d,f,e]))},ne:function(d,f,e){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[d,f,e]))},nw:function(d,f,e){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[d,f,e]))}},_propagate:function(d,e){a.ui.plugin.call(this,d,[e,this.ui()]);d!="resize"&&this._trigger(d,e,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}});a.extend(a.ui.resizable,{version:"1.8.4"});a.ui.plugin.add("resizable","alsoResize",{start:function(){var d=a(this).data("resizable").options,e=function(f){a(f).each(function(){var g=a(this);g.data("resizable-alsoresize",{width:parseInt(g.width(),10),height:parseInt(g.height(),10),left:parseInt(g.css("left"),10),top:parseInt(g.css("top"),10),position:g.css("position")})})};if(typeof d.alsoResize=="object"&&!d.alsoResize.parentNode){if(d.alsoResize.length){d.alsoResize=d.alsoResize[0];e(d.alsoResize)}else{a.each(d.alsoResize,function(f){e(f)})}}else{e(d.alsoResize)}},resize:function(k,m){var l=a(this).data("resizable");k=l.options;var i=l.originalSize,n=l.originalPosition,e={height:l.size.height-i.height||0,width:l.size.width-i.width||0,top:l.position.top-n.top||0,left:l.position.left-n.left||0},j=function(d,f){a(d).each(function(){var s=a(this),o=a(this).data("resizable-alsoresize"),h={},g=f&&f.length?f:s.parents(m.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(p,q){if((p=(o[q]||0)+(e[q]||0))&&p>=0){h[q]=p||null}});if(a.browser.opera&&/relative/.test(s.css("position"))){l._revertToRelativePosition=true;s.css({position:"absolute",top:"auto",left:"auto"})}s.css(h)})};typeof k.alsoResize=="object"&&!k.alsoResize.nodeType?a.each(k.alsoResize,function(d,f){j(d,f)}):j(k.alsoResize)},stop:function(){var d=a(this).data("resizable"),f=d.options,e=function(g){a(g).each(function(){var h=a(this);h.css({position:h.data("resizable-alsoresize").position})})};if(d._revertToRelativePosition){d._revertToRelativePosition=false;typeof f.alsoResize=="object"&&!f.alsoResize.nodeType?a.each(f.alsoResize,function(g){e(g)}):e(f.alsoResize)}a(this).removeData("resizable-alsoresize")}});a.ui.plugin.add("resizable","animate",{stop:function(k){var m=a(this).data("resizable"),l=m.options,i=m._proportionallyResizeElements,n=i.length&&/textarea/i.test(i[0].nodeName),e=n&&a.ui.hasScroll(i[0],"left")?0:m.sizeDiff.height;n={width:m.size.width-(n?0:m.sizeDiff.width),height:m.size.height-e};e=parseInt(m.element.css("left"),10)+(m.position.left-m.originalPosition.left)||null;var j=parseInt(m.element.css("top"),10)+(m.position.top-m.originalPosition.top)||null;m.element.animate(a.extend(n,j&&e?{top:j,left:e}:{}),{duration:l.animateDuration,easing:l.animateEasing,step:function(){var d={width:parseInt(m.element.css("width"),10),height:parseInt(m.element.css("height"),10),top:parseInt(m.element.css("top"),10),left:parseInt(m.element.css("left"),10)};i&&i.length&&a(i[0]).css({width:d.width,height:d.height});m._updateCache(d);m._propagate("resize",k)}})}});a.ui.plugin.add("resizable","containment",{start:function(){var k=a(this).data("resizable"),m=k.element,l=k.options.containment;if(m=l instanceof a?l.get(0):/parent/.test(l)?m.parent().get(0):l){k.containerElement=a(m);if(/document/.test(l)||l==document){k.containerOffset={left:0,top:0};k.containerPosition={left:0,top:0};k.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}}else{var i=a(m),n=[];a(["Top","Right","Left","Bottom"]).each(function(d,f){n[d]=c(i.css("padding"+f))});k.containerOffset=i.offset();k.containerPosition=i.position();k.containerSize={height:i.innerHeight()-n[3],width:i.innerWidth()-n[1]};l=k.containerOffset;var e=k.containerSize.height,j=k.containerSize.width;j=a.ui.hasScroll(m,"left")?m.scrollWidth:j;e=a.ui.hasScroll(m)?m.scrollHeight:e;k.parentData={element:m,left:l.left,top:l.top,width:j,height:e}}}},resize:function(k){var m=a(this).data("resizable"),l=m.options,i=m.containerOffset,n=m.position;k=m._aspectRatio||k.shiftKey;var e={top:0,left:0},j=m.containerElement;if(j[0]!=document&&/static/.test(j.css("position"))){e=i}if(n.left<(m._helper?i.left:0)){m.size.width+=m._helper?m.position.left-i.left:m.position.left-e.left;if(k){m.size.height=m.size.width/l.aspectRatio}m.position.left=l.helper?i.left:0}if(n.top<(m._helper?i.top:0)){m.size.height+=m._helper?m.position.top-i.top:m.position.top;if(k){m.size.width=m.size.height*l.aspectRatio}m.position.top=m._helper?i.top:0}m.offset.left=m.parentData.left+m.position.left;m.offset.top=m.parentData.top+m.position.top;l=Math.abs((m._helper?m.offset.left-e.left:m.offset.left-e.left)+m.sizeDiff.width);i=Math.abs((m._helper?m.offset.top-e.top:m.offset.top-i.top)+m.sizeDiff.height);n=m.containerElement.get(0)==m.element.parent().get(0);e=/relative|absolute/.test(m.containerElement.css("position"));if(n&&e){l-=m.parentData.left}if(l+m.size.width>=m.parentData.width){m.size.width=m.parentData.width-l;if(k){m.size.height=m.size.width/m.aspectRatio}}if(i+m.size.height>=m.parentData.height){m.size.height=m.parentData.height-i;if(k){m.size.width=m.size.height*m.aspectRatio}}},stop:function(){var k=a(this).data("resizable"),m=k.options,l=k.containerOffset,p=k.containerPosition,n=k.containerElement,o=a(k.helper),e=o.offset(),j=o.outerWidth()-k.sizeDiff.width;o=o.outerHeight()-k.sizeDiff.height;k._helper&&!m.animate&&/relative/.test(n.css("position"))&&a(this).css({left:e.left-p.left-l.left,width:j,height:o});k._helper&&!m.animate&&/static/.test(n.css("position"))&&a(this).css({left:e.left-p.left-l.left,width:j,height:o})}});a.ui.plugin.add("resizable","ghost",{start:function(){var d=a(this).data("resizable"),f=d.options,e=d.size;d.ghost=d.originalElement.clone();d.ghost.css({opacity:0.25,display:"block",position:"relative",height:e.height,width:e.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof f.ghost=="string"?f.ghost:"");d.ghost.appendTo(d.helper)},resize:function(){var d=a(this).data("resizable");d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})},stop:function(){var d=a(this).data("resizable");d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}});a.ui.plugin.add("resizable","grid",{resize:function(){var k=a(this).data("resizable"),m=k.options,l=k.size,i=k.originalSize,n=k.originalPosition,e=k.axis;m.grid=typeof m.grid=="number"?[m.grid,m.grid]:m.grid;var j=Math.round((l.width-i.width)/(m.grid[0]||1))*(m.grid[0]||1);m=Math.round((l.height-i.height)/(m.grid[1]||1))*(m.grid[1]||1);if(/^(se|s|e)$/.test(e)){k.size.width=i.width+j;k.size.height=i.height+m}else{if(/^(ne)$/.test(e)){k.size.width=i.width+j;k.size.height=i.height+m;k.position.top=n.top-m}else{if(/^(sw)$/.test(e)){k.size.width=i.width+j;k.size.height=i.height+m}else{k.size.width=i.width+j;k.size.height=i.height+m;k.position.top=n.top-m}k.position.left=n.left-j}}}});var c=function(d){return parseInt(d,10)||0},b=function(d){return !isNaN(parseInt(d,10))}})(jQuery);(function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:true,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable");this.dragged=false;var d;this.refresh=function(){d=a(b.options.filter,b.element[0]);d.each(function(){var c=a(this),e=c.offset();a.data(this,"selectable-item",{element:this,$element:c,left:e.left,top:e.top,right:e.left+c.outerWidth(),bottom:e.top+c.outerHeight(),startselected:false,selected:c.hasClass("ui-selected"),selecting:c.hasClass("ui-selecting"),unselecting:c.hasClass("ui-unselecting")})})};this.refresh();this.selectees=d.addClass("ui-selectee");this._mouseInit();this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item");this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable");this._mouseDestroy();return this},_mouseStart:function(e){var g=this;this.opos=[e.pageX,e.pageY];if(!this.options.disabled){var b=this.options;this.selectees=a(b.filter,this.element[0]);this._trigger("start",e);a(b.appendTo).append(this.helper);this.helper.css({left:e.clientX,top:e.clientY,width:0,height:0});b.autoRefresh&&this.refresh();this.selectees.filter(".ui-selected").each(function(){var c=a.data(this,"selectable-item");c.startselected=true;if(!e.metaKey){c.$element.removeClass("ui-selected");c.selected=false;c.$element.addClass("ui-unselecting");c.unselecting=true;g._trigger("unselecting",e,{unselecting:c.element})}});a(e.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var c=!e.metaKey||!d.$element.hasClass("ui-selected");d.$element.removeClass(c?"ui-unselecting":"ui-selected").addClass(c?"ui-selecting":"ui-unselecting");d.unselecting=!c;d.selecting=c;(d.selected=c)?g._trigger("selecting",e,{selecting:d.element}):g._trigger("unselecting",e,{unselecting:d.element});return false}})}},_mouseDrag:function(n){var o=this;this.dragged=true;if(!this.options.disabled){var q=this.options,m=this.opos[0],p=this.opos[1],k=n.pageX,l=n.pageY;if(m>k){var e=k;k=m;m=e}if(p>l){e=l;l=p;p=e}this.helper.css({left:m,top:p,width:k-m,height:l-p});this.selectees.each(function(){var b=a.data(this,"selectable-item");if(!(!b||b.element==o.element[0])){var c=false;if(q.tolerance=="touch"){c=!(b.left>k||b.right<m||b.top>l||b.bottom<p)}else{if(q.tolerance=="fit"){c=b.left>m&&b.right<k&&b.top>p&&b.bottom<l}}if(c){if(b.selected){b.$element.removeClass("ui-selected");b.selected=false}if(b.unselecting){b.$element.removeClass("ui-unselecting");b.unselecting=false}if(!b.selecting){b.$element.addClass("ui-selecting");b.selecting=true;o._trigger("selecting",n,{selecting:b.element})}}else{if(b.selecting){if(n.metaKey&&b.startselected){b.$element.removeClass("ui-selecting");b.selecting=false;b.$element.addClass("ui-selected");b.selected=true}else{b.$element.removeClass("ui-selecting");b.selecting=false;if(b.startselected){b.$element.addClass("ui-unselecting");b.unselecting=true}o._trigger("unselecting",n,{unselecting:b.element})}}if(b.selected){if(!n.metaKey&&!b.startselected){b.$element.removeClass("ui-selected");b.selected=false;b.$element.addClass("ui-unselecting");b.unselecting=true;o._trigger("unselecting",n,{unselecting:b.element})}}}}});return false}},_mouseStop:function(b){var d=this;this.dragged=false;a(".ui-unselecting",this.element[0]).each(function(){var c=a.data(this,"selectable-item");c.$element.removeClass("ui-unselecting");c.unselecting=false;c.startselected=false;d._trigger("unselected",b,{unselected:c.element})});a(".ui-selecting",this.element[0]).each(function(){var c=a.data(this,"selectable-item");c.$element.removeClass("ui-selecting").addClass("ui-selected");c.selecting=false;c.selected=true;c.startselected=true;d._trigger("selected",b,{selected:c.element})});this._trigger("stop",b);this.helper.remove();return false}});a.extend(a.ui.selectable,{version:"1.8.4"})})(jQuery);(function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",options:{appendTo:"parent",axis:false,connectWith:false,containment:false,cursor:"auto",cursorAt:false,dropOnEmpty:true,forcePlaceholderSize:false,forceHelperSize:false,grid:false,handle:false,helper:"original",items:"> *",opacity:false,placeholder:false,revert:false,scroll:true,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1000},_create:function(){this.containerCache={};this.element.addClass("ui-sortable");this.refresh();this.floating=this.items.length?/left|right/.test(this.items[0].item.css("float")):false;this.offset=this.element.offset();this._mouseInit()},destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").removeData("sortable").unbind(".sortable");this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--){this.items[b].item.removeData("sortable-item")}return this},_setOption:function(d,c){if(d==="disabled"){this.options[d]=c;this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")}else{a.Widget.prototype._setOption.apply(this,arguments)}},_mouseCapture:function(i,g){if(this.reverting){return false}if(this.options.disabled||this.options.type=="static"){return false}this._refreshItems(i);var h=null,d=this;a(i.target).parents().each(function(){if(a.data(this,"sortable-item")==d){h=a(this);return false}});if(a.data(i.target,"sortable-item")==d){h=a(i.target)}if(!h){return false}if(this.options.handle&&!g){var j=false;a(this.options.handle,h).find("*").andSelf().each(function(){if(this==i.target){j=true}});if(!j){return false}}this.currentItem=h;this._removeCurrentsFromItems();return true},_mouseStart:function(h,f,g){f=this.options;var d=this;this.currentContainer=this;this.refreshPositions();this.helper=this._createHelper(h);this._cacheHelperProportions();this._cacheMargins();this.scrollParent=this.helper.scrollParent();this.offset=this.currentItem.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.helper.css("position","absolute");this.cssPosition=this.helper.css("position");a.extend(this.offset,{click:{left:h.pageX-this.offset.left,top:h.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this._generatePosition(h);this.originalPageX=h.pageX;this.originalPageY=h.pageY;f.cursorAt&&this._adjustOffsetFromHelper(f.cursorAt);this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]};this.helper[0]!=this.currentItem[0]&&this.currentItem.hide();this._createPlaceholder();f.containment&&this._setContainment();if(f.cursor){if(a("body").css("cursor")){this._storedCursor=a("body").css("cursor")}a("body").css("cursor",f.cursor)}if(f.opacity){if(this.helper.css("opacity")){this._storedOpacity=this.helper.css("opacity")}this.helper.css("opacity",f.opacity)}if(f.zIndex){if(this.helper.css("zIndex")){this._storedZIndex=this.helper.css("zIndex")}this.helper.css("zIndex",f.zIndex)}if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){this.overflowOffset=this.scrollParent.offset()}this._trigger("start",h,this._uiHash());this._preserveHelperProportions||this._cacheHelperProportions();if(!g){for(g=this.containers.length-1;g>=0;g--){this.containers[g]._trigger("activate",h,d._uiHash(this))}}if(a.ui.ddmanager){a.ui.ddmanager.current=this}a.ui.ddmanager&&!f.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,h);this.dragging=true;this.helper.addClass("ui-sortable-helper");this._mouseDrag(h);return true},_mouseDrag:function(i){this.position=this._generatePosition(i);this.positionAbs=this._convertPositionTo("absolute");if(!this.lastPositionAbs){this.lastPositionAbs=this.positionAbs}if(this.options.scroll){var g=this.options,h=false;if(this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"){if(this.overflowOffset.top+this.scrollParent[0].offsetHeight-i.pageY<g.scrollSensitivity){this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop+g.scrollSpeed}else{if(i.pageY-this.overflowOffset.top<g.scrollSensitivity){this.scrollParent[0].scrollTop=h=this.scrollParent[0].scrollTop-g.scrollSpeed}}if(this.overflowOffset.left+this.scrollParent[0].offsetWidth-i.pageX<g.scrollSensitivity){this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft+g.scrollSpeed}else{if(i.pageX-this.overflowOffset.left<g.scrollSensitivity){this.scrollParent[0].scrollLeft=h=this.scrollParent[0].scrollLeft-g.scrollSpeed}}}else{if(i.pageY-a(document).scrollTop()<g.scrollSensitivity){h=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed)}else{if(a(window).height()-(i.pageY-a(document).scrollTop())<g.scrollSensitivity){h=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)}}if(i.pageX-a(document).scrollLeft()<g.scrollSensitivity){h=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed)}else{if(a(window).width()-(i.pageX-a(document).scrollLeft())<g.scrollSensitivity){h=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed)}}}h!==false&&a.ui.ddmanager&&!g.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,i)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!="x"){this.helper[0].style.top=this.position.top+"px"}for(g=this.items.length-1;g>=0;g--){h=this.items[g];var d=h.item[0],j=this._intersectsWithPointer(h);if(j){if(d!=this.currentItem[0]&&this.placeholder[j==1?"next":"prev"]()[0]!=d&&!a.ui.contains(this.placeholder[0],d)&&(this.options.type=="semi-dynamic"?!a.ui.contains(this.element[0],d):true)){this.direction=j==1?"down":"up";if(this.options.tolerance=="pointer"||this._intersectsWithSides(h)){this._rearrange(i,h)}else{break}this._trigger("change",i,this._uiHash());break}}}this._contactContainers(i);a.ui.ddmanager&&a.ui.ddmanager.drag(this,i);this._trigger("sort",i,this._uiHash());this.lastPositionAbs=this.positionAbs;return false},_mouseStop:function(f,d){if(f){a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,f);if(this.options.revert){var e=this;d=e.placeholder.offset();e.reverting=true;a(this.helper).animate({left:d.left-this.offset.parent.left-e.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:d.top-this.offset.parent.top-e.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){e._clear(f)})}else{this._clear(f,d)}return false}},cancel:function(){var d=this;if(this.dragging){this._mouseUp();this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--){this.containers[c]._trigger("deactivate",null,d._uiHash(this));if(this.containers[c].containerCache.over){this.containers[c]._trigger("out",null,d._uiHash(this));this.containers[c].containerCache.over=0}}}this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove();a.extend(this,{helper:null,dragging:false,reverting:false,_noFinalSort:null});this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem);return this},serialize:function(f){var d=this._getItemsAsjQuery(f&&f.connected),e=[];f=f||{};a(d).each(function(){var b=(a(f.item||this).attr(f.attribute||"id")||"").match(f.expression||/(.+)[-=_](.+)/);if(b){e.push((f.key||b[1]+"[]")+"="+(f.key&&f.expression?b[1]:b[2]))}});!e.length&&f.key&&e.push(f.key+"=");return e.join("&")},toArray:function(f){var d=this._getItemsAsjQuery(f&&f.connected),e=[];f=f||{};d.each(function(){e.push(a(f.item||this).attr(f.attribute||"id")||"")});return e},_intersectsWith:function(u){var r=this.positionAbs.left,s=r+this.helperProportions.width,d=this.positionAbs.top,v=d+this.helperProportions.height,w=u.left,o=w+u.width,p=u.top,n=p+u.height,m=this.offset.click.top,q=this.offset.click.left;m=d+m>p&&d+m<n&&r+q>w&&r+q<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>u[this.floating?"width":"height"]?m:w<r+this.helperProportions.width/2&&s-this.helperProportions.width/2<o&&p<d+this.helperProportions.height/2&&v-this.helperProportions.height/2<n},_intersectsWithPointer:function(f){var d=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,f.top,f.height);f=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,f.left,f.width);d=d&&f;f=this._getDragVerticalDirection();var e=this._getDragHorizontalDirection();if(!d){return false}return this.floating?e&&e=="right"||f=="down"?2:1:f&&(f=="down"?2:1)},_intersectsWithSides:function(h){var f=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,h.top+h.height/2,h.height);h=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,h.left+h.width/2,h.width);var g=this._getDragVerticalDirection(),d=this._getDragHorizontalDirection();return this.floating&&d?d=="right"&&h||d=="left"&&!h:g&&(g=="down"&&f||g=="up"&&!f)},_getDragVerticalDirection:function(){var b=this.positionAbs.top-this.lastPositionAbs.top;return b!=0&&(b>0?"down":"up")},_getDragHorizontalDirection:function(){var b=this.positionAbs.left-this.lastPositionAbs.left;return b!=0&&(b>0?"right":"left")},refresh:function(b){this._refreshItems(b);this.refreshPositions();return this},_connectWith:function(){var b=this.options;return b.connectWith.constructor==String?[b.connectWith]:b.connectWith},_getItemsAsjQuery:function(m){var k=[],l=[],j=this._connectWith();if(j&&m){for(m=j.length-1;m>=0;m--){for(var n=a(j[m]),d=n.length-1;d>=0;d--){var i=a.data(n[d],"sortable");if(i&&i!=this&&!i.options.disabled){l.push([a.isFunction(i.options.items)?i.options.items.call(i.element):a(i.options.items,i.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),i])}}}}l.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(m=l.length-1;m>=0;m--){l[m][0].each(function(){k.push(this)})}return a(k)},_removeCurrentsFromItems:function(){for(var f=this.currentItem.find(":data(sortable-item)"),d=0;d<this.items.length;d++){for(var e=0;e<f.length;e++){f[e]==this.items[d].item[0]&&this.items.splice(d,1)}}},_refreshItems:function(n){this.items=[];this.containers=[this];var l=this.items,m=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],n,{item:this.currentItem}):a(this.options.items,this.element),this]],d=this._connectWith();if(d){for(var o=d.length-1;o>=0;o--){for(var p=a(d[o]),j=p.length-1;j>=0;j--){var k=a.data(p[j],"sortable");if(k&&k!=this&&!k.options.disabled){m.push([a.isFunction(k.options.items)?k.options.items.call(k.element[0],n,{item:this.currentItem}):a(k.options.items,k.element),k]);this.containers.push(k)}}}}for(o=m.length-1;o>=0;o--){n=m[o][1];d=m[o][0];j=0;for(p=d.length;j<p;j++){k=a(d[j]);k.data("sortable-item",n);l.push({item:k,instance:n,width:0,height:0,left:0,top:0})}}},refreshPositions:function(h){if(this.offsetParent&&this.helper){this.offset.parent=this._getParentOffset()}for(var f=this.items.length-1;f>=0;f--){var g=this.items[f],d=this.options.toleranceElement?a(this.options.toleranceElement,g.item):g.item;if(!h){g.width=d.outerWidth();g.height=d.outerHeight()}d=d.offset();g.left=d.left;g.top=d.top}if(this.options.custom&&this.options.custom.refreshContainers){this.options.custom.refreshContainers.call(this)}else{for(f=this.containers.length-1;f>=0;f--){d=this.containers[f].element.offset();this.containers[f].containerCache.left=d.left;this.containers[f].containerCache.top=d.top;this.containers[f].containerCache.width=this.containers[f].element.outerWidth();this.containers[f].containerCache.height=this.containers[f].element.outerHeight()}}return this},_createPlaceholder:function(h){var f=h||this,g=f.options;if(!g.placeholder||g.placeholder.constructor==String){var d=g.placeholder;g.placeholder={element:function(){var b=a(document.createElement(f.currentItem[0].nodeName)).addClass(d||f.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];if(!d){b.style.visibility="hidden"}return b},update:function(c,b){if(!(d&&!g.forcePlaceholderSize)){b.height()||b.height(f.currentItem.innerHeight()-parseInt(f.currentItem.css("paddingTop")||0,10)-parseInt(f.currentItem.css("paddingBottom")||0,10));b.width()||b.width(f.currentItem.innerWidth()-parseInt(f.currentItem.css("paddingLeft")||0,10)-parseInt(f.currentItem.css("paddingRight")||0,10))}}}}f.placeholder=a(g.placeholder.element.call(f.element,f.currentItem));f.currentItem.after(f.placeholder);g.placeholder.update(f,f.placeholder)},_contactContainers:function(m){for(var k=null,l=null,j=this.containers.length-1;j>=0;j--){if(!a.ui.contains(this.currentItem[0],this.containers[j].element[0])){if(this._intersectsWith(this.containers[j].containerCache)){if(!(k&&a.ui.contains(this.containers[j].element[0],k.element[0]))){k=this.containers[j];l=j}}else{if(this.containers[j].containerCache.over){this.containers[j]._trigger("out",m,this._uiHash(this));this.containers[j].containerCache.over=0}}}}if(k){if(this.containers.length===1){this.containers[l]._trigger("over",m,this._uiHash(this));this.containers[l].containerCache.over=1}else{if(this.currentContainer!=this.containers[l]){k=10000;j=null;for(var n=this.positionAbs[this.containers[l].floating?"left":"top"],d=this.items.length-1;d>=0;d--){if(a.ui.contains(this.containers[l].element[0],this.items[d].item[0])){var i=this.items[d][this.containers[l].floating?"left":"top"];if(Math.abs(i-n)<k){k=Math.abs(i-n);j=this.items[d]}}}if(j||this.options.dropOnEmpty){this.currentContainer=this.containers[l];j?this._rearrange(m,j,null,true):this._rearrange(m,null,this.containers[l].element,true);this._trigger("change",m,this._uiHash());this.containers[l]._trigger("change",m,this._uiHash(this));this.options.placeholder.update(this.currentContainer,this.placeholder);this.containers[l]._trigger("over",m,this._uiHash(this));this.containers[l].containerCache.over=1}}}}},_createHelper:function(d){var c=this.options;d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[d,this.currentItem])):c.helper=="clone"?this.currentItem.clone():this.currentItem;d.parents("body").length||a(c.appendTo!="parent"?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]);if(d[0]==this.currentItem[0]){this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}}if(d[0].style.width==""||c.forceHelperSize){d.width(this.currentItem.width())}if(d[0].style.height==""||c.forceHelperSize){d.height(this.currentItem.height())}return d},_adjustOffsetFromHelper:function(b){if(typeof b=="string"){b=b.split(" ")}if(a.isArray(b)){b={left:+b[0],top:+b[1]||0}}if("left" in b){this.offset.click.left=b.left+this.margins.left}if("right" in b){this.offset.click.left=this.helperProportions.width-b.right+this.margins.left}if("top" in b){this.offset.click.top=b.top+this.margins.top}if("bottom" in b){this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top}},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();if(this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])){b.left+=this.scrollParent.scrollLeft();b.top+=this.scrollParent.scrollTop()}if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie){b={top:0,left:0}}return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var b=this.currentItem.position();return{top:b.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:b.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var f=this.options;if(f.containment=="parent"){f.containment=this.helper[0].parentNode}if(f.containment=="document"||f.containment=="window"){this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a(f.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(a(f.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]}if(!/^(document|window|parent)$/.test(f.containment)){var d=a(f.containment)[0];f=a(f.containment).offset();var e=a(d).css("overflow")!="hidden";this.containment=[f.left+(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0)-this.margins.left,f.top+(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0)-this.margins.top,f.left+(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,f.top+(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(h,f){if(!f){f=this.position}h=h=="absolute"?1:-1;var g=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,d=/(html|body)/i.test(g[0].tagName);return{top:f.top+this.offset.relative.top*h+this.offset.parent.top*h-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():d?0:g.scrollTop())*h),left:f.left+this.offset.relative.left*h+this.offset.parent.left*h-(a.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():d?0:g.scrollLeft())*h)}},_generatePosition:function(k){var i=this.options,j=this.cssPosition=="absolute"&&!(this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,h=/(html|body)/i.test(j[0].tagName);if(this.cssPosition=="relative"&&!(this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0])){this.offset.relative=this._getRelativeOffset()}var l=k.pageX,d=k.pageY;if(this.originalPosition){if(this.containment){if(k.pageX-this.offset.click.left<this.containment[0]){l=this.containment[0]+this.offset.click.left}if(k.pageY-this.offset.click.top<this.containment[1]){d=this.containment[1]+this.offset.click.top}if(k.pageX-this.offset.click.left>this.containment[2]){l=this.containment[2]+this.offset.click.left}if(k.pageY-this.offset.click.top>this.containment[3]){d=this.containment[3]+this.offset.click.top}}if(i.grid){d=this.originalPageY+Math.round((d-this.originalPageY)/i.grid[1])*i.grid[1];d=this.containment?!(d-this.offset.click.top<this.containment[1]||d-this.offset.click.top>this.containment[3])?d:!(d-this.offset.click.top<this.containment[1])?d-i.grid[1]:d+i.grid[1]:d;l=this.originalPageX+Math.round((l-this.originalPageX)/i.grid[0])*i.grid[0];l=this.containment?!(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l:!(l-this.offset.click.left<this.containment[0])?l-i.grid[0]:l+i.grid[0]:l}}return{top:d-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():h?0:j.scrollTop()),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():h?0:j.scrollLeft())}},_rearrange:function(k,i,j,h){j?j[0].appendChild(this.placeholder[0]):i.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?i.item[0]:i.item[0].nextSibling);this.counter=this.counter?++this.counter:1;var l=this,d=this.counter;window.setTimeout(function(){d==l.counter&&l.refreshPositions(!h)},0)},_clear:function(h,f){this.reverting=false;var g=[];!this._noFinalSort&&this.currentItem[0].parentNode&&this.placeholder.before(this.currentItem);this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var d in this._storedCSS){if(this._storedCSS[d]=="auto"||this._storedCSS[d]=="static"){this._storedCSS[d]=""}}this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else{this.currentItem.show()}this.fromOutside&&!f&&g.push(function(b){this._trigger("receive",b,this._uiHash(this.fromOutside))});if((this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!f){g.push(function(b){this._trigger("update",b,this._uiHash())})}if(!a.ui.contains(this.element[0],this.currentItem[0])){f||g.push(function(b){this._trigger("remove",b,this._uiHash())});for(d=this.containers.length-1;d>=0;d--){if(a.ui.contains(this.containers[d].element[0],this.currentItem[0])&&!f){g.push(function(b){return function(c){b._trigger("receive",c,this._uiHash(this))}}.call(this,this.containers[d]));g.push(function(b){return function(c){b._trigger("update",c,this._uiHash(this))}}.call(this,this.containers[d]))}}}for(d=this.containers.length-1;d>=0;d--){f||g.push(function(b){return function(c){b._trigger("deactivate",c,this._uiHash(this))}}.call(this,this.containers[d]));if(this.containers[d].containerCache.over){g.push(function(b){return function(c){b._trigger("out",c,this._uiHash(this))}}.call(this,this.containers[d]));this.containers[d].containerCache.over=0}}this._storedCursor&&a("body").css("cursor",this._storedCursor);this._storedOpacity&&this.helper.css("opacity",this._storedOpacity);if(this._storedZIndex){this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex)}this.dragging=false;if(this.cancelHelperRemoval){if(!f){this._trigger("beforeStop",h,this._uiHash());for(d=0;d<g.length;d++){g[d].call(this,h)}this._trigger("stop",h,this._uiHash())}return false}f||this._trigger("beforeStop",h,this._uiHash());this.placeholder[0].parentNode.removeChild(this.placeholder[0]);this.helper[0]!=this.currentItem[0]&&this.helper.remove();this.helper=null;if(!f){for(d=0;d<g.length;d++){g[d].call(this,h)}this._trigger("stop",h,this._uiHash())}this.fromOutside=false;return true},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===false&&this.cancel()},_uiHash:function(d){var c=d||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:d?d.element:null}}});a.extend(a.ui.sortable,{version:"1.8.4"})})(jQuery);(function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:true,clearStyle:false,collapsible:false,event:"click",fillSpace:false,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:false,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var g=this,e=g.options;g.running=0;g.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix");g.headers=g.element.find(e.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){e.disabled||a(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){e.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){e.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){e.disabled||a(this).removeClass("ui-state-focus")});g.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(e.navigation){var c=g.element.find("a").filter(e.navigationFilter).eq(0);if(c.length){var h=c.closest(".ui-accordion-header");g.active=h.length?h:c.closest(".ui-accordion-content").prev()}}g.active=g._findActive(g.active||e.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all ui-corner-top");g.active.next().addClass("ui-accordion-content-active");g._createIcons();g.resize();g.element.attr("role","tablist");g.headers.attr("role","tab").bind("keydown.accordion",function(b){return g._keydown(b)}).next().attr("role","tabpanel");g.headers.not(g.active||"").attr({"aria-expanded":"false",tabIndex:-1}).next().hide();g.active.length?g.active.attr({"aria-expanded":"true",tabIndex:0}):g.headers.eq(0).attr("tabIndex",0);a.browser.safari||g.headers.find("a").attr("tabIndex",-1);e.event&&g.headers.bind(e.event.split(" ").join(".accordion ")+".accordion",function(b){g._clickHandler.call(g,b,this);b.preventDefault()})},_createIcons:function(){var b=this.options;if(b.icons){a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers);this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected);this.element.addClass("ui-accordion-icons")}},_destroyIcons:function(){this.headers.children(".ui-icon").remove();this.element.removeClass("ui-accordion-icons")},destroy:function(){var d=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role");this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("tabIndex");this.headers.find("a").removeAttr("tabIndex");this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");if(d.autoHeight||d.fillHeight){c.css("height","")}return a.Widget.prototype.destroy.call(this)},_setOption:function(d,c){a.Widget.prototype._setOption.apply(this,arguments);d=="active"&&this.activate(c);if(d=="icons"){this._destroyIcons();c&&this._createIcons()}if(d=="disabled"){this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")}},_keydown:function(i){if(!(this.options.disabled||i.altKey||i.ctrlKey)){var h=a.ui.keyCode,e=this.headers.length,j=this.headers.index(i.target),c=false;switch(i.keyCode){case h.RIGHT:case h.DOWN:c=this.headers[(j+1)%e];break;case h.LEFT:case h.UP:c=this.headers[(j-1+e)%e];break;case h.SPACE:case h.ENTER:this._clickHandler({target:i.target},i.target);i.preventDefault()}if(c){a(i.target).attr("tabIndex",-1);a(c).attr("tabIndex",0);c.focus();return false}return true}},resize:function(){var f=this.options,e;if(f.fillSpace){if(a.browser.msie){var c=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}e=this.element.parent().height();a.browser.msie&&this.element.parent().css("overflow",c);this.headers.each(function(){e-=a(this).outerHeight(true)});this.headers.next().each(function(){a(this).height(Math.max(0,e-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else{if(f.autoHeight){e=0;this.headers.next().each(function(){e=Math.max(e,a(this).height("").height())}).height(e)}}return this},activate:function(b){this.options.active=b;b=this._findActive(b)[0];this._clickHandler({target:b},b);return this},_findActive:function(b){return b?typeof b==="number"?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===false?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(k,j){var e=this.options;if(!e.disabled){if(k.target){k=a(k.currentTarget||j);j=k[0]===this.active[0];e.active=e.collapsible&&j?false:this.headers.index(k);if(!(this.running||!e.collapsible&&j)){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(e.icons.headerSelected).addClass(e.icons.header);if(!j){k.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(e.icons.header).addClass(e.icons.headerSelected);k.next().addClass("ui-accordion-content-active")}i=k.next();l=this.active.next();c={options:e,newHeader:j&&e.collapsible?a([]):k,oldHeader:this.active,newContent:j&&e.collapsible?a([]):i,oldContent:l};e=this.headers.index(this.active[0])>this.headers.index(k[0]);this.active=j?a([]):k;this._toggle(i,l,c,j,e)}}else{if(e.collapsible){this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(e.icons.headerSelected).addClass(e.icons.header);this.active.next().addClass("ui-accordion-content-active");var l=this.active.next(),c={options:e,newHeader:a([]),oldHeader:e.active,newContent:a([]),oldContent:l},i=this.active=a([]);this._toggle(i,l,c)}}}},_toggle:function(q,p,u,r,s){var n=this,c=n.options;n.toShow=q;n.toHide=p;n.data=u;var l=function(){if(n){return n._completed.apply(n,arguments)}};n._trigger("changestart",null,n.data);n.running=p.size()===0?q.size():p.size();if(c.animated){u={};u=c.collapsible&&r?{toShow:a([]),toHide:p,complete:l,down:s,autoHeight:c.autoHeight||c.fillSpace}:{toShow:q,toHide:p,complete:l,down:s,autoHeight:c.autoHeight||c.fillSpace};if(!c.proxied){c.proxied=c.animated}if(!c.proxiedDuration){c.proxiedDuration=c.duration}c.animated=a.isFunction(c.proxied)?c.proxied(u):c.proxied;c.duration=a.isFunction(c.proxiedDuration)?c.proxiedDuration(u):c.proxiedDuration;r=a.ui.accordion.animations;var o=c.duration,m=c.animated;if(m&&!r[m]&&!a.easing[m]){m="slide"}r[m]||(r[m]=function(b){this.slide(b,{easing:m,duration:o||700})});r[m](u)}else{if(c.collapsible&&r){q.toggle()}else{p.hide();q.show()}l(true)}p.prev().attr({"aria-expanded":"false",tabIndex:-1}).blur();q.prev().attr({"aria-expanded":"true",tabIndex:0}).focus()},_completed:function(b){this.running=b?0:--this.running;if(!this.running){this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""});this.toHide.removeClass("ui-accordion-content-active");this._trigger("change",null,this.data)}}});a.extend(a.ui.accordion,{version:"1.8.4",animations:{slide:function(m,l){m=a.extend({easing:"swing",duration:300},m,l);if(m.toHide.size()){if(m.toShow.size()){var i=m.toShow.css("overflow"),n=0,c={},j={},k;l=m.toShow;k=l[0].style.width;l.width(parseInt(l.parent().width(),10)-parseInt(l.css("paddingLeft"),10)-parseInt(l.css("paddingRight"),10)-(parseInt(l.css("borderLeftWidth"),10)||0)-(parseInt(l.css("borderRightWidth"),10)||0));a.each(["height","paddingTop","paddingBottom"],function(d,b){j[b]="hide";d=(""+a.css(m.toShow[0],b)).match(/^([\d+-.]+)(.*)$/);c[b]={value:d[1],unit:d[2]||"px"}});m.toShow.css({height:0,overflow:"hidden"}).show();m.toHide.filter(":hidden").each(m.complete).end().filter(":visible").animate(j,{step:function(d,b){if(b.prop=="height"){n=b.end-b.start===0?0:(b.now-b.start)/(b.end-b.start)}m.toShow[0].style[b.prop]=n*c[b.prop].value+c[b.prop].unit},duration:m.duration,easing:m.easing,complete:function(){m.autoHeight||m.toShow.css("height","");m.toShow.css({width:k,overflow:i});m.complete()}})}else{m.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},m)}}else{m.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},m)}},bounceslide:function(b){this.slide(b,{easing:b.down?"easeOutBounce":"swing",duration:b.down?1000:200})}}})})(jQuery);(function(a){a.widget("ui.autocomplete",{options:{appendTo:"body",delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},_create:function(){var d=this,c=this.element[0].ownerDocument;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(e){if(!d.options.disabled){var b=a.ui.keyCode;switch(e.keyCode){case b.PAGE_UP:d._move("previousPage",e);break;case b.PAGE_DOWN:d._move("nextPage",e);break;case b.UP:d._move("previous",e);e.preventDefault();break;case b.DOWN:d._move("next",e);e.preventDefault();break;case b.ENTER:case b.NUMPAD_ENTER:d.menu.element.is(":visible")&&e.preventDefault();case b.TAB:if(!d.menu.active){return}d.menu.select(e);break;case b.ESCAPE:d.element.val(d.term);d.close(e);break;default:clearTimeout(d.searching);d.searching=setTimeout(function(){if(d.term!=d.element.val()){d.selectedItem=null;d.search(null,e)}},d.options.delay);break}}}).bind("focus.autocomplete",function(){if(!d.options.disabled){d.selectedItem=null;d.previous=d.element.val()}}).bind("blur.autocomplete",function(b){if(!d.options.disabled){clearTimeout(d.searching);d.closing=setTimeout(function(){d.close(b);d._change(b)},150)}});this._initSource();this.response=function(){return d._response.apply(d,arguments)};this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(e){var b=d.menu.element[0];e.target===b&&setTimeout(function(){a(document).one("mousedown",function(g){g.target!==d.element[0]&&g.target!==b&&!a.ui.contains(b,g.target)&&d.close()})},1);setTimeout(function(){clearTimeout(d.closing)},13)}).menu({focus:function(e,b){b=b.item.data("item.autocomplete");false!==d._trigger("focus",null,{item:b})&&/^key/.test(e.originalEvent.type)&&d.element.val(b.value)},selected:function(e,b){b=b.item.data("item.autocomplete");var g=d.previous;if(d.element[0]!==c.activeElement){d.element.focus();d.previous=g}false!==d._trigger("select",e,{item:b})&&d.element.val(b.value);d.close(e);d.selectedItem=b},blur:function(){d.menu.element.is(":visible")&&d.element.val()!==d.term&&d.element.val(d.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu");a.fn.bgiframe&&this.menu.element.bgiframe()},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup");this.menu.element.remove();a.Widget.prototype.destroy.call(this)},_setOption:function(d,c){a.Widget.prototype._setOption.apply(this,arguments);d==="source"&&this._initSource();if(d==="appendTo"){this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0])}},_initSource:function(){var d,c;if(a.isArray(this.options.source)){d=this.options.source;this.source=function(e,b){b(a.ui.autocomplete.filter(d,e.term))}}else{if(typeof this.options.source==="string"){c=this.options.source;this.source=function(e,b){a.getJSON(c,e,b)}}else{this.source=this.options.source}}},search:function(d,c){d=d!=null?d:this.element.val();if(d.length<this.options.minLength){return this.close(c)}clearTimeout(this.closing);if(this._trigger("search")!==false){return this._search(d)}},_search:function(b){this.term=this.element.addClass("ui-autocomplete-loading").val();this.source({term:b},this.response)},_response:function(b){if(b.length){b=this._normalize(b);this._suggest(b);this._trigger("open")}else{this.close()}this.element.removeClass("ui-autocomplete-loading")},close:function(b){clearTimeout(this.closing);if(this.menu.element.is(":visible")){this._trigger("close",b);this.menu.element.hide();this.menu.deactivate()}},_change:function(b){this.previous!==this.element.val()&&this._trigger("change",b,{item:this.selectedItem})},_normalize:function(b){if(b.length&&b[0].label&&b[0].value){return b}return a.map(b,function(c){if(typeof c==="string"){return{label:c,value:c}}return a.extend({label:c.label||c.value,value:c.value||c.label},c)})},_suggest:function(f){var d=this.menu.element.empty().zIndex(this.element.zIndex()+1),e;this._renderMenu(d,f);this.menu.deactivate();this.menu.refresh();this.menu.element.show().position(a.extend({of:this.element},this.options.position));f=d.width("").outerWidth();e=this.element.outerWidth();d.outerWidth(Math.max(f,e))},_renderMenu:function(f,d){var e=this;a.each(d,function(b,c){e._renderItem(f,c)})},_renderItem:function(d,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(d)},_move:function(d,c){if(this.menu.element.is(":visible")){if(this.menu.first()&&/^previous/.test(d)||this.menu.last()&&/^next/.test(d)){this.element.val(this.term);this.menu.deactivate()}else{this.menu[d](c)}}else{this.search(null,c)}},widget:function(){return this.menu.element}});a.extend(a.ui.autocomplete,{escapeRegex:function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(f,d){var e=new RegExp(a.ui.autocomplete.escapeRegex(d),"i");return a.grep(f,function(b){return e.test(b.label||b.value||b)})}})})(jQuery);(function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){if(a(c.target).closest(".ui-menu-item a").length){c.preventDefault();b.select(c)}});this.refresh()},refresh:function(){var b=this;this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem").children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(i,g){this.deactivate();if(this.hasScroll()){var h=g.offset().top-this.element.offset().top,e=this.element.attr("scrollTop"),j=this.element.height();if(h<0){this.element.attr("scrollTop",e+h)}else{h>j&&this.element.attr("scrollTop",e+h-j+g.height())}}this.active=g.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end();this._trigger("focus",i,{item:g})},deactivate:function(){if(this.active){this.active.children("a").removeClass("ui-state-hover").removeAttr("id");this._trigger("blur");this.active=null}},next:function(b){this.move("next",".ui-menu-item:first",b)},previous:function(b){this.move("prev",".ui-menu-item:last",b)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(f,d,e){if(this.active){f=this.active[f+"All"](".ui-menu-item").eq(0);f.length?this.activate(e,f):this.activate(e,this.element.children(d))}else{this.activate(e,this.element.children(d))}},nextPage:function(h){if(this.hasScroll()){if(!this.active||this.last()){this.activate(h,this.element.children(":first"))}else{var f=this.active.offset().top,g=this.element.height(),e=this.element.children("li").filter(function(){var b=a(this).offset().top-f-g+a(this).height();return b<10&&b>-10});e.length||(e=this.element.children(":last"));this.activate(h,e)}}else{this.activate(h,this.element.children(!this.active||this.last()?":first":":last"))}},previousPage:function(f){if(this.hasScroll()){if(!this.active||this.first()){this.activate(f,this.element.children(":last"))}else{var d=this.active.offset().top,e=this.element.height();result=this.element.children("li").filter(function(){var b=a(this).offset().top-d+e-a(this).height();return b<10&&b>-10});result.length||(result=this.element.children(":first"));this.activate(f,result)}}else{this.activate(f,this.element.children(!this.active||this.first()?":last":":first"))}},hasScroll:function(){return this.element.height()<this.element.attr("scrollHeight")},select:function(b){this._trigger("selected",b,{item:this.active})}})})(jQuery);(function(e){var b,c=function(a){e(":ui-button",a.target.form).each(function(){var f=e(this).data("button");setTimeout(function(){f.refresh()},1)})},d=function(g){var h=g.name,a=g.form,f=e([]);if(h){f=a?e(a).find("[name='"+h+"']"):e("[name='"+h+"']",g.ownerDocument).filter(function(){return !this.form})}return f};e.widget("ui.button",{options:{text:true,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",c);this._determineButtonType();this.hasTitle=!!this.buttonElement.attr("title");var g=this,h=this.options,a=this.type==="checkbox"||this.type==="radio",f="ui-state-hover"+(!a?" ui-state-active":"");if(h.label===null){h.label=this.buttonElement.html()}if(this.element.is(":disabled")){h.disabled=true}this.buttonElement.addClass("ui-button ui-widget ui-state-default ui-corner-all").attr("role","button").bind("mouseenter.button",function(){if(!h.disabled){e(this).addClass("ui-state-hover");this===b&&e(this).addClass("ui-state-active")}}).bind("mouseleave.button",function(){h.disabled||e(this).removeClass(f)}).bind("focus.button",function(){e(this).addClass("ui-state-focus")}).bind("blur.button",function(){e(this).removeClass("ui-state-focus")});a&&this.element.bind("change.button",function(){g.refresh()});if(this.type==="checkbox"){this.buttonElement.bind("click.button",function(){if(h.disabled){return false}e(this).toggleClass("ui-state-active");g.buttonElement.attr("aria-pressed",g.element[0].checked)})}else{if(this.type==="radio"){this.buttonElement.bind("click.button",function(){if(h.disabled){return false}e(this).addClass("ui-state-active");g.buttonElement.attr("aria-pressed",true);var i=g.element[0];d(i).not(i).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed",false)})}else{this.buttonElement.bind("mousedown.button",function(){if(h.disabled){return false}e(this).addClass("ui-state-active");b=this;e(document).one("mouseup",function(){b=null})}).bind("mouseup.button",function(){if(h.disabled){return false}e(this).removeClass("ui-state-active")}).bind("keydown.button",function(i){if(h.disabled){return false}if(i.keyCode==e.ui.keyCode.SPACE||i.keyCode==e.ui.keyCode.ENTER){e(this).addClass("ui-state-active")}}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")});this.buttonElement.is("a")&&this.buttonElement.keyup(function(i){i.keyCode===e.ui.keyCode.SPACE&&e(this).click()})}}this._setOption("disabled",h.disabled)},_determineButtonType:function(){this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button";if(this.type==="checkbox"||this.type==="radio"){this.buttonElement=this.element.parents().last().find("label[for="+this.element.attr("id")+"]");this.element.addClass("ui-helper-hidden-accessible");var a=this.element.is(":checked");a&&this.buttonElement.addClass("ui-state-active");this.buttonElement.attr("aria-pressed",a)}else{this.buttonElement=this.element}},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible");this.buttonElement.removeClass("ui-button ui-widget ui-state-default ui-corner-all ui-state-hover ui-state-active  ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only").removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html());this.hasTitle||this.buttonElement.removeAttr("title");e.Widget.prototype.destroy.call(this)},_setOption:function(a,f){e.Widget.prototype._setOption.apply(this,arguments);if(a==="disabled"){f?this.element.attr("disabled",true):this.element.removeAttr("disabled")}this._resetButton()},refresh:function(){var a=this.element.is(":disabled");a!==this.options.disabled&&this._setOption("disabled",a);if(this.type==="radio"){d(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed",true):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed",false)})}else{if(this.type==="checkbox"){this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed",true):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed",false)}}},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label)}else{var g=this.buttonElement.removeClass("ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only"),h=e("<span></span>").addClass("ui-button-text").html(this.options.label).appendTo(g.empty()).text(),a=this.options.icons,f=a.primary&&a.secondary;if(a.primary||a.secondary){g.addClass("ui-button-text-icon"+(f?"s":a.primary?"-primary":"-secondary"));a.primary&&g.prepend("<span class='ui-button-icon-primary ui-icon "+a.primary+"'></span>");a.secondary&&g.append("<span class='ui-button-icon-secondary ui-icon "+a.secondary+"'></span>");if(!this.options.text){g.addClass(f?"ui-button-icons-only":"ui-button-icon-only").removeClass("ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary");this.hasTitle||g.attr("title",h)}}else{g.addClass("ui-button-text-only")}}}});e.widget("ui.buttonset",{_create:function(){this.element.addClass("ui-buttonset");this._init()},_init:function(){this.refresh()},_setOption:function(a,f){a==="disabled"&&this.buttons.button("option",a,f);e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){this.buttons=this.element.find(":button, :submit, :reset, :checkbox, :radio, a, :data(button)").filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass("ui-corner-left").end().filter(":last").addClass("ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset");this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy");e.Widget.prototype.destroy.call(this)}})})(jQuery);(function(a,b){a.widget("ui.dialog",{options:{autoOpen:true,buttons:{},closeOnEscape:true,closeText:"close",dialogClass:"",draggable:true,hide:null,height:"auto",maxHeight:false,maxWidth:false,minHeight:150,minWidth:150,modal:false,position:{my:"center",at:"center",of:window,collision:"fit",using:function(d){var c=a(this).css(d).offset().top;c<0&&a(this).css("top",d.top-c)}},resizable:true,show:null,stack:true,title:"",width:300,zIndex:1000},_create:function(){this.originalTitle=this.element.attr("title");if(typeof this.originalTitle!=="string"){this.originalTitle=""}var m=this,l=m.options,i=l.title||m.originalTitle||"&#160;",n=a.ui.dialog.getTitleId(m.element),c=(m.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+l.dialogClass).css({zIndex:l.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(d){if(l.closeOnEscape&&d.keyCode&&d.keyCode===a.ui.keyCode.ESCAPE){m.close(d);d.preventDefault()}}).attr({role:"dialog","aria-labelledby":n}).mousedown(function(d){m.moveToTop(false,d)});m.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(c);var j=(m.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(c),k=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){k.addClass("ui-state-hover")},function(){k.removeClass("ui-state-hover")}).focus(function(){k.addClass("ui-state-focus")}).blur(function(){k.removeClass("ui-state-focus")}).click(function(d){m.close(d);return false}).appendTo(j);(m.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(k);a("<span></span>").addClass("ui-dialog-title").attr("id",n).html(i).prependTo(j);if(a.isFunction(l.beforeclose)&&!a.isFunction(l.beforeClose)){l.beforeClose=l.beforeclose}j.find("*").add(j).disableSelection();l.draggable&&a.fn.draggable&&m._makeDraggable();l.resizable&&a.fn.resizable&&m._makeResizable();m._createButtons(l.buttons);m._isOpen=false;a.fn.bgiframe&&c.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var c=this;c.overlay&&c.overlay.destroy();c.uiDialog.hide();c.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body");c.uiDialog.remove();c.originalTitle&&c.element.attr("title",c.originalTitle);return c},widget:function(){return this.uiDialog},close:function(f){var e=this,c;if(false!==e._trigger("beforeClose",f)){e.overlay&&e.overlay.destroy();e.uiDialog.unbind("keypress.ui-dialog");e._isOpen=false;if(e.options.hide){e.uiDialog.hide(e.options.hide,function(){e._trigger("close",f)})}else{e.uiDialog.hide();e._trigger("close",f)}a.ui.dialog.overlay.resize();if(e.options.modal){c=0;a(".ui-dialog").each(function(){if(this!==e.uiDialog[0]){c=Math.max(c,a(this).css("z-index"))}});a.ui.dialog.maxZ=c}return e}},isOpen:function(){return this._isOpen},moveToTop:function(g,e){var c=this,h=c.options;if(h.modal&&!g||!h.stack&&!h.modal){return c._trigger("focus",e)}if(h.zIndex>a.ui.dialog.maxZ){a.ui.dialog.maxZ=h.zIndex}if(c.overlay){a.ui.dialog.maxZ+=1;c.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)}g={scrollTop:c.element.attr("scrollTop"),scrollLeft:c.element.attr("scrollLeft")};a.ui.dialog.maxZ+=1;c.uiDialog.css("z-index",a.ui.dialog.maxZ);c.element.attr(g);c._trigger("focus",e);return c},open:function(){if(!this._isOpen){var f=this,e=f.options,c=f.uiDialog;f.overlay=e.modal?new a.ui.dialog.overlay(f):null;c.next().length&&c.appendTo("body");f._size();f._position(e.position);c.show(e.show);f.moveToTop(true);e.modal&&c.bind("keypress.ui-dialog",function(i){if(i.keyCode===a.ui.keyCode.TAB){var d=a(":tabbable",this),h=d.filter(":first");d=d.filter(":last");if(i.target===d[0]&&!i.shiftKey){h.focus(1);return false}else{if(i.target===h[0]&&i.shiftKey){d.focus(1);return false}}}});a(f.element.find(":tabbable").get().concat(c.find(".ui-dialog-buttonpane :tabbable").get().concat(c.get()))).eq(0).focus();f._trigger("open");f._isOpen=true;return f}},_createButtons:function(i){var h=this,e=false,j=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),c=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(j);h.uiDialog.find(".ui-dialog-buttonpane").remove();typeof i==="object"&&i!==null&&a.each(i,function(){return !(e=true)});if(e){a.each(i,function(f,d){f=a('<button type="button"></button>').text(f).click(function(){d.apply(h.element[0],arguments)}).appendTo(c);a.fn.button&&f.button()});j.appendTo(h.uiDialog)}},_makeDraggable:function(){function i(d){return{position:d.position,offset:d.offset}}var h=this,e=h.options,j=a(document),c;h.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(f,d){c=e.height==="auto"?"auto":a(this).height();a(this).height(a(this).height()).addClass("ui-dialog-dragging");h._trigger("dragStart",f,i(d))},drag:function(f,d){h._trigger("drag",f,i(d))},stop:function(f,d){e.position=[d.position.left-j.scrollLeft(),d.position.top-j.scrollTop()];a(this).removeClass("ui-dialog-dragging").height(c);h._trigger("dragStop",f,i(d));a.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function h(d){return{originalPosition:d.originalPosition,originalSize:d.originalSize,position:d.position,size:d.size}}i=i===b?this.options.resizable:i;var e=this,j=e.options,c=e.uiDialog.css("position");i=typeof i==="string"?i:"n,e,s,w,se,sw,ne,nw";e.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:e.element,maxWidth:j.maxWidth,maxHeight:j.maxHeight,minWidth:j.minWidth,minHeight:e._minHeight(),handles:i,start:function(f,d){a(this).addClass("ui-dialog-resizing");e._trigger("resizeStart",f,h(d))},resize:function(f,d){e._trigger("resize",f,h(d))},stop:function(f,d){a(this).removeClass("ui-dialog-resizing");j.height=a(this).height();j.width=a(this).width();e._trigger("resizeStop",f,h(d));a.ui.dialog.overlay.resize()}}).css("position",c).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var c=this.options;return c.height==="auto"?c.minHeight:Math.min(c.minHeight,c.height)},_position:function(g){var e=[],c=[0,0],h;if(g){if(typeof g==="string"||typeof g==="object"&&"0" in g){e=g.split?g.split(" "):[g[0],g[1]];if(e.length===1){e[1]=e[0]}a.each(["left","top"],function(d,f){if(+e[d]===e[d]){c[d]=e[d];e[d]=f}});g={my:e.join(" "),at:e.join(" "),offset:c.join(" ")}}g=a.extend({},a.ui.dialog.prototype.options.position,g)}else{g=a.ui.dialog.prototype.options.position}(h=this.uiDialog.is(":visible"))||this.uiDialog.show();this.uiDialog.css({top:0,left:0}).position(g);h||this.uiDialog.hide()},_setOption:function(k,j){var h=this,l=h.uiDialog,c=l.is(":data(resizable)"),i=false;switch(k){case"beforeclose":k="beforeClose";break;case"buttons":h._createButtons(j);i=true;break;case"closeText":h.uiDialogTitlebarCloseText.text(""+j);break;case"dialogClass":l.removeClass(h.options.dialogClass).addClass("ui-dialog ui-widget ui-widget-content ui-corner-all "+j);break;case"disabled":j?l.addClass("ui-dialog-disabled"):l.removeClass("ui-dialog-disabled");break;case"draggable":j?h._makeDraggable():l.draggable("destroy");break;case"height":i=true;break;case"maxHeight":c&&l.resizable("option","maxHeight",j);i=true;break;case"maxWidth":c&&l.resizable("option","maxWidth",j);i=true;break;case"minHeight":c&&l.resizable("option","minHeight",j);i=true;break;case"minWidth":c&&l.resizable("option","minWidth",j);i=true;break;case"position":h._position(j);break;case"resizable":c&&!j&&l.resizable("destroy");c&&typeof j==="string"&&l.resizable("option","handles",j);!c&&j!==false&&h._makeResizable(j);break;case"title":a(".ui-dialog-title",h.uiDialogTitlebar).html(""+(j||"&#160;"));break;case"width":i=true;break}a.Widget.prototype._setOption.apply(h,arguments);i&&h._size()},_size:function(){var d=this.options,c;this.element.css({width:"auto",minHeight:0,height:0});if(d.minWidth>d.width){d.width=d.minWidth}c=this.uiDialog.css({height:"auto",width:d.width}).height();this.element.css(d.height==="auto"?{minHeight:Math.max(d.minHeight-c,0),height:"auto"}:{minHeight:0,height:Math.max(d.height-c,0)}).show();this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}});a.extend(a.ui.dialog,{version:"1.8.4",uuid:0,maxZ:0,getTitleId:function(c){c=c.attr("id");if(!c){this.uuid+=1;c=this.uuid}return"ui-dialog-title-"+c},overlay:function(c){this.$el=a.ui.dialog.overlay.create(c)}});a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(c){return c+".dialog-overlay"}).join(" "),create:function(d){if(this.instances.length===0){setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(e){return a(e.target).zIndex()>=a.ui.dialog.overlay.maxZ})},1);a(document).bind("keydown.dialog-overlay",function(e){if(d.options.closeOnEscape&&e.keyCode&&e.keyCode===a.ui.keyCode.ESCAPE){d.close(e);e.preventDefault()}});a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize)}var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});a.fn.bgiframe&&c.bgiframe();this.instances.push(c);return c},destroy:function(d){this.oldInstances.push(this.instances.splice(a.inArray(d,this.instances),1)[0]);this.instances.length===0&&a([document,window]).unbind(".dialog-overlay");d.remove();var c=0;a.each(this.instances,function(){c=Math.max(c,this.css("z-index"))});this.maxZ=c},height:function(){var d,c;if(a.browser.msie&&a.browser.version<7){d=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight);c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight);return d<c?a(window).height()+"px":d+"px"}else{return a(document).height()+"px"}},width:function(){var d,c;if(a.browser.msie&&a.browser.version<7){d=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth);c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth);return d<c?a(window).width()+"px":d+"px"}else{return a(document).width()+"px"}},resize:function(){var c=a([]);a.each(a.ui.dialog.overlay.instances,function(){c=c.add(this)});c.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}});a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})})(jQuery);(function(a){a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:false,distance:0,max:100,min:0,orientation:"horizontal",range:false,step:1,value:0,values:null},_create:function(){var d=this,c=this.options;this._mouseSliding=this._keySliding=false;this._animateOff=true;this._handleIndex=null;this._detectOrientation();this._mouseInit();this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all");c.disabled&&this.element.addClass("ui-slider-disabled ui-disabled");this.range=a([]);if(c.range){if(c.range===true){this.range=a("<div></div>");if(!c.values){c.values=[this._valueMin(),this._valueMin()]}if(c.values.length&&c.values.length!==2){c.values=[c.values[0],c.values[0]]}}else{this.range=a("<div></div>")}this.range.appendTo(this.element).addClass("ui-slider-range");if(c.range==="min"||c.range==="max"){this.range.addClass("ui-slider-range-"+c.range)}this.range.addClass("ui-widget-header")}a(".ui-slider-handle",this.element).length===0&&a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle");if(c.values&&c.values.length){for(;a(".ui-slider-handle",this.element).length<c.values.length;){a("<a href='#'></a>").appendTo(this.element).addClass("ui-slider-handle")}}this.handles=a(".ui-slider-handle",this.element).addClass("ui-state-default ui-corner-all");this.handle=this.handles.eq(0);this.handles.add(this.range).filter("a").click(function(b){b.preventDefault()}).hover(function(){c.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){if(c.disabled){a(this).blur()}else{a(".ui-slider .ui-state-focus").removeClass("ui-state-focus");a(this).addClass("ui-state-focus")}}).blur(function(){a(this).removeClass("ui-state-focus")});this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)});this.handles.keydown(function(m){var k=true,n=a(this).data("index.ui-slider-handle"),b,l,j;if(!d.options.disabled){switch(m.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:k=false;if(!d._keySliding){d._keySliding=true;a(this).addClass("ui-state-active");b=d._start(m,n);if(b===false){return}}break}j=d.options.step;b=d.options.values&&d.options.values.length?(l=d.values(n)):(l=d.value());switch(m.keyCode){case a.ui.keyCode.HOME:l=d._valueMin();break;case a.ui.keyCode.END:l=d._valueMax();break;case a.ui.keyCode.PAGE_UP:l=d._trimAlignValue(b+(d._valueMax()-d._valueMin())/5);break;case a.ui.keyCode.PAGE_DOWN:l=d._trimAlignValue(b-(d._valueMax()-d._valueMin())/5);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(b===d._valueMax()){return}l=d._trimAlignValue(b+j);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(b===d._valueMin()){return}l=d._trimAlignValue(b-j);break}d._slide(m,n,l);return k}}).keyup(function(f){var b=a(this).data("index.ui-slider-handle");if(d._keySliding){d._keySliding=false;d._stop(f,b);d._change(f,b);a(this).removeClass("ui-state-active")}});this._refreshValue();this._animateOff=false},destroy:function(){this.handles.remove();this.range.remove();this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider");this._mouseDestroy();return this},_mouseCapture:function(m){var k=this.options,l,i,n,d,j;if(k.disabled){return false}this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()};this.elementOffset=this.element.offset();l=this._normValueFromMouse({x:m.pageX,y:m.pageY});i=this._valueMax()-this._valueMin()+1;d=this;this.handles.each(function(b){var c=Math.abs(l-d.values(b));if(i>c){i=c;n=a(this);j=b}});if(k.range===true&&this.values(1)===k.min){j+=1;n=a(this.handles[j])}if(this._start(m,j)===false){return false}this._mouseSliding=true;d._handleIndex=j;n.addClass("ui-state-active").focus();k=n.offset();this._clickOffset=!a(m.target).parents().andSelf().is(".ui-slider-handle")?{left:0,top:0}:{left:m.pageX-k.left-n.width()/2,top:m.pageY-k.top-n.height()/2-(parseInt(n.css("borderTopWidth"),10)||0)-(parseInt(n.css("borderBottomWidth"),10)||0)+(parseInt(n.css("marginTop"),10)||0)};this._slide(m,j,l);return this._animateOff=true},_mouseStart:function(){return true},_mouseDrag:function(d){var c=this._normValueFromMouse({x:d.pageX,y:d.pageY});this._slide(d,this._handleIndex,c);return false},_mouseStop:function(b){this.handles.removeClass("ui-state-active");this._mouseSliding=false;this._stop(b,this._handleIndex);this._change(b,this._handleIndex);this._clickOffset=this._handleIndex=null;return this._animateOff=false},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(d){var c;if(this.orientation==="horizontal"){c=this.elementSize.width;d=d.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)}else{c=this.elementSize.height;d=d.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)}c=d/c;if(c>1){c=1}if(c<0){c=0}if(this.orientation==="vertical"){c=1-c}d=this._valueMax()-this._valueMin();return this._trimAlignValue(this._valueMin()+c*d)},_start:function(f,d){var e={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){e.value=this.values(d);e.values=this.values()}return this._trigger("start",f,e)},_slide:function(h,f,g){var d;if(this.options.values&&this.options.values.length){d=this.values(f?0:1);if(this.options.values.length===2&&this.options.range===true&&(f===0&&g>d||f===1&&g<d)){g=d}if(g!==this.values(f)){d=this.values();d[f]=g;h=this._trigger("slide",h,{handle:this.handles[f],value:g,values:d});this.values(f?0:1);h!==false&&this.values(f,g,true)}}else{if(g!==this.value()){h=this._trigger("slide",h,{handle:this.handles[f],value:g});h!==false&&this.value(g)}}},_stop:function(f,d){var e={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){e.value=this.values(d);e.values=this.values()}this._trigger("stop",f,e)},_change:function(f,d){if(!this._keySliding&&!this._mouseSliding){var e={handle:this.handles[d],value:this.value()};if(this.options.values&&this.options.values.length){e.value=this.values(d);e.values=this.values()}this._trigger("change",f,e)}},value:function(b){if(arguments.length){this.options.value=this._trimAlignValue(b);this._refreshValue();this._change(null,0)}return this._value()},values:function(i,g){var h,d,j;if(arguments.length>1){this.options.values[i]=this._trimAlignValue(g);this._refreshValue();this._change(null,i)}if(arguments.length){if(a.isArray(arguments[0])){h=this.options.values;d=arguments[0];for(j=0;j<h.length;j+=1){h[j]=this._trimAlignValue(d[j]);this._change(null,j)}this._refreshValue()}else{return this.options.values&&this.options.values.length?this._values(i):this.value()}}else{return this._values()}},_setOption:function(h,f){var g,d=0;if(a.isArray(this.options.values)){d=this.options.values.length}a.Widget.prototype._setOption.apply(this,arguments);switch(h){case"disabled":if(f){this.handles.filter(".ui-state-focus").blur();this.handles.removeClass("ui-state-hover");this.handles.attr("disabled","disabled");this.element.addClass("ui-disabled")}else{this.handles.removeAttr("disabled");this.element.removeClass("ui-disabled")}break;case"orientation":this._detectOrientation();this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation);this._refreshValue();break;case"value":this._animateOff=true;this._refreshValue();this._change(null,0);this._animateOff=false;break;case"values":this._animateOff=true;this._refreshValue();for(g=0;g<d;g+=1){this._change(null,g)}this._animateOff=false;break}},_value:function(){var b=this.options.value;return b=this._trimAlignValue(b)},_values:function(f){var d,e;if(arguments.length){d=this.options.values[f];return d=this._trimAlignValue(d)}else{d=this.options.values.slice();for(e=0;e<d.length;e+=1){d[e]=this._trimAlignValue(d[e])}return d}},_trimAlignValue:function(f){if(f<this._valueMin()){return this._valueMin()}if(f>this._valueMax()){return this._valueMax()}var d=this.options.step>0?this.options.step:1,e=f%d;f=f-e;if(Math.abs(e)*2>=d){f+=e>0?d:-d}return parseFloat(f.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var r=this.options.range,p=this.options,q=this,d=!this._animateOff?p.animate:false,s,m={},u,n,k,o;if(this.options.values&&this.options.values.length){this.handles.each(function(b){s=(q.values(b)-q._valueMin())/(q._valueMax()-q._valueMin())*100;m[q.orientation==="horizontal"?"left":"bottom"]=s+"%";a(this).stop(1,1)[d?"animate":"css"](m,p.animate);if(q.options.range===true){if(q.orientation==="horizontal"){if(b===0){q.range.stop(1,1)[d?"animate":"css"]({left:s+"%"},p.animate)}if(b===1){q.range[d?"animate":"css"]({width:s-u+"%"},{queue:false,duration:p.animate})}}else{if(b===0){q.range.stop(1,1)[d?"animate":"css"]({bottom:s+"%"},p.animate)}if(b===1){q.range[d?"animate":"css"]({height:s-u+"%"},{queue:false,duration:p.animate})}}}u=s})}else{n=this.value();k=this._valueMin();o=this._valueMax();s=o!==k?(n-k)/(o-k)*100:0;m[q.orientation==="horizontal"?"left":"bottom"]=s+"%";this.handle.stop(1,1)[d?"animate":"css"](m,p.animate);if(r==="min"&&this.orientation==="horizontal"){this.range.stop(1,1)[d?"animate":"css"]({width:s+"%"},p.animate)}if(r==="max"&&this.orientation==="horizontal"){this.range[d?"animate":"css"]({width:100-s+"%"},{queue:false,duration:p.animate})}if(r==="min"&&this.orientation==="vertical"){this.range.stop(1,1)[d?"animate":"css"]({height:s+"%"},p.animate)}if(r==="max"&&this.orientation==="vertical"){this.range[d?"animate":"css"]({height:100-s+"%"},{queue:false,duration:p.animate})}}}});a.extend(a.ui.slider,{version:"1.8.4"})})(jQuery);(function(a,b){function g(){return ++c}function e(){return ++f}var c=0,f=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:false,cookie:null,collapsible:false,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(true)},_setOption:function(h,d){if(h=="selected"){this.options.collapsible&&d==this.options.selected||this.select(d)}else{this.options[h]=d;this._tabify()}},_tabId:function(d){return d.title&&d.title.replace(/\s/g,"_").replace(/[^A-Za-z0-9\-_:\.]/g,"")||this.options.idPrefix+g()},_sanitizeSelector:function(d){return d.replace(/:/g,"\\:")},_cookie:function(){var d=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+e());return a.cookie.apply(null,[d].concat(a.makeArray(arguments)))},_ui:function(h,d){return{tab:h,panel:d,index:this.anchors.index(h)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var d=a(this);d.html(d.data("label.tabs")).removeData("label.tabs")})},_tabify:function(A){function d(h,i){h.css("display","");!a.support.opacity&&i.opacity&&h[0].style.removeAttribute("filter")}var y=this,z=this.options,q=/^#.+/;this.list=this.element.find("ol,ul").eq(0);this.lis=a("li:has(a[href])",this.list);this.anchors=this.lis.map(function(){return a("a",this)[0]});this.panels=a([]);this.anchors.each(function(h,n){var m=a(n).attr("href"),i=m.split("#")[0],k;if(i&&(i===location.toString().split("#")[0]||(k=a("base")[0])&&i===k.href)){m=n.hash;n.href=m}if(q.test(m)){y.panels=y.panels.add(y._sanitizeSelector(m))}else{if(m!=="#"){a.data(n,"href.tabs",m);a.data(n,"load.tabs",m.replace(/#.*$/,""));m=y._tabId(n);n.href="#"+m;n=a("#"+m);if(!n.length){n=a(z.panelTemplate).attr("id",m).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(y.panels[h-1]||y.list);n.data("destroy.tabs",true)}y.panels=y.panels.add(n)}else{z.disabled.push(h)}}});if(A){this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all");this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.lis.addClass("ui-state-default ui-corner-top");this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom");if(z.selected===b){location.hash&&this.anchors.each(function(h,i){if(i.hash==location.hash){z.selected=h;return false}});if(typeof z.selected!=="number"&&z.cookie){z.selected=parseInt(y._cookie(),10)}if(typeof z.selected!=="number"&&this.lis.filter(".ui-tabs-selected").length){z.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}z.selected=z.selected||(this.lis.length?0:-1)}else{if(z.selected===null){z.selected=-1}}z.selected=z.selected>=0&&this.anchors[z.selected]||z.selected<0?z.selected:0;z.disabled=a.unique(z.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(h){return y.lis.index(h)}))).sort();a.inArray(z.selected,z.disabled)!=-1&&z.disabled.splice(a.inArray(z.selected,z.disabled),1);this.panels.addClass("ui-tabs-hide");this.lis.removeClass("ui-tabs-selected ui-state-active");if(z.selected>=0&&this.anchors.length){this.panels.eq(z.selected).removeClass("ui-tabs-hide");this.lis.eq(z.selected).addClass("ui-tabs-selected ui-state-active");y.element.queue("tabs",function(){y._trigger("show",null,y._ui(y.anchors[z.selected],y.panels[z.selected]))});this.load(z.selected)}a(window).bind("unload",function(){y.lis.add(y.anchors).unbind(".tabs");y.lis=y.anchors=y.panels=null})}else{z.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))}this.element[z.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible");z.cookie&&this._cookie(z.selected,z.cookie);A=0;for(var u;u=this.lis[A];A++){a(u)[a.inArray(A,z.disabled)!=-1&&!a(u).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled")}z.cache===false&&this.anchors.removeData("cache.tabs");this.lis.add(this.anchors).unbind(".tabs");if(z.event!=="mouseover"){var p=function(h,i){i.is(":not(.ui-state-disabled)")&&i.addClass("ui-state-"+h)},v=function(h,i){i.removeClass("ui-state-"+h)};this.lis.bind("mouseover.tabs",function(){p("hover",a(this))});this.lis.bind("mouseout.tabs",function(){v("hover",a(this))});this.anchors.bind("focus.tabs",function(){p("focus",a(this).closest("li"))});this.anchors.bind("blur.tabs",function(){v("focus",a(this).closest("li"))})}var x,w;if(z.fx){if(a.isArray(z.fx)){x=z.fx[0];w=z.fx[1]}else{x=w=z.fx}}var l=w?function(h,i){a(h).closest("li").addClass("ui-tabs-selected ui-state-active");i.hide().removeClass("ui-tabs-hide").animate(w,w.duration||"normal",function(){d(i,w);y._trigger("show",null,y._ui(h,i[0]))})}:function(h,i){a(h).closest("li").addClass("ui-tabs-selected ui-state-active");i.removeClass("ui-tabs-hide");y._trigger("show",null,y._ui(h,i[0]))},j=x?function(h,i){i.animate(x,x.duration||"normal",function(){y.lis.removeClass("ui-tabs-selected ui-state-active");i.addClass("ui-tabs-hide");d(i,x);y.element.dequeue("tabs")})}:function(h,i){y.lis.removeClass("ui-tabs-selected ui-state-active");i.addClass("ui-tabs-hide");y.element.dequeue("tabs")};this.anchors.bind(z.event+".tabs",function(){var h=this,m=a(h).closest("li"),k=y.panels.filter(":not(.ui-tabs-hide)"),i=a(y._sanitizeSelector(h.hash));if(m.hasClass("ui-tabs-selected")&&!z.collapsible||m.hasClass("ui-state-disabled")||m.hasClass("ui-state-processing")||y._trigger("select",null,y._ui(this,i[0]))===false){this.blur();return false}z.selected=y.anchors.index(this);y.abort();if(z.collapsible){if(m.hasClass("ui-tabs-selected")){z.selected=-1;z.cookie&&y._cookie(z.selected,z.cookie);y.element.queue("tabs",function(){j(h,k)}).dequeue("tabs");this.blur();return false}else{if(!k.length){z.cookie&&y._cookie(z.selected,z.cookie);y.element.queue("tabs",function(){l(h,i)});y.load(y.anchors.index(this));this.blur();return false}}}z.cookie&&y._cookie(z.selected,z.cookie);if(i.length){k.length&&y.element.queue("tabs",function(){j(h,k)});y.element.queue("tabs",function(){l(h,i)});y.load(y.anchors.index(this))}else{throw"jQuery UI Tabs: Mismatching fragment identifier."}a.browser.msie&&this.blur()});this.anchors.bind("click.tabs",function(){return false})},_getIndex:function(d){if(typeof d=="string"){d=this.anchors.index(this.anchors.filter("[href$="+d+"]"))}return d},destroy:function(){var d=this.options;this.abort();this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs");this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all");this.anchors.each(function(){var h=a.data(this,"href.tabs");if(h){this.href=h}var i=a(this).unbind(".tabs");a.each(["href","load","cache"],function(k,j){i.removeData(j+".tabs")})});this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass("ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover ui-state-focus ui-state-disabled ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide")});d.cookie&&this._cookie(null,d.cookie);return this},add:function(n,k,l){if(l===b){l=this.anchors.length}var m=this,d=this.options;k=a(d.tabTemplate.replace(/#\{href\}/g,n).replace(/#\{label\}/g,k));n=!n.indexOf("#")?n.replace("#",""):this._tabId(a("a",k)[0]);k.addClass("ui-state-default ui-corner-top").data("destroy.tabs",true);var j=a("#"+n);j.length||(j=a(d.panelTemplate).attr("id",n).data("destroy.tabs",true));j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide");if(l>=this.lis.length){k.appendTo(this.list);j.appendTo(this.list[0].parentNode)}else{k.insertBefore(this.lis[l]);j.insertBefore(this.panels[l])}d.disabled=a.map(d.disabled,function(h){return h>=l?++h:h});this._tabify();if(this.anchors.length==1){d.selected=0;k.addClass("ui-tabs-selected ui-state-active");j.removeClass("ui-tabs-hide");this.element.queue("tabs",function(){m._trigger("show",null,m._ui(m.anchors[0],m.panels[0]))});this.load(0)}this._trigger("add",null,this._ui(this.anchors[l],this.panels[l]));return this},remove:function(j){j=this._getIndex(j);var d=this.options,h=this.lis.eq(j).remove(),i=this.panels.eq(j).remove();if(h.hasClass("ui-tabs-selected")&&this.anchors.length>1){this.select(j+(j+1<this.anchors.length?1:-1))}d.disabled=a.map(a.grep(d.disabled,function(k){return k!=j}),function(k){return k>=j?--k:k});this._tabify();this._trigger("remove",null,this._ui(h.find("a")[0],i[0]));return this},enable:function(h){h=this._getIndex(h);var d=this.options;if(a.inArray(h,d.disabled)!=-1){this.lis.eq(h).removeClass("ui-state-disabled");d.disabled=a.grep(d.disabled,function(i){return i!=h});this._trigger("enable",null,this._ui(this.anchors[h],this.panels[h]));return this}},disable:function(h){h=this._getIndex(h);var d=this.options;if(h!=d.selected){this.lis.eq(h).addClass("ui-state-disabled");d.disabled.push(h);d.disabled.sort();this._trigger("disable",null,this._ui(this.anchors[h],this.panels[h]))}return this},select:function(d){d=this._getIndex(d);if(d==-1){if(this.options.collapsible&&this.options.selected!=-1){d=this.options.selected}else{return this}}this.anchors.eq(d).trigger(this.options.event+".tabs");return this},load:function(n){n=this._getIndex(n);var k=this,l=this.options,m=this.anchors.eq(n)[0],d=a.data(m,"load.tabs");this.abort();if(!d||this.element.queue("tabs").length!==0&&a.data(m,"cache.tabs")){this.element.dequeue("tabs")}else{this.lis.eq(n).addClass("ui-state-processing");if(l.spinner){var j=a("span",m);j.data("label.tabs",j.html()).html(l.spinner)}this.xhr=a.ajax(a.extend({},l.ajaxOptions,{url:d,success:function(o,h){a(k._sanitizeSelector(m.hash)).html(o);k._cleanup();l.cache&&a.data(m,"cache.tabs",true);k._trigger("load",null,k._ui(k.anchors[n],k.panels[n]));try{l.ajaxOptions.success(o,h)}catch(i){}},error:function(o,h){k._cleanup();k._trigger("load",null,k._ui(k.anchors[n],k.panels[n]));try{l.ajaxOptions.error(o,h,n,m)}catch(i){}}}));k.element.dequeue("tabs");return this}},abort:function(){this.element.queue([]);this.panels.stop(false,true);this.element.queue("tabs",this.element.queue("tabs").splice(-2,2));if(this.xhr){this.xhr.abort();delete this.xhr}this._cleanup();return this},url:function(h,d){this.anchors.eq(h).removeData("cache.tabs").data("load.tabs",d);return this},length:function(){return this.anchors.length}});a.extend(a.ui.tabs,{version:"1.8.4"});a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(l,i){var j=this,k=this.options,d=j._rotate||(j._rotate=function(h){clearTimeout(j.rotation);j.rotation=setTimeout(function(){var m=k.selected;j.select(++m<j.anchors.length?m:0)},l);h&&h.stopPropagation()});i=j._unrotate||(j._unrotate=!i?function(h){h.clientX&&j.rotate(null)}:function(){t=k.selected;d()});if(l){this.element.bind("tabsshow",d);this.anchors.bind(k.event+".tabs",i);d()}else{clearTimeout(j.rotation);this.element.unbind("tabsshow",d);this.anchors.unbind(k.event+".tabs",i);delete this._rotate;delete this._unrotate}return this}})})(jQuery);(function(d,G){function L(){this.debug=false;this._curInst=null;this._keyEvent=false;this._disabledInputs=[];this._inDialog=this._datepickerShowing=false;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass="ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:false,showMonthAfterYear:false,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:false,hideIfNoPrevNext:false,navigationAsDateFormat:false,gotoCurrent:false,changeMonth:false,changeYear:false,yearRange:"c-10:c+10",showOtherMonths:false,selectOtherMonths:false,showWeek:false,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:true,showButtonPanel:false,autoSize:false};d.extend(this._defaults,this.regional[""]);this.dpDiv=d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all ui-helper-hidden-accessible"></div>')}function E(a,b){d.extend(a,b);for(var c in b){if(b[c]==null||b[c]==G){a[c]=b[c]}}return a}d.extend(d.ui,{datepicker:{version:"1.8.4"}});var y=(new Date).getTime();d.extend(L.prototype,{markerClassName:"hasDatepicker",log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){E(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null;for(var e in this._defaults){var f=a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f=e=="div"||e=="span";if(!a.id){this.uuid+=1;a.id="dp"+this.uuid}var i=this._newInst(d(a),f);i.settings=d.extend({},b||{},c||{});if(e=="input"){this._connectDatepicker(a,i)}else{f&&this._inlineDatepicker(a,i)}},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:d('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);if(!c.hasClass(this.markerClassName)){this._attachments(c,b);c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});this._autoSize(b);d.data(a,"datepicker",b)}},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();if(c){b.append=d('<span class="'+this._appendClass+'">'+c+"</span>");a[e?"before":"after"](b.append)}a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");if(c=="focus"||c=="both"){a.focus(this._showDatepicker)}if(c=="button"||c=="both"){c=this._get(b,"buttonText");var f=this._get(b,"buttonImage");b.trigger=d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(f==""?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0]?d.datepicker._hideDatepicker():d.datepicker._showDatepicker(a[0]);return false})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var e=function(f){for(var h=0,i=0,g=0;g<f.length;g++){if(f[g].length>h){h=f[g].length;i=g}}return i};b.setMonth(e(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(e(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);if(!c.hasClass(this.markerClassName)){c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(e,f,h){b.settings[f]=h}).bind("getData.datepicker",function(e,f){return this._get(b,f)});d.data(a,"datepicker",b);this._setDate(b,this._getDefaultDate(b),true);this._updateDatepicker(b);this._updateAlternate(b)}},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;if(!a){this.uuid+=1;this._dialogInput=d('<input type="text" id="'+("dp"+this.uuid)+'" style="position: absolute; top: -100px; width: 0px; z-index: -10;"/>');this._dialogInput.keydown(this._doKeyDown);d("body").append(this._dialogInput);a=this._dialogInst=this._newInst(this._dialogInput,false);a.settings={};d.data(this._dialogInput[0],"datepicker",a)}E(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;if(!this._pos){this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]}this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=true;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();d.removeData(a,"datepicker");if(e=="input"){c.append.remove();c.trigger.remove();b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)}else{if(e=="div"||e=="span"){b.removeClass(this.markerClassName).empty()}}}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=false;c.trigger.filter("button").each(function(){this.disabled=false}).end().filter("img").css({opacity:"1.0",cursor:""})}else{if(e=="div"||e=="span"){b.children("."+this._inlineClass).children().removeClass("ui-state-disabled")}}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if(e=="input"){a.disabled=true;c.trigger.filter("button").each(function(){this.disabled=true}).end().filter("img").css({opacity:"0.5",cursor:"default"})}else{if(e=="div"||e=="span"){b.children("."+this._inlineClass).children().addClass("ui-state-disabled")}}this._disabledInputs=d.map(this._disabledInputs,function(f){return f==a?null:f});this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a){return false}for(var b=0;b<this._disabledInputs.length;b++){if(this._disabledInputs[b]==a){return true}}return false},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(arguments.length==2&&typeof b=="string"){return b=="defaults"?d.extend({},d.datepicker._defaults):e?b=="all"?d.extend({},e.settings):this._get(e,b):null}var f=b||{};if(typeof b=="string"){f={};f[b]=c}if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,true);E(e.settings,f);this._attachments(d(a),e);this._autoSize(e);this._setDateDatepicker(a,h);this._updateDatepicker(e)}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){if(a=this._getInst(a)){this._setDate(a,b);this._updateDatepicker(a);this._updateAlternate(a)}},_getDateDatepicker:function(a,b){(a=this._getInst(a))&&!a.inline&&this._setDateFromField(a,b);return a?this._getDate(a):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=true,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=true;if(d.datepicker._datepickerShowing){switch(a.keyCode){case 9:d.datepicker._hideDatepicker();c=false;break;case 13:c=d("td."+d.datepicker._dayOverClass,b.dpDiv).add(d("td."+d.datepicker._currentClass,b.dpDiv));c[0]?d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]):d.datepicker._hideDatepicker();return false;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:if(a.ctrlKey||a.metaKey){d.datepicker._clearDate(a.target)}c=a.ctrlKey||a.metaKey;break;case 36:if(a.ctrlKey||a.metaKey){d.datepicker._gotoToday(a.target)}c=a.ctrlKey||a.metaKey;break;case 37:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,e?+1:-1,"D")}c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey){d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M")}break;case 38:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,-7,"D")}c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,e?-1:+1,"D")}c=a.ctrlKey||a.metaKey;if(a.originalEvent.altKey){d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M")}break;case 40:if(a.ctrlKey||a.metaKey){d.datepicker._adjustDate(a.target,+7,"D")}c=a.ctrlKey||a.metaKey;break;default:c=false}}else{if(a.keyCode==36&&a.ctrlKey){d.datepicker._showDatepicker(this)}else{c=false}}if(c){a.preventDefault();a.stopPropagation()}},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat"));var c=String.fromCharCode(a.charCode==G?a.keyCode:a.charCode);return a.ctrlKey||c<" "||!b||b.indexOf(c)>-1}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);if(a.input.val()!=a.lastVal){try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a))){d.datepicker._setDateFromField(a);d.datepicker._updateAlternate(a);d.datepicker._updateDatepicker(a)}}catch(b){d.datepicker.log(b)}}return true},_showDatepicker:function(a){a=a.target||a;if(a.nodeName.toLowerCase()!="input"){a=d("input",a.parentNode)[0]}if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);d.datepicker._curInst&&d.datepicker._curInst!=b&&d.datepicker._curInst.dpDiv.stop(true,true);var c=d.datepicker._get(b,"beforeShow");E(b.settings,c?c.apply(a,[a,b]):{});b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);if(d.datepicker._inDialog){a.value=""}if(!d.datepicker._pos){d.datepicker._pos=d.datepicker._findPos(a);d.datepicker._pos[1]+=a.offsetHeight}var e=false;d(a).parents().each(function(){e|=d(this).css("position")=="fixed";return !e});if(e&&d.browser.opera){d.datepicker._pos[0]-=document.documentElement.scrollLeft;d.datepicker._pos[1]-=document.documentElement.scrollTop}c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){c=d.datepicker._get(b,"showAnim");var f=d.datepicker._get(b,"duration"),h=function(){d.datepicker._datepickerShowing=true;var i=d.datepicker._getBorders(b.dpDiv);b.dpDiv.find("iframe.ui-datepicker-cover").css({left:-i[0],top:-i[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})};b.dpDiv.zIndex(d(a).zIndex()+1);d.effects&&d.effects[c]?b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),f,h):b.dpDiv[c||"show"](c?f:null,h);if(!c||!f){h()}b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}},_updateDatepicker:function(a){var b=this,c=d.datepicker._getBorders(a.dpDiv);a.dpDiv.empty().append(this._generateHTML(a)).find("iframe.ui-datepicker-cover").css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}).end().find("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a").bind("mouseout",function(){d(this).removeClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).removeClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).removeClass("ui-datepicker-next-hover")}).bind("mouseover",function(){if(!b._isDisabledDatepicker(a.inline?a.dpDiv.parent()[0]:a.input[0])){d(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover");d(this).addClass("ui-state-hover");this.className.indexOf("ui-datepicker-prev")!=-1&&d(this).addClass("ui-datepicker-prev-hover");this.className.indexOf("ui-datepicker-next")!=-1&&d(this).addClass("ui-datepicker-next-hover")}}).end().find("."+this._dayOverClass+" a").trigger("mouseover").end();c=this._getNumberOfMonths(a);var e=c[1];e>1?a.dpDiv.addClass("ui-datepicker-multi-"+e).css("width",17*e+"em"):a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");a.dpDiv[(c[0]!=1||c[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input.focus()},_getBorders:function(a){var b=function(c){return{thin:1,medium:2,thick:3}[c]||c};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,i=a.input?a.input.outerHeight():0,g=document.documentElement.clientWidth+d(document).scrollLeft(),k=document.documentElement.clientHeight+d(document).scrollTop();b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+i?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,b.top+f>k&&k>f?Math.abs(f+i):0);return b},_findPos:function(a){for(var b=this._get(this._getInst(a),"isRTL");a&&(a.type=="hidden"||a.nodeType!=1);){a=a[b?"previousSibling":"nextSibling"]}a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(!(!b||a&&b!=d.data(a,"datepicker"))){if(this._datepickerShowing){a=this._get(b,"showAnim");var c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b);this._curInst=null};d.effects&&d.effects[a]?b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e):b.dpDiv[a=="slideDown"?"slideUp":a=="fadeIn"?"fadeOut":"hide"](a?c:null,e);a||e();if(a=this._get(b,"onClose")){a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b])}this._datepickerShowing=false;this._lastInput=null;if(this._inDialog){this._dialogInput.css({position:"absolute",left:"0",top:"-100px"});if(d.blockUI){d.unblockUI();d("body").append(this.dpDiv)}}this._inDialog=false}}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(d.datepicker._curInst){a=d(a.target);a[0].id!=d.datepicker._mainDivId&&a.parents("#"+d.datepicker._mainDivId).length==0&&!a.hasClass(d.datepicker.markerClassName)&&!a.hasClass(d.datepicker._triggerClass)&&d.datepicker._datepickerShowing&&!(d.datepicker._inDialog&&d.blockUI)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){a=d(a);var e=this._getInst(a[0]);if(!this._isDisabledDatepicker(a[0])){this._adjustInstDate(e,b+(c=="M"?this._get(e,"showCurrentAtPos"):0),c);this._updateDatepicker(e)}},_gotoToday:function(a){a=d(a);var b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay){b.selectedDay=b.currentDay;b.drawMonth=b.selectedMonth=b.currentMonth;b.drawYear=b.selectedYear=b.currentYear}else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){a=d(a);var e=this._getInst(a[0]);e._selectingMonthYear=false;e["selected"+(c=="M"?"Month":"Year")]=e["draw"+(c=="M"?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_clickMonthYear:function(a){var b=this._getInst(d(a)[0]);b.input&&b._selectingMonthYear&&setTimeout(function(){b.input.focus()},0);b._selectingMonthYear=!b._selectingMonthYear},_selectDay:function(a,b,c,e){var f=d(a);if(!(d(e).hasClass(this._unselectableClass)||this._isDisabledDatepicker(f[0]))){f=this._getInst(f[0]);f.selectedDay=f.currentDay=d("a",e).html();f.selectedMonth=f.currentMonth=b;f.selectedYear=f.currentYear=c;this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){a=this._getInst(d(a)[0]);b=b!=null?b:this._formatDate(a);a.input&&a.input.val(b);this._updateAlternate(a);var c=this._get(a,"onSelect");if(c){c.apply(a.input?a.input[0]:null,[b,a])}else{a.input&&a.input.trigger("change")}if(a.inline){this._updateDatepicker(a)}else{this._hideDatepicker();this._lastInput=a.input[0];typeof a.input[0]!="object"&&a.input.focus();this._lastInput=null}},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[a>0&&a<6,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/86400000)/7)+1},parseDate:function(a,b,c){if(a==null||b==null){throw"Invalid arguments"}b=typeof b=="object"?b.toString():b+"";if(b==""){return null}for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,i=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,k=c=-1,l=-1,u=-1,j=false,o=function(p){(p=z+1<a.length&&a.charAt(z+1)==p)&&z++;return p},m=function(p){o(p);p=new RegExp("^\\d{1,"+(p=="@"?14:p=="!"?20:p=="y"?4:p=="o"?3:2)+"}");p=b.substring(s).match(p);if(!p){throw"Missing number at position "+s}s+=p[0].length;return parseInt(p[0],10)},n=function(p,w,H){p=o(p)?H:w;for(w=0;w<p.length;w++){if(b.substr(s,p[w].length)==p[w]){s+=p[w].length;return w+1}}throw"Unknown name at position "+s},r=function(){if(b.charAt(s)!=a.charAt(z)){throw"Unexpected literal at position "+s}s++},s=0,z=0;z<a.length;z++){if(j){if(a.charAt(z)=="'"&&!o("'")){j=false}else{r()}}else{switch(a.charAt(z)){case"d":l=m("d");break;case"D":n("D",f,h);break;case"o":u=m("o");break;case"m":k=m("m");break;case"M":k=n("M",i,g);break;case"y":c=m("y");break;case"@":var v=new Date(m("@"));c=v.getFullYear();k=v.getMonth()+1;l=v.getDate();break;case"!":v=new Date((m("!")-this._ticksTo1970)/10000);c=v.getFullYear();k=v.getMonth()+1;l=v.getDate();break;case"'":if(o("'")){r()}else{j=true}break;default:r()}}}if(c==-1){c=(new Date).getFullYear()}else{if(c<100){c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100)}}if(u>-1){k=1;l=u;do{e=this._getDaysInMonth(c,k-1);if(l<=e){break}k++;l-=e}while(1)}v=this._daylightSavingAdjust(new Date(c,k-1,l));if(v.getFullYear()!=c||v.getMonth()+1!=k||v.getDate()!=l){throw"Invalid date"}return v},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*10000000,formatDate:function(a,b,c){if(!b){return""}var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort;c=(c?c.monthNames:null)||this._defaults.monthNames;var i=function(o){(o=j+1<a.length&&a.charAt(j+1)==o)&&j++;return o},g=function(o,m,n){m=""+m;if(i(o)){for(;m.length<n;){m="0"+m}}return m},k=function(o,m,n,r){return i(o)?r[m]:n[m]},l="",u=false;if(b){for(var j=0;j<a.length;j++){if(u){if(a.charAt(j)=="'"&&!i("'")){u=false}else{l+=a.charAt(j)}}else{switch(a.charAt(j)){case"d":l+=g("d",b.getDate(),2);break;case"D":l+=k("D",b.getDay(),e,f);break;case"o":l+=g("o",(b.getTime()-(new Date(b.getFullYear(),0,0)).getTime())/86400000,3);break;case"m":l+=g("m",b.getMonth()+1,2);break;case"M":l+=k("M",b.getMonth(),h,c);break;case"y":l+=i("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":l+=b.getTime();break;case"!":l+=b.getTime()*10000+this._ticksTo1970;break;case"'":if(i("'")){l+="'"}else{u=true}break;default:l+=a.charAt(j)}}}}return l},_possibleChars:function(a){for(var b="",c=false,e=function(h){(h=f+1<a.length&&a.charAt(f+1)==h)&&f++;return h},f=0;f<a.length;f++){if(c){if(a.charAt(f)=="'"&&!e("'")){c=false}else{b+=a.charAt(f)}}else{switch(a.charAt(f)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":if(e("'")){b+="'"}else{c=true}break;default:b+=a.charAt(f)}}}return b},_get:function(a,b){return a.settings[b]!==G?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),e=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var i=this._getFormatConfig(a);try{f=this.parseDate(c,e,i)||h}catch(g){this.log(g);e=b?"":e}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=e?f.getDate():0;a.currentMonth=e?f.getMonth():0;a.currentYear=e?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){var e=function(h){var i=new Date;i.setDate(i.getDate()+h);return i},f=function(h){try{return d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),h,d.datepicker._getFormatConfig(a))}catch(i){}var g=(h.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,k=g.getFullYear(),l=g.getMonth();g=g.getDate();for(var u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,j=u.exec(h);j;){switch(j[2]||"d"){case"d":case"D":g+=parseInt(j[1],10);break;case"w":case"W":g+=parseInt(j[1],10)*7;break;case"m":case"M":l+=parseInt(j[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(k,l));break;case"y":case"Y":k+=parseInt(j[1],10);g=Math.min(g,d.datepicker._getDaysInMonth(k,l));break}j=u.exec(h)}return new Date(k,l,g)};if(b=(b=b==null?c:typeof b=="string"?f(b):typeof b=="number"?isNaN(b)?c:e(b):b)&&b.toString()=="Invalid Date"?c:b){b.setHours(0);b.setMinutes(0);b.setSeconds(0);b.setMilliseconds(0)}return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a){return null}a.setHours(a.getHours()>12?a.getHours()+2:0);return a},_setDate:function(a,b,c){var e=!b,f=a.selectedMonth,h=a.selectedYear;b=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();if((f!=a.selectedMonth||h!=a.selectedYear)&&!c){this._notifyChange(a)}this._adjustInstDate(a);if(a.input){a.input.val(e?"":this._formatDate(a))}},_getDate:function(a){return !a.currentYear||a.input&&a.input.val()==""?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,"navigationAsDateFormat"),i=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),k=this._get(a,"stepMonths"),l=i[0]!=1||i[1]!=1,u=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),j=this._getMinMaxDate(a,"min"),o=this._getMinMaxDate(a,"max");g=a.drawMonth-g;var m=a.drawYear;if(g<0){g+=12;m--}if(o){var n=this._daylightSavingAdjust(new Date(o.getFullYear(),o.getMonth()-i[0]*i[1]+1,o.getDate()));for(n=j&&n<j?j:n;this._daylightSavingAdjust(new Date(m,g,1))>n;){g--;if(g<0){g=11;m--}}}a.drawMonth=g;a.drawYear=m;n=this._get(a,"prevText");n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(m,g-k,1)),this._getFormatConfig(a));n=this._canAdjustMonth(a,-1,m,g)?'<a class="ui-datepicker-prev ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', -"+k+", 'M');\" title=\""+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>";var r=this._get(a,"nextText");r=!h?r:this.formatDate(r,this._daylightSavingAdjust(new Date(m,g+k,1)),this._getFormatConfig(a));f=this._canAdjustMonth(a,+1,m,g)?'<a class="ui-datepicker-next ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._adjustDate('#"+a.id+"', +"+k+", 'M');\" title=\""+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+r+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+r+"</span></a>";k=this._get(a,"currentText");r=this._get(a,"gotoCurrent")&&a.currentDay?u:b;k=!h?k:this.formatDate(k,r,this._getFormatConfig(a));h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" onclick="DP_jQuery_'+y+'.datepicker._hideDatepicker();">'+this._get(a,"closeText")+"</button>":"";e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,r)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" onclick="DP_jQuery_'+y+".datepicker._gotoToday('#"+a.id+"');\">"+k+"</button>":"")+(c?"":h)+"</div>":"";h=parseInt(this._get(a,"firstDay"),10);h=isNaN(h)?0:h;k=this._get(a,"showWeek");r=this._get(a,"dayNames");this._get(a,"dayNamesShort");var s=this._get(a,"dayNamesMin"),z=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),p=this._get(a,"beforeShowDay"),w=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var M=this._getDefaultDate(a),I="",C=0;C<i[0];C++){for(var N="",D=0;D<i[1];D++){var J=this._daylightSavingAdjust(new Date(m,g,a.selectedDay)),t=" ui-corner-all",x="";if(l){x+='<div class="ui-datepicker-group';if(i[1]>1){switch(D){case 0:x+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case i[1]-1:x+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:x+=" ui-datepicker-group-middle";t="";break}}x+='">'}x+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&C==0?c?f:n:"")+(/all|right/.test(t)&&C==0?c?n:f:"")+this._generateMonthYearHeader(a,g,m,j,o,C>0||D>0,z,v)+'</div><table class="ui-datepicker-calendar"><thead><tr>';var A=k?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"";for(t=0;t<7;t++){var q=(t+h)%7;A+="<th"+((t+h+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+r[q]+'">'+s[q]+"</span></th>"}x+=A+"</tr></thead><tbody>";A=this._getDaysInMonth(m,g);if(m==a.selectedYear&&g==a.selectedMonth){a.selectedDay=Math.min(a.selectedDay,A)}t=(this._getFirstDayOfMonth(m,g)-h+7)%7;A=l?6:Math.ceil((t+A)/7);q=this._daylightSavingAdjust(new Date(m,g,1-t));for(var O=0;O<A;O++){x+="<tr>";var P=!k?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(q)+"</td>";for(t=0;t<7;t++){var F=p?p.apply(a.input?a.input[0]:null,[q]):[true,""],B=q.getMonth()!=g,K=B&&!H||!F[0]||j&&q<j||o&&q>o;P+='<td class="'+((t+h+6)%7>=5?" ui-datepicker-week-end":"")+(B?" ui-datepicker-other-month":"")+(q.getTime()==J.getTime()&&g==a.selectedMonth&&a._keyEvent||M.getTime()==q.getTime()&&M.getTime()==J.getTime()?" "+this._dayOverClass:"")+(K?" "+this._unselectableClass+" ui-state-disabled":"")+(B&&!w?"":" "+F[1]+(q.getTime()==u.getTime()?" "+this._currentClass:"")+(q.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!B||w)&&F[2]?' title="'+F[2]+'"':"")+(K?"":' onclick="DP_jQuery_'+y+".datepicker._selectDay('#"+a.id+"',"+q.getMonth()+","+q.getFullYear()+', this);return false;"')+">"+(B&&!w?"&#xa0;":K?'<span class="ui-state-default">'+q.getDate()+"</span>":'<a class="ui-state-default'+(q.getTime()==b.getTime()?" ui-state-highlight":"")+(q.getTime()==J.getTime()?" ui-state-active":"")+(B?" ui-priority-secondary":"")+'" href="#">'+q.getDate()+"</a>")+"</td>";q.setDate(q.getDate()+1);q=this._daylightSavingAdjust(q)}x+=P+"</tr>"}g++;if(g>11){g=0;m++}x+="</tbody></table>"+(l?"</div>"+(i[0]>0&&D==i[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");N+=x}I+=N}I+=e+(d.browser.msie&&parseInt(d.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':"");a._keyEvent=false;return I},_generateMonthYearHeader:function(a,b,c,e,f,h,i,g){var k=this._get(a,"changeMonth"),l=this._get(a,"changeYear"),u=this._get(a,"showMonthAfterYear"),j='<div class="ui-datepicker-title">',o="";if(h||!k){o+='<span class="ui-datepicker-month">'+i[b]+"</span>"}else{i=e&&e.getFullYear()==c;var m=f&&f.getFullYear()==c;o+='<select class="ui-datepicker-month" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'M');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";for(var n=0;n<12;n++){if((!i||n>=e.getMonth())&&(!m||n<=f.getMonth())){o+='<option value="'+n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>"}}o+="</select>"}u||(j+=o+(h||!(k&&l)?"&#xa0;":""));if(h||!l){j+='<span class="ui-datepicker-year">'+c+"</span>"}else{g=this._get(a,"yearRange").split(":");var r=(new Date).getFullYear();i=function(s){s=s.match(/c[+-].*/)?c+parseInt(s.substring(1),10):s.match(/[+-].*/)?r+parseInt(s,10):parseInt(s,10);return isNaN(s)?r:s};b=i(g[0]);g=Math.max(b,i(g[1]||""));b=e?Math.max(b,e.getFullYear()):b;g=f?Math.min(g,f.getFullYear()):g;for(j+='<select class="ui-datepicker-year" onchange="DP_jQuery_'+y+".datepicker._selectMonthYear('#"+a.id+"', this, 'Y');\" onclick=\"DP_jQuery_"+y+".datepicker._clickMonthYear('#"+a.id+"');\">";b<=g;b++){j+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>"}j+="</select>"}j+=this._get(a,"yearSuffix");if(u){j+=(h||!(k&&l)?"&#xa0;":"")+o}j+="</div>";return j},_adjustInstDate:function(a,b,c){var e=a.drawYear+(c=="Y"?b:0),f=a.drawMonth+(c=="M"?b:0);b=Math.min(a.selectedDay,this._getDaysInMonth(e,f))+(c=="D"?b:0);e=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(e,f,b)));a.selectedDay=e.getDate();a.drawMonth=a.selectedMonth=e.getMonth();a.drawYear=a.selectedYear=e.getFullYear();if(c=="M"||c=="Y"){this._notifyChange(a)}},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");b=c&&b<c?c:b;return b=a&&b>a?a:b},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");if(b){b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])}},_getNumberOfMonths:function(a){a=this._get(a,"numberOfMonths");return a==null?[1,1]:typeof a=="number"?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,e){var f=this._getNumberOfMonths(a);c=this._daylightSavingAdjust(new Date(c,e+(b<0?b:f[0]*f[1]),1));b<0&&c.setDate(this._getDaysInMonth(c.getFullYear(),c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min");a=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!a||b.getTime()<=a.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");b=typeof b!="string"?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,e){if(!b){a.currentDay=a.selectedDay;a.currentMonth=a.selectedMonth;a.currentYear=a.selectedYear}b=b?typeof b=="object"?b:this._daylightSavingAdjust(new Date(e,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!d.datepicker.initialized){d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv);d.datepicker.initialized=true}var b=Array.prototype.slice.call(arguments,1);if(typeof a=="string"&&(a=="isDisabled"||a=="getDate"||a=="widget")){return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))}if(a=="option"&&arguments.length==2&&typeof arguments[1]=="string"){return d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b))}return this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new L;d.datepicker.initialized=false;d.datepicker.uuid=(new Date).getTime();d.datepicker.version="1.8.4";window["DP_jQuery_"+y]=d})(jQuery);(function(a,d){a.widget("ui.progressbar",{options:{value:0},min:0,max:100,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.max,"aria-valuenow":this._value()});this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element);this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow");this.valueDiv.remove();a.Widget.prototype.destroy.apply(this,arguments)},value:function(b){if(b===d){return this._value()}this._setOption("value",b);return this},_setOption:function(c,b){if(c==="value"){this.options.value=b;this._refreshValue();this._trigger("change")}a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var b=this.options.value;if(typeof b!=="number"){b=0}return Math.min(this.max,Math.max(this.min,b))},_refreshValue:function(){var b=this.value();this.valueDiv.toggleClass("ui-corner-right",b===this.max).width(b+"%");this.element.attr("aria-valuenow",b)}});a.extend(a.ui.progressbar,{version:"1.8.4"})})(jQuery);jQuery.effects||function(v,e){function q(f){var j;if(f&&f.constructor==Array&&f.length==3){return f}if(j=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(f)){return[parseInt(j[1],10),parseInt(j[2],10),parseInt(j[3],10)]}if(j=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(f)){return[parseFloat(j[1])*2.55,parseFloat(j[2])*2.55,parseFloat(j[3])*2.55]}if(j=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(f)){return[parseInt(j[1],16),parseInt(j[2],16),parseInt(j[3],16)]}if(j=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(f)){return[parseInt(j[1]+j[1],16),parseInt(j[2]+j[2],16),parseInt(j[3]+j[3],16)]}if(/rgba\(0, 0, 0, 0\)/.exec(f)){return u.transparent}return u[v.trim(f).toLowerCase()]}function a(j,k){var f;do{f=v.curCSS(j,k);if(f!=""&&f!="transparent"||v.nodeName(j,"body")){break}k="backgroundColor"}while(j=j.parentNode);return q(f)}function h(){var l=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,m={},k,f;if(l&&l.length&&l[0]&&l[l[0]]){for(var j=l.length;j--;){k=l[j];if(typeof l[k]=="string"){f=k.replace(/\-(\w)/g,function(n,o){return o.toUpperCase()});m[f]=l[k]}}}else{for(k in l){if(typeof l[k]==="string"){m[k]=l[k]}}}return m}function i(j){var k,f;for(k in j){f=j[k];if(f==null||v.isFunction(f)||k in b||/scrollbar/.test(k)||!/color/i.test(k)&&isNaN(parseFloat(f))){delete j[k]}}return j}function d(k,l){var j={_:0},f;for(f in l){if(k[f]!=l[f]){j[f]=l[f]}}return j}function g(k,l,j,f){if(typeof k=="object"){f=l;j=null;l=k;k=l.effect}if(v.isFunction(l)){f=l;j=null;l={}}if(typeof l=="number"||v.fx.speeds[l]){f=j;j=l;l={}}if(v.isFunction(j)){f=j;j=null}l=l||{};j=j||l.duration;j=v.fx.off?0:typeof j=="number"?j:v.fx.speeds[j]||v.fx.speeds._default;f=f||l.complete;return[k,l,j,f]}v.effects={};v.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","color","outlineColor"],function(f,j){v.fx.step[j]=function(k){if(!k.colorInit){k.start=a(k.elem,j);k.end=q(k.end);k.colorInit=true}k.elem.style[j]="rgb("+Math.max(Math.min(parseInt(k.pos*(k.end[0]-k.start[0])+k.start[0],10),255),0)+","+Math.max(Math.min(parseInt(k.pos*(k.end[1]-k.start[1])+k.start[1],10),255),0)+","+Math.max(Math.min(parseInt(k.pos*(k.end[2]-k.start[2])+k.start[2],10),255),0)+")"}});var u={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},c=["add","remove","toggle"],b={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};v.effects.animateClass=function(k,l,j,f){if(v.isFunction(j)){f=j;j=null}return this.each(function(){var o=v(this),m=o.attr("style")||" ",n=i(h.call(this)),p,r=o.attr("className");v.each(c,function(w,s){k[s]&&o[s+"Class"](k[s])});p=i(h.call(this));o.attr("className",r);o.animate(d(n,p),l,j,function(){v.each(c,function(w,s){k[s]&&o[s+"Class"](k[s])});if(typeof o.attr("style")=="object"){o.attr("style").cssText="";o.attr("style").cssText=m}else{o.attr("style",m)}f&&f.apply(this,arguments)})})};v.fn.extend({_addClass:v.fn.addClass,addClass:function(k,l,j,f){return l?v.effects.animateClass.apply(this,[{add:k},l,j,f]):this._addClass(k)},_removeClass:v.fn.removeClass,removeClass:function(k,l,j,f){return l?v.effects.animateClass.apply(this,[{remove:k},l,j,f]):this._removeClass(k)},_toggleClass:v.fn.toggleClass,toggleClass:function(l,m,k,f,j){return typeof m=="boolean"||m===e?k?v.effects.animateClass.apply(this,[m?{add:l}:{remove:l},k,f,j]):this._toggleClass(l,m):v.effects.animateClass.apply(this,[{toggle:l},m,k,f])},switchClass:function(l,m,k,f,j){return v.effects.animateClass.apply(this,[{add:m,remove:l},k,f,j])}});v.extend(v.effects,{version:"1.8.4",save:function(j,k){for(var f=0;f<k.length;f++){k[f]!==null&&j.data("ec.storage."+k[f],j[0].style[k[f]])}},restore:function(j,k){for(var f=0;f<k.length;f++){k[f]!==null&&j.css(k[f],j.data("ec.storage."+k[f]))}},setMode:function(f,j){if(j=="toggle"){j=f.is(":hidden")?"show":"hide"}return j},getBaseline:function(j,k){var f;switch(j[0]){case"top":f=0;break;case"middle":f=0.5;break;case"bottom":f=1;break;default:f=j[0]/k.height}switch(j[1]){case"left":j=0;break;case"center":j=0.5;break;case"right":j=1;break;default:j=j[1]/k.width}return{x:j,y:f}},createWrapper:function(j){if(j.parent().is(".ui-effects-wrapper")){return j.parent()}var k={width:j.outerWidth(true),height:j.outerHeight(true),"float":j.css("float")},f=v("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0});j.wrap(f);f=j.parent();if(j.css("position")=="static"){f.css({position:"relative"});j.css({position:"relative"})}else{v.extend(k,{position:j.css("position"),zIndex:j.css("z-index")});v.each(["top","left","bottom","right"],function(l,m){k[m]=j.css(m);if(isNaN(parseInt(k[m],10))){k[m]="auto"}});j.css({position:"relative",top:0,left:0})}return f.css(k).show()},removeWrapper:function(f){if(f.parent().is(".ui-effects-wrapper")){return f.parent().replaceWith(f)}return f},setTransition:function(k,l,j,f){f=f||{};v.each(l,function(n,m){unit=k.cssUnit(m);if(unit[0]>0){f[m]=unit[0]*j+unit[1]}});return f}});v.fn.extend({effect:function(j){var k=g.apply(this,arguments);k={options:k[1],duration:k[2],callback:k[3]};var f=v.effects[j];return f&&!v.fx.off?f.call(this,k):this},_show:v.fn.show,show:function(f){if(!f||typeof f=="number"||v.fx.speeds[f]){return this._show.apply(this,arguments)}else{var j=g.apply(this,arguments);j[1].mode="show";return this.effect.apply(this,j)}},_hide:v.fn.hide,hide:function(f){if(!f||typeof f=="number"||v.fx.speeds[f]){return this._hide.apply(this,arguments)}else{var j=g.apply(this,arguments);j[1].mode="hide";return this.effect.apply(this,j)}},__toggle:v.fn.toggle,toggle:function(f){if(!f||typeof f=="number"||v.fx.speeds[f]||typeof f=="boolean"||v.isFunction(f)){return this.__toggle.apply(this,arguments)}else{var j=g.apply(this,arguments);j[1].mode="toggle";return this.effect.apply(this,j)}},cssUnit:function(j){var k=this.css(j),f=[];v.each(["em","px","%","pt"],function(l,m){if(k.indexOf(m)>0){f=[parseFloat(k),m]}});return f}});v.easing.jswing=v.easing.swing;v.extend(v.easing,{def:"easeOutQuad",swing:function(l,m,k,f,j){return v.easing[v.easing.def](l,m,k,f,j)},easeInQuad:function(l,m,k,f,j){return f*(m/=j)*m+k},easeOutQuad:function(l,m,k,f,j){return -f*(m/=j)*(m-2)+k},easeInOutQuad:function(l,m,k,f,j){if((m/=j/2)<1){return f/2*m*m+k}return -f/2*(--m*(m-2)-1)+k},easeInCubic:function(l,m,k,f,j){return f*(m/=j)*m*m+k},easeOutCubic:function(l,m,k,f,j){return f*((m=m/j-1)*m*m+1)+k},easeInOutCubic:function(l,m,k,f,j){if((m/=j/2)<1){return f/2*m*m*m+k}return f/2*((m-=2)*m*m+2)+k},easeInQuart:function(l,m,k,f,j){return f*(m/=j)*m*m*m+k},easeOutQuart:function(l,m,k,f,j){return -f*((m=m/j-1)*m*m*m-1)+k},easeInOutQuart:function(l,m,k,f,j){if((m/=j/2)<1){return f/2*m*m*m*m+k}return -f/2*((m-=2)*m*m*m-2)+k},easeInQuint:function(l,m,k,f,j){return f*(m/=j)*m*m*m*m+k},easeOutQuint:function(l,m,k,f,j){return f*((m=m/j-1)*m*m*m*m+1)+k},easeInOutQuint:function(l,m,k,f,j){if((m/=j/2)<1){return f/2*m*m*m*m*m+k}return f/2*((m-=2)*m*m*m*m+2)+k},easeInSine:function(l,m,k,f,j){return -f*Math.cos(m/j*(Math.PI/2))+f+k},easeOutSine:function(l,m,k,f,j){return f*Math.sin(m/j*(Math.PI/2))+k},easeInOutSine:function(l,m,k,f,j){return -f/2*(Math.cos(Math.PI*m/j)-1)+k},easeInExpo:function(l,m,k,f,j){return m==0?k:f*Math.pow(2,10*(m/j-1))+k},easeOutExpo:function(l,m,k,f,j){return m==j?k+f:f*(-Math.pow(2,-10*m/j)+1)+k},easeInOutExpo:function(l,m,k,f,j){if(m==0){return k}if(m==j){return k+f}if((m/=j/2)<1){return f/2*Math.pow(2,10*(m-1))+k}return f/2*(-Math.pow(2,-10*--m)+2)+k},easeInCirc:function(l,m,k,f,j){return -f*(Math.sqrt(1-(m/=j)*m)-1)+k},easeOutCirc:function(l,m,k,f,j){return f*Math.sqrt(1-(m=m/j-1)*m)+k},easeInOutCirc:function(l,m,k,f,j){if((m/=j/2)<1){return -f/2*(Math.sqrt(1-m*m)-1)+k}return f/2*(Math.sqrt(1-(m-=2)*m)+1)+k},easeInElastic:function(n,o,m,j,k){n=1.70158;var f=0,l=j;if(o==0){return m}if((o/=k)==1){return m+j}f||(f=k*0.3);if(l<Math.abs(j)){l=j;n=f/4}else{n=f/(2*Math.PI)*Math.asin(j/l)}return -(l*Math.pow(2,10*(o-=1))*Math.sin((o*k-n)*2*Math.PI/f))+m},easeOutElastic:function(n,o,m,j,k){n=1.70158;var f=0,l=j;if(o==0){return m}if((o/=k)==1){return m+j}f||(f=k*0.3);if(l<Math.abs(j)){l=j;n=f/4}else{n=f/(2*Math.PI)*Math.asin(j/l)}return l*Math.pow(2,-10*o)*Math.sin((o*k-n)*2*Math.PI/f)+j+m},easeInOutElastic:function(n,o,m,j,k){n=1.70158;var f=0,l=j;if(o==0){return m}if((o/=k/2)==2){return m+j}f||(f=k*0.3*1.5);if(l<Math.abs(j)){l=j;n=f/4}else{n=f/(2*Math.PI)*Math.asin(j/l)}if(o<1){return -0.5*l*Math.pow(2,10*(o-=1))*Math.sin((o*k-n)*2*Math.PI/f)+m}return l*Math.pow(2,-10*(o-=1))*Math.sin((o*k-n)*2*Math.PI/f)*0.5+j+m},easeInBack:function(m,n,l,j,k,f){if(f==e){f=1.70158}return j*(n/=k)*n*((f+1)*n-f)+l},easeOutBack:function(m,n,l,j,k,f){if(f==e){f=1.70158}return j*((n=n/k-1)*n*((f+1)*n+f)+1)+l},easeInOutBack:function(m,n,l,j,k,f){if(f==e){f=1.70158}if((n/=k/2)<1){return j/2*n*n*(((f*=1.525)+1)*n-f)+l}return j/2*((n-=2)*n*(((f*=1.525)+1)*n+f)+2)+l},easeInBounce:function(l,m,k,f,j){return f-v.easing.easeOutBounce(l,j-m,0,f,j)+k},easeOutBounce:function(l,m,k,f,j){return(m/=j)<1/2.75?f*7.5625*m*m+k:m<2/2.75?f*(7.5625*(m-=1.5/2.75)*m+0.75)+k:m<2.5/2.75?f*(7.5625*(m-=2.25/2.75)*m+0.9375)+k:f*(7.5625*(m-=2.625/2.75)*m+0.984375)+k},easeInOutBounce:function(l,m,k,f,j){if(m<j/2){return v.easing.easeInBounce(l,m*2,0,f,j)*0.5+k}return v.easing.easeOutBounce(l,m*2-j,0,f,j)*0.5+f*0.5+k}})}(jQuery);(function(a){a.effects.blind=function(b){return this.queue(function(){var n=a(this),c=["position","top","left"],o=a.effects.setMode(n,b.options.mode||"hide"),j=b.options.direction||"vertical";a.effects.save(n,c);n.show();var k=a.effects.createWrapper(n).css({overflow:"hidden"}),l=j=="vertical"?"height":"width";j=j=="vertical"?k.height():k.width();o=="show"&&k.css(l,0);var m={};m[l]=o=="show"?j:0;k.animate(m,b.duration,b.options.easing,function(){o=="hide"&&n.hide();a.effects.restore(n,c);a.effects.removeWrapper(n);b.callback&&b.callback.apply(n[0],arguments);n.dequeue()})})}})(jQuery);(function(a){a.effects.bounce=function(c){return this.queue(function(){var s=a(this),p=["position","top","left"],n=a.effects.setMode(s,c.options.mode||"effect"),w=c.options.direction||"up",r=c.options.distance||20,q=c.options.times||5,o=c.duration||250;/show|hide/.test(n)&&p.push("opacity");a.effects.save(s,p);s.show();a.effects.createWrapper(s);var u=w=="up"||w=="down"?"top":"left";w=w=="up"||w=="left"?"pos":"neg";r=c.options.distance||(u=="top"?s.outerHeight({margin:true})/3:s.outerWidth({margin:true})/3);if(n=="show"){s.css("opacity",0).css(u,w=="pos"?-r:r)}if(n=="hide"){r/=q*2}n!="hide"&&q--;if(n=="show"){var v={opacity:1};v[u]=(w=="pos"?"+=":"-=")+r;s.animate(v,o/2,c.options.easing);r/=2;q--}for(v=0;v<q;v++){var b={},e={};b[u]=(w=="pos"?"-=":"+=")+r;e[u]=(w=="pos"?"+=":"-=")+r;s.animate(b,o/2,c.options.easing).animate(e,o/2,c.options.easing);r=n=="hide"?r*2:r/2}if(n=="hide"){v={opacity:0};v[u]=(w=="pos"?"-=":"+=")+r;s.animate(v,o/2,c.options.easing,function(){s.hide();a.effects.restore(s,p);a.effects.removeWrapper(s);c.callback&&c.callback.apply(this,arguments)})}else{b={};e={};b[u]=(w=="pos"?"-=":"+=")+r;e[u]=(w=="pos"?"+=":"-=")+r;s.animate(b,o/2,c.options.easing).animate(e,o/2,c.options.easing,function(){a.effects.restore(s,p);a.effects.removeWrapper(s);c.callback&&c.callback.apply(this,arguments)})}s.queue("fx",function(){s.dequeue()});s.dequeue()})}})(jQuery);(function(a){a.effects.clip=function(b){return this.queue(function(){var n=a(this),j=["position","top","left","height","width"],o=a.effects.setMode(n,b.options.mode||"hide"),m=b.options.direction||"vertical";a.effects.save(n,j);n.show();var l=a.effects.createWrapper(n).css({overflow:"hidden"});l=n[0].tagName=="IMG"?l:n;var e={size:m=="vertical"?"height":"width",position:m=="vertical"?"top":"left"};m=m=="vertical"?l.height():l.width();if(o=="show"){l.css(e.size,0);l.css(e.position,m/2)}var k={};k[e.size]=o=="show"?m:0;k[e.position]=o=="show"?0:m/2;l.animate(k,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){o=="hide"&&n.hide();a.effects.restore(n,j);a.effects.removeWrapper(n);b.callback&&b.callback.apply(n[0],arguments);n.dequeue()}})})}})(jQuery);(function(a){a.effects.drop=function(b){return this.queue(function(){var m=a(this),c=["position","top","left","opacity"],j=a.effects.setMode(m,b.options.mode||"hide"),l=b.options.direction||"left";a.effects.save(m,c);m.show();a.effects.createWrapper(m);var n=l=="up"||l=="down"?"top":"left";l=l=="up"||l=="left"?"pos":"neg";var k=b.options.distance||(n=="top"?m.outerHeight({margin:true})/2:m.outerWidth({margin:true})/2);if(j=="show"){m.css("opacity",0).css(n,l=="pos"?-k:k)}var d={opacity:j=="show"?1:0};d[n]=(j=="show"?l=="pos"?"+=":"-=":l=="pos"?"-=":"+=")+k;m.animate(d,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){j=="hide"&&m.hide();a.effects.restore(m,c);a.effects.removeWrapper(m);b.callback&&b.callback.apply(this,arguments);m.dequeue()}})})}})(jQuery);(function(a){a.effects.explode=function(b){return this.queue(function(){var n=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,q=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode=b.options.mode=="toggle"?a(this).is(":visible")?"hide":"show":b.options.mode;var m=a(this).show().css("visibility","hidden"),p=m.offset();p.top-=parseInt(m.css("marginTop"),10)||0;p.left-=parseInt(m.css("marginLeft"),10)||0;for(var k=m.outerWidth(true),l=m.outerHeight(true),j=0;j<n;j++){for(var o=0;o<q;o++){m.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*(k/q),top:-j*(l/n)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:k/q,height:l/n,left:p.left+o*(k/q)+(b.options.mode=="show"?(o-Math.floor(q/2))*(k/q):0),top:p.top+j*(l/n)+(b.options.mode=="show"?(j-Math.floor(n/2))*(l/n):0),opacity:b.options.mode=="show"?0:1}).animate({left:p.left+o*(k/q)+(b.options.mode=="show"?0:(o-Math.floor(q/2))*(k/q)),top:p.top+j*(l/n)+(b.options.mode=="show"?0:(j-Math.floor(n/2))*(l/n)),opacity:b.options.mode=="show"?1:0},b.duration||500)}}setTimeout(function(){b.options.mode=="show"?m.css({visibility:"visible"}):m.css({visibility:"visible"}).hide();b.callback&&b.callback.apply(m[0]);m.dequeue();a("div.ui-effects-explode").remove()},b.duration||500)})}})(jQuery);(function(a){a.effects.fold=function(b){return this.queue(function(){var r=a(this),m=["position","top","left"],v=a.effects.setMode(r,b.options.mode||"hide"),u=b.options.size||15,o=!!b.options.horizFirst,n=b.duration?b.duration/2:a.fx.speeds._default/2;a.effects.save(r,m);r.show();var c=a.effects.createWrapper(r).css({overflow:"hidden"}),s=v=="show"!=o,q=s?["width","height"]:["height","width"];s=s?[c.width(),c.height()]:[c.height(),c.width()];var p=/([0-9]+)%/.exec(u);if(p){u=parseInt(p[1],10)/100*s[v=="hide"?0:1]}if(v=="show"){c.css(o?{height:0,width:u}:{height:u,width:0})}o={};p={};o[q[0]]=v=="show"?s[0]:u;p[q[1]]=v=="show"?s[1]:0;c.animate(o,n,b.options.easing).animate(p,n,b.options.easing,function(){v=="hide"&&r.hide();a.effects.restore(r,m);a.effects.removeWrapper(r);b.callback&&b.callback.apply(r[0],arguments);r.dequeue()})})}})(jQuery);(function(a){a.effects.highlight=function(b){return this.queue(function(){var h=a(this),g=["backgroundImage","backgroundColor","opacity"],c=a.effects.setMode(h,b.options.mode||"show"),i={backgroundColor:h.css("backgroundColor")};if(c=="hide"){i.opacity=0}a.effects.save(h,g);h.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(i,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){c=="hide"&&h.hide();a.effects.restore(h,g);c=="show"&&!a.support.opacity&&this.style.removeAttribute("filter");b.callback&&b.callback.apply(this,arguments);h.dequeue()}})})}})(jQuery);(function(a){a.effects.pulsate=function(b){return this.queue(function(){var d=a(this),e=a.effects.setMode(d,b.options.mode||"show");times=(b.options.times||5)*2-1;duration=b.duration?b.duration/2:a.fx.speeds._default/2;isVisible=d.is(":visible");animateTo=0;if(!isVisible){d.css("opacity",0).show();animateTo=1}if(e=="hide"&&isVisible||e=="show"&&!isVisible){times--}for(e=0;e<times;e++){d.animate({opacity:animateTo},duration,b.options.easing);animateTo=(animateTo+1)%2}d.animate({opacity:animateTo},duration,b.options.easing,function(){animateTo==0&&d.hide();b.callback&&b.callback.apply(this,arguments)});d.queue("fx",function(){d.dequeue()}).dequeue()})}})(jQuery);(function(a){a.effects.puff=function(c){return this.queue(function(){var k=a(this),f=a.effects.setMode(k,c.options.mode||"hide"),b=parseInt(c.options.percent,10)||150,d=b/100,j={height:k.height(),width:k.width()};a.extend(c.options,{fade:true,mode:f,percent:f=="hide"?b:100,from:f=="hide"?j:{height:j.height*d,width:j.width*d}});k.effect("scale",c.options,c.duration,c.callback);k.dequeue()})};a.effects.scale=function(c){return this.queue(function(){var l=a(this),j=a.extend(true,{},c.options),b=a.effects.setMode(l,c.options.mode||"effect"),d=parseInt(c.options.percent,10)||(parseInt(c.options.percent,10)==0?0:b=="hide"?0:100),k=c.options.direction||"both",m=c.options.origin;if(b!="effect"){j.origin=m||["middle","center"];j.restore=true}m={height:l.height(),width:l.width()};l.from=c.options.from||(b=="show"?{height:0,width:0}:m);d={y:k!="horizontal"?d/100:1,x:k!="vertical"?d/100:1};l.to={height:m.height*d.y,width:m.width*d.x};if(c.options.fade){if(b=="show"){l.from.opacity=0;l.to.opacity=1}if(b=="hide"){l.from.opacity=1;l.to.opacity=0}}j.from=l.from;j.to=l.to;j.mode=b;l.effect("size",j,c.duration,c.callback);l.dequeue()})};a.effects.size=function(c){return this.queue(function(){var y=a(this),b=["position","top","left","width","height","overflow","opacity"],A=["position","top","left","overflow","opacity"],s=["width","height","overflow"],u=["fontSize"],z=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],r=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],o=a.effects.setMode(y,c.options.mode||"effect"),v=c.options.restore||false,x=c.options.scale||"both",w=c.options.origin,q={height:y.height(),width:y.width()};y.from=c.options.from||q;y.to=c.options.to||q;if(w){w=a.effects.getBaseline(w,q);y.from.top=(q.height-y.from.height)*w.y;y.from.left=(q.width-y.from.width)*w.x;y.to.top=(q.height-y.to.height)*w.y;y.to.left=(q.width-y.to.width)*w.x}var B={from:{y:y.from.height/q.height,x:y.from.width/q.width},to:{y:y.to.height/q.height,x:y.to.width/q.width}};if(x=="box"||x=="both"){if(B.from.y!=B.to.y){b=b.concat(z);y.from=a.effects.setTransition(y,z,B.from.y,y.from);y.to=a.effects.setTransition(y,z,B.to.y,y.to)}if(B.from.x!=B.to.x){b=b.concat(r);y.from=a.effects.setTransition(y,r,B.from.x,y.from);y.to=a.effects.setTransition(y,r,B.to.x,y.to)}}if(x=="content"||x=="both"){if(B.from.y!=B.to.y){b=b.concat(u);y.from=a.effects.setTransition(y,u,B.from.y,y.from);y.to=a.effects.setTransition(y,u,B.to.y,y.to)}}a.effects.save(y,v?b:A);y.show();a.effects.createWrapper(y);y.css("overflow","hidden").css(y.from);if(x=="content"||x=="both"){z=z.concat(["marginTop","marginBottom"]).concat(u);r=r.concat(["marginLeft","marginRight"]);s=b.concat(z).concat(r);y.find("*[width]").each(function(){child=a(this);v&&a.effects.save(child,s);var d={height:child.height(),width:child.width()};child.from={height:d.height*B.from.y,width:d.width*B.from.x};child.to={height:d.height*B.to.y,width:d.width*B.to.x};if(B.from.y!=B.to.y){child.from=a.effects.setTransition(child,z,B.from.y,child.from);child.to=a.effects.setTransition(child,z,B.to.y,child.to)}if(B.from.x!=B.to.x){child.from=a.effects.setTransition(child,r,B.from.x,child.from);child.to=a.effects.setTransition(child,r,B.to.x,child.to)}child.css(child.from);child.animate(child.to,c.duration,c.options.easing,function(){v&&a.effects.restore(child,s)})})}y.animate(y.to,{queue:false,duration:c.duration,easing:c.options.easing,complete:function(){y.to.opacity===0&&y.css("opacity",y.from.opacity);o=="hide"&&y.hide();a.effects.restore(y,v?b:A);a.effects.removeWrapper(y);c.callback&&c.callback.apply(this,arguments);y.dequeue()}})})}})(jQuery);(function(a){a.effects.shake=function(b){return this.queue(function(){var r=a(this),m=["position","top","left"];a.effects.setMode(r,b.options.mode||"effect");var s=b.options.direction||"left",d=b.options.distance||20,q=b.options.times||3,u=b.duration||b.options.duration||140;a.effects.save(r,m);r.show();a.effects.createWrapper(r);var v=s=="up"||s=="down"?"top":"left",o=s=="up"||s=="left"?"pos":"neg";s={};var p={},n={};s[v]=(o=="pos"?"-=":"+=")+d;p[v]=(o=="pos"?"+=":"-=")+d*2;n[v]=(o=="pos"?"-=":"+=")+d*2;r.animate(s,u,b.options.easing);for(d=1;d<q;d++){r.animate(p,u,b.options.easing).animate(n,u,b.options.easing)}r.animate(p,u,b.options.easing).animate(s,u/2,b.options.easing,function(){a.effects.restore(r,m);a.effects.removeWrapper(r);b.callback&&b.callback.apply(this,arguments)});r.queue("fx",function(){r.dequeue()});r.dequeue()})}})(jQuery);(function(a){a.effects.slide=function(b){return this.queue(function(){var m=a(this),c=["position","top","left"],j=a.effects.setMode(m,b.options.mode||"show"),l=b.options.direction||"left";a.effects.save(m,c);m.show();a.effects.createWrapper(m).css({overflow:"hidden"});var n=l=="up"||l=="down"?"top":"left";l=l=="up"||l=="left"?"pos":"neg";var k=b.options.distance||(n=="top"?m.outerHeight({margin:true}):m.outerWidth({margin:true}));if(j=="show"){m.css(n,l=="pos"?-k:k)}var d={};d[n]=(j=="show"?l=="pos"?"+=":"-=":l=="pos"?"-=":"+=")+k;m.animate(d,{queue:false,duration:b.duration,easing:b.options.easing,complete:function(){j=="hide"&&m.hide();a.effects.restore(m,c);a.effects.removeWrapper(m);b.callback&&b.callback.apply(this,arguments);m.dequeue()}})})}})(jQuery);(function(a){a.effects.transfer=function(b){return this.queue(function(){var g=a(this),h=a(b.options.to),e=h.offset();h={top:e.top,left:e.left,height:h.innerHeight(),width:h.innerWidth()};e=g.offset();var i=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:e.top,left:e.left,height:g.innerHeight(),width:g.innerWidth(),position:"absolute"}).animate(h,b.duration,b.options.easing,function(){i.remove();b.callback&&b.callback.apply(g[0],arguments);g.dequeue()})})}})(jQuery);if(typeof window.console!=="object"||typeof window.console.emulated==="undefined"){if(typeof window.console!=="object"||!(typeof window.console.log==="function"||typeof window.console.log==="object")){window.console={};window.console.log=window.console.debug=window.console.warn=window.console.trace=function(){};window.console.error=function(){for(var b="An error has occured. More information will be available in the console log.",d=0;d<arguments.length;++d){if(typeof arguments[d]!=="string"){break}b+="\n"+arguments[d]}if(typeof Error!=="undefined"){throw Error(b)}else{throw b}}}else{if(typeof window.console.debug==="undefined"){window.console.debug=function(){for(var b=["console.debug:"],d=0;d<arguments.length;d++){b.push(arguments[d])}window.console.log.apply(window.console,b)}}if(typeof window.console.warn==="undefined"){window.console.warn=function(){for(var b=["console.warn:"],d=0;d<arguments.length;d++){b.push(arguments[d])}window.console.log.apply(window.console,b)}}if(typeof window.console.error==="undefined"){window.console.error=function(){for(var b=["console.error"],d=0;d<arguments.length;d++){b.push(arguments[d])}window.console.log.apply(window.console,b)}}if(typeof window.console.trace==="undefined"){window.console.trace=function(){window.console.error.apply(window.console,["console.trace does not exist"])}}}window.console.emulated=true}(function(a){if(a.History){window.console.warn("$.History has already been defined...")}else{a.History={options:{debug:false},state:"",$window:null,$iframe:null,handlers:{generic:[],specific:{}},extractHash:function(b){return b.replace(/^[^#]*#/,"").replace(/^#+|#+$/,"")},getState:function(){return a.History.state},setState:function(d){var c=a.History;d=c.extractHash(d);c.state=d;return c.state},getHash:function(){return a.History.extractHash(window.location.hash||location.hash)},setHash:function(b){b=a.History.extractHash(b);if(typeof window.location.hash!=="undefined"){if(window.location.hash!==b){window.location.hash=b}}else{if(location.hash!==b){location.hash=b}}return b},go:function(g){var e=a.History;g=e.extractHash(g);var c=e.getHash(),h=e.getState();if(g!==c){e.setHash(g)}else{g!==h&&e.setState(g);e.trigger()}return true},hashchange:function(){var d=a.History,c=d.getHash();d.go(c);return true},bind:function(f,e){var c=a.History;if(e){if(typeof c.handlers.specific[f]==="undefined"){c.handlers.specific[f]=[]}c.handlers.specific[f].push(e)}else{e=f;c.handlers.generic.push(e)}return true},trigger:function(k){var j=a.History;if(typeof k==="undefined"){k=j.getState()}var h,l,c,i;if(typeof j.handlers.specific[k]!=="undefined"){i=j.handlers.specific[k];h=0;for(l=i.length;h<l;++h){c=i[h];c(k)}}i=j.handlers.generic;h=0;for(l=i.length;h<l;++h){c=i[h];c(k)}return true},construct:function(){var b=a.History;a(document).ready(function(){b.domReady()});return true},configure:function(d){var c=a.History;c.options=a.extend(c.options,d);return true},domReadied:false,domReady:function(){var b=a.History;if(!b.domRedied){b.domRedied=true;b.$window=a(window);b.$window.bind("hashchange",this.hashchange);setTimeout(b.hashchangeLoader,200);return true}},nativeSupport:function(k){k=k||a.browser;var j=k.version,h=parseInt(j,10),l=j.split(/[^0-9]/g);j=parseInt(l[0],10);var c=parseInt(l[1],10);l=parseInt(l[2],10);var i=false;if((k.msie||0)&&h>=8){i=true}else{if((k.webkit||0)&&h>=528){i=true}else{if(k.mozilla){if(j>1){i=true}else{if(j===1){if(c>9){i=true}else{if(c===9){if(l>=2){i=true}}}}}}else{if(k.opera){if(j>10){i=true}else{if(j===10){if(c>=60){i=true}}}}}}}return i},hashchangeLoader:function(){var f=a.History;if(f.nativeSupport()){f.getHash()&&f.$window.trigger("hashchange")}else{var e;if(a.browser.msie){f.$iframe=a('<iframe id="jquery-history-iframe" style="display: none;"></$iframe>').prependTo(document.body)[0];f.$iframe.contentWindow.document.open();f.$iframe.contentWindow.document.close();var c=false;e=function(){var h=f.getHash(),b=f.getState(),d=f.extractHash(f.$iframe.contentWindow.document.location.hash);if(b!==h){if(!c){f.$iframe.contentWindow.document.open();f.$iframe.contentWindow.document.close();f.$iframe.contentWindow.document.location.hash=h}c=false;f.$window.trigger("hashchange")}else{if(b!==d){c=true;f.setHash(d)}}}}else{e=function(){var b=f.getHash();f.getState()!==b&&f.$window.trigger("hashchange")}}setInterval(e,200)}return true}};a.History.construct()}})(jQuery);var StateAction=false;var dontFit=false;function state(a,b){a(b);saveState();return false}function state2(a,b,c){a(b,c);saveState();return false}function InitState(){if(window.location.hash!=""){StateAction=true;var a=window.location.href;a=a.substring(a.indexOf("#")+1);restoreState(a)}$.History.bind(function(b){if(!StateAction){b=window.location.href;b=b.substring(b.indexOf("#")+1);restoreState(b)}StateAction=false})}function saveState(){if(StateAction){setTimeout(saveState,100);return}StateAction=true;$.History.go(BuildStateLink())}function restoreState(f){var p=GetStoredLevel();var s=GetStoredLatLng();var n=GLOBAL_SEARCH_FUNCTION;var l="";var m=new Array();dontFit=false;if(f!=""){var k=new Array();var b=new Array();var c=f.split("&");for(var e=0;e<c.length;e++){var d=c[e].split("=");k.push(d[0]);b.push(d[1])}for(var e=0;e<k.length;e++){switch(k[e]){case"t":n=b[e];break;case"l":p=parseInt(b[e]);dontFit=true;break;case"kv":var g=b[e].split(",");s=new VLatLng(parseFloat(g[0]),parseFloat(g[1]));dontFit=true;break;case"fp":var q=b[e].split(";");var r=q[0].split("|");var j=r.length;for(var h=0;h<j;h++){var o=r[h].split(",");m[h]=new VLatLng(parseFloat(o[0]),parseFloat(o[1]))}PathOptions.Vehicle=parseInt(q[1]);PathOptions.Alley=parseInt(q[2]);if(PathOptions.Alley==1){checkAlley()}else{uncheckAlley()}changeVehicle(PathOptions.Vehicle);break;case"sk":l=Utf8Decode(b[e]);break;case"st":current_searchtype=parseInt(b[e]);SetSearchType(current_searchtype);break;case"bh":viewBlockHouse();break;case"mi":ChangeFunctionType(GLOBAL_MYMAP_FUNCTION);if(checkLogin()){bSendMyMap=parseInt(b[e]);loadMyMap()}else{bSendMyMap=true;loadMyMapCoor(parseInt(b[e]))}dontFit=true;break}}}if(l==""){$("#mapinput").val(inputTextHelp);ClearSearchResult()}else{if(l!=$("#mapinput").val()&&l!=inputTextHelp){$("#mapinput").val(l);FindPlace(1)}}ClearPathResult();if(m.length>0){for(var h=0;h<m.length;h++){if(h==0){AddPlaceFromFind(m[h])}else{AddPlaceToFind(m[h],"",false)}}if(m.length>1){FindAllPath()}}ChangeFunctionType(n);if(dontFit){map.setCenter(s,p)}setTimeout(function(){dontFit=false},2000)}function Node(f,a,b,h,c,g,d,i,e){this.id=f;this.parentid=a;this.name=b;this.url=h;this.title=c;this.target=g;this.icon=d;this.iconOpen=i;this.isOpen=e||false;this.isSelected=false;this._ls=false;this._hc=false;this._ai=0;this.parent}function dTree(b,a){this.imgDir="vbdScript/dtree/index.html";if(a!=this.imgDir&&a!=null){this.imgDir=a}this.config={target:null,folderLinks:true,useSelection:true,useCookies:true,useLines:true,useIcons:true,useStatusText:false,closeSameLevel:false,inOrder:false};this.icon={root:this.imgDir+"img/base.gif",folder:this.imgDir+"img/folder.gif",folderOpen:this.imgDir+"img/folderopen.gif",node:this.imgDir+"img/page.gif",empty:this.imgDir+"img/empty.gif",line:this.imgDir+"img/line.gif",join:this.imgDir+"img/join.gif",joinBottom:this.imgDir+"img/joinbottom.gif",plus:this.imgDir+"img/plus.gif",plusBottom:this.imgDir+"img/plusbottom.gif",minus:this.imgDir+"img/minus.gif",minusBottom:this.imgDir+"img/minusbottom.gif",nlPlus:this.imgDir+"img/nolinesparentlus.gif",nlMinus:this.imgDir+"img/nolines_minus.gif"};this.obj=b;this.Nodes=[];this.aIndent=[];this.root=new Node(-1);this.selectedNode=null;this.selectedFound=false;this.completed=false}dTree.prototype.add=function(f,a,b,h,c,g,d,i,e){this.Nodes[this.Nodes.length]=new Node(f,a,b,h,c,g,d,i,e)};dTree.prototype.openAll=function(){this.openAll(true)};dTree.prototype.closeAll=function(){this.openAll(false)};dTree.prototype.toString=function(){var a='<div class="dtree">\n';if(document.getElementById){if(this.config.useCookies){this.selectedNode=this.getSelected()}a+=this.addNode(this.root)}else{a+="Browser not supported."}a+="</div>";if(!this.selectedFound){this.selectedNode=null}this.completed=true;return a};dTree.prototype.addNode=function(c){var d="";var b=0;if(this.config.inOrder){b=c._ai}for(b;b<this.Nodes.length;b++){if(this.Nodes[b].parentid==c.id){var a=this.Nodes[b];a.parent=c;a._ai=b;this.setCS(a);if(!a.target&&this.config.target){a.target=this.config.target}if(a._hc&&!a.isOpen&&this.config.useCookies){a.isOpen=this.isOpen(a.id)}if(!this.config.folderLinks&&a._hc){a.url=null}if(this.config.useSelection&&a._ai==this.selectedNode&&!this.selectedFound){a.isSelected=true;this.selectedNode=b;this.selectedFound=true}d+=this.node(a,b);if(a._ls){break}}}return d};dTree.prototype.node=function(c,b){var a="";if(this.config.useIcons){if(!c.icon){c.icon=(this.root.id==c.parentid)?this.icon.root:((c._hc)?this.icon.folder:this.icon.node)}if(!c.iconOpen){c.iconOpen=(c._hc)?this.icon.folderOpen:this.icon.node}if(this.root.id==c.parentid){c.icon=this.icon.root;c.iconOpen=this.icon.root}a=((c.isOpen)?c.iconOpen:c.icon)}var d='<div class="dTreeNode">';if(c._ai==0){d='<div class="dTreeNav" style="background-image: url('+a+'); background-repeat: no-repeat;" >'}if(c.url){d+='<a id="s'+this.obj+b+'" class="'+((this.config.useSelection)?((c.isSelected?"nodeSel":"node")):"node")+'" href="'+c.url+'"';if(c.title){d+=' title="'+c.title+'"'}if(c.target){d+=' target="'+c.target+'"'}if(this.config.useStatusText){d+=" onmouseover=\"window.status='"+c.name+"';return true;\" onmouseout=\"window.status='';return true;\" "}else{d+=" onmouseover=\"window.status='';return true;\" onmouseout=\"window.status='';return true;\" "}if(this.config.useSelection&&((c._hc&&this.config.folderLinks)||!c._hc)){d+=' onclick="javascript: '+this.obj+".s("+b+');"'}d+=">"}else{if((!this.config.folderLinks||!c.url)&&c._hc&&c.parentid!=this.root.id){d+='<a href="javascript: '+this.obj+".o("+b+');" class="node">'}}d+=c.name;if(c.url||((!this.config.folderLinks||!c.url)&&c._hc)){d+="</a>"}d+="</div>";if(c._hc){d+='<div id="d'+this.obj+b+'" class="clip" style="display:'+((this.root.id==c.parentid||c.isOpen)?"block":"none")+';">';d+=this.addNode(c);d+="</div>"}this.aIndent.pop();return d};dTree.prototype.indent=function(c,a){var d="";if(this.root.id!=c.parentid){for(var b=0;b<this.aIndent.length;b++){d+='<img src="'+((this.aIndent[b]==1&&this.config.useLines)?this.icon.line:this.icon.empty)+'" alt="" />'}(c._ls)?this.aIndent.push(0):this.aIndent.push(1);if(c._hc){d+='<a href="javascript: '+this.obj+".o("+a+');"><img id="j'+this.obj+a+'" src="';if(!this.config.useLines){d+=(c.isOpen)?this.icon.nlMinus:this.icon.nlPlus}else{d+=((c.isOpen)?((c._ls&&this.config.useLines)?this.icon.minusBottom:this.icon.minus):((c._ls&&this.config.useLines)?this.icon.plusBottom:this.icon.plus))}d+='" alt="" /></a>'}else{d+='<img src="'+((this.config.useLines)?((c._ls)?this.icon.joinBottom:this.icon.join):this.icon.empty)+'" alt="" />'}}return d};dTree.prototype.setCS=function(c){var a;for(var b=0;b<this.Nodes.length;b++){if(this.Nodes[b].parentid==c.id){c._hc=true}if(this.Nodes[b].parentid==c.parentid){a=this.Nodes[b].id}}if(a==c.id){c._ls=true}};dTree.prototype.DeleteNode=function(a){this.DeleteAllChild(a);for(var b=0;b<this.Nodes.length;b++){if(this.Nodes[b].id==a){RemoveElement(this.Nodes,b);break}}};dTree.prototype.ChangeName=function(a,c){for(var b=0;b<this.Nodes.length;b++){if(this.Nodes[b].id==a){this.Nodes[b].name=c}}};dTree.prototype.AddNew=function(a,b,c){this.add(a,b,c,"javascript:this.SelectNode("+a+")");this.openTo(a,true,true)};function RemoveElement(c,b){for(var a=b;a<c.length-1;a++){c[a]=c[a+1]}c.pop()}dTree.prototype.DeleteAllChild=function(a){for(var b=0;b<this.Nodes.length;b++){if(this.Nodes[b].parentid==a){RemoveElement(this.Nodes,b)}}};dTree.prototype.GetIndexOfarr=function(b){for(var a=0;a<this.Nodes.length;a++){if(this.Nodes[a].id==b){return a}}return -1};dTree.prototype.ChildsCount=function(c){var a=0;for(var b=0;b<this.Nodes.length;b++){if(this.Nodes[b].parentid==c){a++}}return a};dTree.prototype.isOpening=function(b){var a=this.getNode(b);return a.isOpen};dTree.prototype.ToggleNode=function(b){var a=this.getNode(b);this.o(a._ai)};dTree.prototype.getNode=function(b){for(var a=0;a<this.Nodes.length;a++){if(this.Nodes[a].id==b){return this.Nodes[a]}}};dTree.prototype.getSelected=function(){var a=this.getCookie("cs"+this.obj);return(a)?a:null};dTree.prototype.s=function(b){if(!this.config.useSelection){return}var a=this.Nodes[b];if(a._hc&&!this.config.folderLinks){return}if(this.selectedNode!=b){if(this.selectedNode||this.selectedNode==0){eOld=document.getElementById("s"+this.obj+this.selectedNode);eOld.className="node";this.Nodes[this.selectedNode].isSelected=false}eNew=document.getElementById("s"+this.obj+b);if(eNew==null){return}eNew.className="nodeSel";a.isSelected=true;this.selectedNode=b;if(this.config.useCookies){this.setCookie("cs"+this.obj,a.id)}}};dTree.prototype.o=function(b){var a=this.Nodes[b];this.nodeStatus(!a.isOpen,b,a._ls);a.isOpen=!a.isOpen;if(this.config.closeSameLevel){this.closeLevel(a)}if(this.config.useCookies){this.updateCookie()}};dTree.prototype.openAll=function(b){for(var a=0;a<this.Nodes.length;a++){if(this.Nodes[a]._hc&&this.Nodes[a].parentid!=this.root.id){this.nodeStatus(b,a,this.Nodes[a]._ls);this.Nodes[a].isOpen=b}}if(this.config.useCookies){this.updateCookie()}};dTree.prototype.openTo=function(b,e,a){if(!a){for(var c=0;c<this.Nodes.length;c++){if(this.Nodes[c].id==b){b=c;break}}}var d=this.Nodes[b];if(d.parentid==this.root.id||!d.parent){return}d.isOpen=true;d.isSelected=e;if(this.completed&&d._hc){this.nodeStatus(true,d._ai,d._ls)}if(this.completed&&e){this.s(d._ai)}else{if(e){this._sn=d._ai}}this.openTo(d.parent._ai,false,true)};dTree.prototype.closeLevel=function(b){for(var a=0;a<this.Nodes.length;a++){if(this.Nodes[a].parentid==b.parentid&&this.Nodes[a].id!=b.id&&this.Nodes[a]._hc){this.nodeStatus(false,a,this.Nodes[a]._ls);this.Nodes[a].isOpen=false;this.closeAllChildren(this.Nodes[a])}}};dTree.prototype.closeAllChildren=function(b){for(var a=0;a<this.Nodes.length;a++){if(this.Nodes[a].parentid==b.id&&this.Nodes[a]._hc){if(this.Nodes[a].isOpen){this.nodeStatus(false,a,this.Nodes[a]._ls)}this.Nodes[a].isOpen=false;this.closeAllChildren(this.Nodes[a])}}};dTree.prototype.nodeStatus=function(b,c,a){eDiv=document.getElementById("d"+this.obj+c);eJoin=document.getElementById("j"+this.obj+c);if(this.config.useIcons){eIcon=document.getElementById("i"+this.obj+c);eIcon.src=(b)?this.Nodes[c].iconOpen:this.Nodes[c].icon}eJoin.src=(this.config.useLines)?((b)?((a)?this.icon.minusBottom:this.icon.minus):((a)?this.icon.plusBottom:this.icon.plus)):((b)?this.icon.nlMinus:this.icon.nlPlus);eDiv.style.display=(b)?"block":"none"};dTree.prototype.clearCookie=function(){var b=new Date();var a=new Date(b.getTime()-1000*60*60*24);this.setCookie("co"+this.obj,"cookieValue",a);this.setCookie("cs"+this.obj,"cookieValue",a)};dTree.prototype.setCookie=function(c,a,f,b,e,d){document.cookie=escape(c)+"="+escape(a)+(f?"; expires="+f.toGMTString():"")+(b?"; path="+b:"")+(e?"; domain="+e:"")+(d?"; secure":"")};dTree.prototype.getCookie=function(d){var b="";var c=document.cookie.indexOf(escape(d)+"=");if(c!=-1){var a=c+(escape(d)+"=").length;var e=document.cookie.indexOf(";",a);if(e!=-1){b=unescape(document.cookie.substring(a,e))}else{b=unescape(document.cookie.substring(a))}}return(b)};dTree.prototype.updateCookie=function(){var b="";for(var a=0;a<this.Nodes.length;a++){if(this.Nodes[a].isOpen&&this.Nodes[a].parentid!=this.root.id){if(b){b+="."}b+=this.Nodes[a].id}}this.setCookie("co"+this.obj,b)};dTree.prototype.isOpen=function(c){var a=this.getCookie("co"+this.obj).split(".");for(var b=0;b<a.length;b++){if(a[b]==c){return true}}return false};if(!Array.prototype.push){Array.prototype.push=function arrayparentush(){for(var a=0;a<arguments.length;a++){this[this.length]=arguments[a]}return this.length}}if(!Array.prototype.pop){Array.prototype.pop=function arrayparentop(){lastElement=this[this.length-1];this.length=Math.max(this.length-1,0);return lastElement}}function ContextMenu(g,b){this.latlng=g;this.arrCMItem=b;this.initialize=d;this.remove=a;this.copy=f;this.redraw=c;function d(j){var n=document.createElement("div");this.id=j.id+"_ContextMenu";n.id=j.id+"_ContextMenu";n.style.position="absolute";n.style.width="120px";var k=0;var m='<ul class="MapOptions" style="width:120px;">';for(var h=0;h<this.arrCMItem.length;h++){if(this.arrCMItem[h][1]=="-"){m+='<li class="separate"></li>';k+=5}else{var l="";if(h==this.arrCMItem.length-1){l='style="padding-bottom:4px" class="botradius"'}else{if(h==0){l='style="padding-top:4px" class="topradius"'}}m+="<li "+l+' >                                <a class="'+this.arrCMItem[h][0]+'"><span>'+this.arrCMItem[h][1]+"</span></a>                            </li>";k+=20}}m+="</ul>";this.width=120;this.height=k+10;n.style.height=this.height+"px";n.innerHTML=m;j.getContainer().appendChild(n);for(var h=0;h<this.arrCMItem.length;h++){e(this.arrCMItem[h],this.latlng)}this.mapObj=j;this.divObj=n;this.redraw();return n}function e(i,h){if(i[1]!="-"&&i[2]!=null){$(("."+i[0])).click(function(){i[2](h)})}}function a(){this.divObj.parentNode.removeChild(this.divObj)}function f(){return new ContextMenu(this.latlng)}function c(){var h=this.mapObj.fromLatLngToContainerPixel(this.latlng);var j=this.mapObj.getContainer();var i=h.x;var k=h.y;if(i+this.width>=parseInt(j.style.width)){i-=this.width}if(k+this.height>=parseInt(j.style.height)){k-=this.height}this.divObj.style.left=i+"px";this.divObj.style.top=k+"px"}}function MapToolbar(a){this.initialize=b;function b(c){$(".MT-ranhgioi")[0].onclick=function(){$(this).toggleClass("MT-ranhgioi-active");TreeBinding.ViewGeoChange()};$(".MT-giaothong")[0].onclick=TogglePopupTraffic;$(".MT-dokhoangcach")[0].onclick=function(){if($(this).hasClass("MT-dokhoangcach-active")){$(this).removeClass("MT-dokhoangcach-active");ClosePopupDistance()}else{$(this).addClass("MT-dokhoangcach-active");measureDistance()}}}}var arrSearchMapResult=new Array();var arrMorePlaceResult=new Array();var arrFavPlace=new Array();var current_index=0;var currentSelectedResAB_Id=-1;var currentSelectedResAB_Lat=-1;var currentSelectedResAB_Lng=-1;var currentSelectedResAB_Text="";var plHighlight=null;var KeySearch;var TypeSearch;var selectedResAB_Text="";var prev_selectedResAB_Text="";var isFirstSearch=false;var isBindingMorePlace=false;var searchFromExample=false;var infoWindow;function doSearch(b){if(b!=null){$("#mapinput").val(b)}var a=$("#mapinput").val();if(KeySearch==a){return false}a=RemoveHTMLTag(a.replace(/[']/g,"\\'"));switch(a){case inputTextHelp:inputTextClick();document.getElementById("mapinput").focus();return false;break;case"-vbd:newlogo":$("a","#logo")[0].className="logo-new";return false;break;case"-vbd:oldlogo":$("a","#logo")[0].className="logo-old";return false;break;case"-vbd:newlocation":ShowNewestUserAddPlace();return false;break}isFirstSearch=true;TypeSearch=0;FindPlace(1);return false}function GetSearchType(){return(document.getElementById("searchoptions")!=null)?document.getElementById("searchoptions").value:0}function SetSearchType(a){if(document.getElementById("searchoptions")==null){return}if(a==null||a==undefined){return}document.getElementById("searchoptions").selectedIndex=a;ControlEvent.OnChangeSearchOption(document.getElementById("searchoptions"))}function FindPlace(v,x,c,l,e,r,y,i,f){ping_connection();if(isSearching==true){return}var d,B,o,k,j,g;if(f==null){f=TypeSearch}SetSearchType(f);current_searchtype=GetSearchType();f=current_searchtype;ChangeFunctionType(GLOBAL_SEARCH_FUNCTION);showBusyDiv("","searchresult_div");if(x==null){c="";l="";x=document.getElementById("mapinput").value}document.title=x+" - Vietbando";if(x!=null&&x.length>0){if(e==null||r==null||y==null||i==null){var m=map.getBounds();o=m.getNorthWest().lng();k=m.getNorthWest().lat();j=m.getSouthEast().lng();g=m.getSouthEast().lat();if(k>g){var p=k;k=g;g=p}}else{o=e;k=r;j=y;g=i}var h=map.getLevel();x=x.replace(/\[QUOTE]/g,'"');FillQueryToTextBox(x);if(isFirstSearch){l="$$"+TreeBinding.GetMapPath(", ",false)}searchFromExample=false;var b=SearchWhere.toLowerCase();if(b.indexOf("đoạn đường ")==0||b.indexOf("doan duong ")==0){var q=100;b=b.substring(11).replace(/^\s+|\s+$/g,"");var a=GetSectionId(b[0]);SearchNearByPolylineExt(a,SearchWhat,"",1,q);return}if(b.indexOf("gần ")==0||b.indexOf("gan ")==0){b=b.substring(4).replace(/^\s+|\s+$/g,"");var n=b.indexOf(",");var A=b.substring(0,n);var z=b.substring(n+1);var w=2000;if(n>=0){A=b.substring(0,n);z=b.substring(n+1);z=z.replace(/^\s+|\s+$/g,"")}else{A=b;z=""}SearchNearByPointExt(A,z,"","",SearchWhat,"",v,w);return}if(f==1||isPhoneNumber(x)){AJLocationSearch.SearchResult(x,c,l,v,h,o,k,j,g,1,PhoneBinding);return}if(x.indexOf("dt:")==0){x=x.replace("dt:","");var u=x.split(",");if(u[0]==""){return}if(u[1]==null){u[1]=""}AJLocationSearch.SearchUniversityExam(u[0],u[1],v,function(s){PlaceBinding(s);$(".searchinwrap","#TablePlace").remove()});return}AJLocationSearch.SearchResult(x,c,l,v,h,o,k,j,g,f,PlaceBinding);isSearching=true;return}else{hideBusyDiv()}}var connection_timeout=15*60*1000;var last_ping=0;function ping_connection(){var a=new Date();if(a-last_ping>connection_timeout){last_ping=a;AJLocationSearch.ping_connection("1")}}function FillQueryToTextBox(a){a=a.replace(" ở gần "," gần ");a=a.replace(" o gan "," gần ");a=a.replace(" ở trên đoạn đường "," | đoạn đường ");a=a.replace(" o tren doan duong "," | đoạn đường ");a=a.replace(" trên đoạn đường "," | đoạn đường ");a=a.replace(" tren doan duong "," | đoạn đường ");a=a.replace(" ở "," | ở ");a=a.replace(", gần "," gần ");a=a.replace(" gần "," | gần ");a=a.replace(", gan "," gan ");a=a.replace(" gan "," | gan ");var b=a.indexOf("|");if(b!=-1){SearchWhat=Global.TrimSpace(a.substring(0,b));SearchWhere=Global.TrimSpace(a.substring(b+2))}else{if(a.indexOf("$ ")==0){SearchWhere=Global.TrimSpace(a.substring(2));SearchWhat=""}else{SearchWhat=Global.TrimSpace(a);SearchWhere=""}}}var arrLogoPath;var PointArray=new Array();var PAGE_ROWS=10;var PAGE_SHOW=7;var DELTA_FROM_CENTER=3;var dsResultData;function SearchPage(g,a,f,d,c,e,b){FindPlace(g,a,f,d,c,e,b)}function ClearSearchMapResult(){unloadAddPlaceFunc();CloseSendMap();for(var a=0;a<arrSearchMapResult.length;a++){map.removeOverlay(arrSearchMapResult[a])}arrSearchMapResult=new Array();resultActive=-1;if(isFirstSearch){isBindingMorePlace=false;for(var a=0;a<arrMorePlaceResult.length;a++){map.removeOverlay(arrMorePlaceResult[a])}arrMorePlaceResult=new Array();isFirstSearch=false}}function ClearSearchResult(){if(arrMapPath!=null&&arrMapPath.length==0){arrMapPath=new Array();arrMapPath[0]=new Array(0,"Việt Nam","VN")}ClearSearchMapResult();isBindingMorePlace=false;KeySearch="";$("#mapinput").val(inputTextHelp);for(var a=0;a<arrMorePlaceResult.length;a++){map.removeOverlay(arrMorePlaceResult[a])}arrMorePlaceResult=new Array();if(plHighlight!=null){map.removeOverlay(plHighlight);plHighlight=null}LoadPlaceTool();Show_Map_Help()}function ClearPathResult(){$("#clearPathResultText").hide();$("#FindPathStatus").html();isFinding=false;isChanging=false;for(var a=arrDes.length-1;a>=0;a--){RemovePlace(a+",0",1)}AJLocationSearch.RemoveDirectionPlaces(ClientID,-1,-1);for(var a=0;a<arrFinish.length;a++){map.removeOverlay(arrFinish[a])}arrFinish=new Array();firstStart=true;clearArrows()}function loadMapMoreInfo(d,b){var f=new VMap(document.getElementById("InfoMap"));f.addControl(new VSmallZoomControl());f.setCenter(new VLatLng(d,b),10);var a=new VIcon("images/mymap_icon/point_7.gif");a.iconSize=new VSize(32,32);var c=new VMarkerOptions(a);var e=new VMarker(new VLatLng(d,b),c);f.addOverlay(e)}function InfoWindowWithSearchNearBy(w,k,a){var u=w.Name;var g=w.Address;var c=w.ShortComment;var B=w.Logo;var z=w.Website;var o=w.VietbandoID;var v=w.Picture;var e=w.Tel;var f=w.Table;var p=w.RootID;var l=w.StoreID;var D=w.URLFriendly;var E=w.GUID;var r=(f!="ds_store")?"ip":"ds";var h=w.Latitude;var n=w.Longitude;var j="From here",m="To here",s="Search nearby",d="Detail...",C="Search inside",i="Full view",A="Mark this location",q="Add content";if(isLang("vi")){j="Từ đây";m="Đến đây";d="Xem chi tiết...";s="Tìm xung quanh";C="Tìm bên trong";i="Xem dạng lớn";A="Đánh dấu điểm này";q="Thêm nội dung"}var y=new Array();y[y.length]='<div class="MiniPopup">';y[y.length]='<span class="Title">'+u+"</span>";y[y.length]='<div class="CommonFunction" style="padding-left:0px">';var G="Find business near by this point",b="Eg: Hotel",F="Radius(m)",x="Find";if(isLang("vi")){G="Tìm dịch vụ ở gần vị trí này";b="VD: Khách sạn";F="Bán kính(m)";x="Tìm"}y[y.length]='<span class="subTit"><b>'+G+'</b></span>                        <ol class="SearchNearBy">                            <li><span class="ServiceTit">'+b+'</span><span class="RadiusTit">'+F+'</span></li>                            <li>                                <input id="searchnearbypoint" class="ServiceInput" onkeydown="return SearchNearByPointEnter(event,\''+u+"','"+g+"','"+n+"','"+h+'\', null,null)" type="text"/>                                <input id="searchnearbypoint_radius" class="RadiusInput" value="2000" onkeydown="return SearchNearByPointEnter(event,\''+u+"','"+g+"','"+n+"','"+h+'\', null,null)" type="text"/>					            <a class="backbtn" onclick="SearchNearByPointExt(\''+u+"','"+g+"','"+n+"','"+h+"', null,'', 1,null)\"><span>"+x+'</span></a>                            </li>                        </ol>                        <a class="backbtn backbtn2" id="pback'+k+'"><span class="flnk">« Quay lại</span></a>';y[y.length]="</div>";return y.join("")}var centerObjectNearbyTemp;var centerObjectNearby;function ViewDetailCurrentLevelWithSearchNearBy(b,d,a){if(d==null){return}var e;centerObjectNearbyTemp=b;var f=new VLatLng(b.Latitude,b.Longitude);if(b.Address!=b.Name&&b.Address!=""){e=b.Name+", "+b.Address}else{e=b.Name}var c=InfoWindowWithSearchNearBy(b,d,e);OpenInfowindow(c,d,a,f);setTimeout(function(){if(document.getElementById("searchnearbypoint")!=null){document.getElementById("searchnearbypoint").focus()}},500);document.getElementById("pback"+d).onclick=function(){switch(a){case"more":ShowLocationInfo(arrMorePlaceResult[d-1],arrMorePlaceResult[d-1].GUID,a);break;case"fav":ShowLocationInfo(arrFavPlace[d],arrFavPlace[d].GUID,a);break;case"poi":ShowLocationInfo(null,b.GUID,"poi",f);break;case"search":case null:ViewDetailCurrentLevel(b,d,a);break}}}function ResultViewDetailCurrentLevel(a){ViewDetailCurrentLevel(dsResultData.Tables[0].Rows[a-1],a,"search")}function ViewDetailCurrentLevel(f,d,a){var c=f.Name;var g=f.Address;var e=c;if(g!=c&&g!=""){e=c+", "+g}var b=BuildMiniPopupWindow(f,d-1,e,false);OpenInfowindow(b,d,a,new VLatLng(f.Latitude,f.Longitude));AtachEventMiniPopup(f,d,e,a);AddLogClick(f,2)}function OpenInfowindow(b,c,a,d){switch(a){case"more":arrMorePlaceResult[c-1].openInfoWindow(b);break;case"fav":arrFavPlace[c].openInfoWindow(b);break;case"poi":map.openInfoWindow(d,b);break;case"search":case null:arrSearchMapResult[c-1].openInfoWindow(b);HightlightActiveItem(c);break}}function ResultViewOnMap(a){map.zoomToLevel(17);ResultViewDetailCurrentLevel(a)}function ViewOnMap(c,b,a){map.zoomToLevel(17);ViewDetailCurrentLevel(c,b,a)}var nearbymarker=null;function ShowSearchNearByLngLat(g){var f=g.toUrlValue();var h=f.indexOf(",");var a=f.substring(0,h);var b=f.substring(h+1);var c='<div class="MiniPopup">';if(isLang("vi")){c+='<span class="Title">Tìm dịch vụ ở gần vị trí này</span>                <ol class="SearchNearBy">                    <li><span class="ServiceTit">Vd: khách sạn</span><span class="RadiusTit">Bán kính (m)</span></li>                    <li>                        <input id="searchnearbypoint" class="ServiceInput" onkeydown="return SearchNearByPointEnter(event,\''+f+"','','"+b+"','"+a+'\', null,null)" type="text"/>                        <input id="searchnearbypoint_radius" class="RadiusInput" value="2000" onkeydown="return SearchNearByPointEnter(event,\''+f+"','','"+b+"','"+a+'\', null,null)" type="text"/>						<a class="backbtn" onclick="SearchNearByPointExt(\''+f+"','','"+b+"','"+a+"',null,'',1,null)\"><span>Tìm</span></a>                    </li>                </ol>"}else{c+='<span class="Title">Find business near by this point</span>                <ol class="SearchNearBy">                    <li><span class="ServiceTit">Eg: Hotel</span><span class="RadiusTit">Radius (m)</span></li>                    <li>                        <input id="searchnearbypoint" class="ServiceInput" onkeydown="return SearchNearByPointEnter(event,\''+f+"','','"+b+"','"+a+'\', null,null)" type="text"/>                        <input id="searchnearbypoint_radius" class="RadiusInput" value="2000" onkeydown="return SearchNearByPointEnter(event,\''+f+"','','"+b+"','"+a+'\', null,null)" type="text"/>						<a class="backbtn" onclick="SearchNearByPointExt(\''+f+"','','"+b+"','"+a+"',null,'',1,null)\"><span>Search</span></a>                    </li>                </ol>"}c+="</div>";map.closeInfoWindow();var e=new VIcon("images/mymap_icon/point-1.gif",new VSize(32,32));var d=new VMarkerOptions(e,function(){return 1});nearbymarker=new VMarker(g,d);map.addOverlay(nearbymarker);nearbymarker.openInfoWindow(c);setTimeout(function(){if(document.getElementById("searchnearbypoint")!=null){document.getElementById("searchnearbypoint").focus()}},500)}function ResultFromHere(a,b){FromHere(dsResultData.Tables[0].Rows[a-1],b)}function ResultToHere(a,b){ToHere(dsResultData.Tables[0].Rows[a-1],b)}function ResultSearchNearBy(a){ViewDetailCurrentLevelWithSearchNearBy(dsResultData.Tables[0].Rows[a-1],a,"search")}function FromHere(a,b){b=RemoveHTMLTag(b);AddPlaceFromFind(new VLatLng(a.Latitude,a.Longitude),b);AddLogClick(a,0)}function ToHere(a,b){b=RemoveHTMLTag(b);AddPlaceToFind(new VLatLng(a.Latitude,a.Longitude),b);AddLogClick(a,1)}function Show_Map_Help(){$("#topLeftSearchResult").css("display","none");document.getElementById("searchresult_div").innerHTML=welcomeHTML}function MapExampleClick(c){var a=RemoveHTMLTag(document.getElementById(c).innerHTML);a=a.replace("amp;","").replace("&gt;",">");var b=c.split(",");SetSearchType(b[1]);if(b[2]=="undefined"||b[2]==null){document.getElementById("mapinput").value=a;searchFromExample=true;UnLoadHelp();doSearch()}else{SearchPlace(b[2],a,1)}}function AddLogClick(a,b){}function LoadPlaceTool(){$("#topLeftSearchResult").css("display","")}var tree=null;var PreviousSelectNode;var arrMapPath=new Array();arrMapPath[0]=new Array(0,"Việt Nam","VN");var bViewGeo=false;var IDRegionBorder=-1;TreeBinding={TreeElement:null,MapPathElement:null,ShowTreeFunc:null,HideTreeFunc:null,InitTree:function(b,c,a,d){TreeBinding.TreeElement=document.getElementById(b);TreeBinding.MapPathElement=document.getElementById(c);TreeBinding.ShowTreeFunc=a;TreeBinding.HideTreeFunc=d;TreeBinding.BindTree()},GetMapPath:function(f,d,e){var c="";if(d&&arrMapPath!=null&&arrMapPath.length>0){c='<div id="map_path_div" style="display:inline;white-space:normal;">';for(var b=0;b<arrMapPath.length;b++){var a=f;if(b==0){a=""}if(!e&&b==arrMapPath.length-1){c+=a+"<span>"+arrMapPath[b][1]+"</span>"}else{c+=a+'<a onclick="TreeBinding.TreeClick(event,'+arrMapPath[b][0]+",'"+arrMapPath[b][1]+"','"+arrMapPath[b][2]+"')\">"+arrMapPath[b][1]+"</a>"}}c+="</div>"}else{if(arrMapPath!=null&&isFirstSearch&&NeedFilter&&!searchFromExample){for(var b=1;b<arrMapPath.length;b++){if(arrMapPath[b][2]!="L"){c=f+arrMapPath[b][1]+c}}}}return c},GetNavigatorPath:function(f,d,e){var c="";if(d&&arrMapPath!=null&&arrMapPath.length>0){c='<div id="map_path_div" style="display:inline;white-space:normal;">';for(var b=0;b<arrMapPath.length;b++){var a=f;if(b==0){a=""}c+=a+'<a onclick="TreeBinding.NavigatorClick(event,'+arrMapPath[b][0]+",'"+arrMapPath[b][1]+"','"+arrMapPath[b][2]+"')\">"+arrMapPath[b][1]+"</a>"}c+="</div>"}else{if(arrMapPath!=null&&isFirstSearch&&NeedFilter&&!searchFromExample){for(var b=1;b<arrMapPath.length;b++){c=f+arrMapPath[b][1]+c}}}return c},ShowMapList:function(b,c,d,a){if(!TreeBinding.TreeShowed){TreeBinding.ShowTreeFunc();TreeBinding.TreeShowed=true}if(c=="D"||c=="P"||c=="VN"){TreeBinding.BindTree(b,false,c)}TreeBinding.ShowOnMap(b,c,d,a);TreeBinding.TreeElement.innerHTML='<div style="float:right"><a class="TreeClose" onclick="TreeBinding.HideMapList()">X</a></div><div style="padding:0px 10px 10px 10px">'+tree+"</div>"},HideMapList:function(){if(TreeBinding.TreeShowed){TreeBinding.HideTreeFunc();TreeBinding.TreeShowed=false}},ToogleListMap:function(b,c,d,a){if(TreeBinding.TreeShowed){TreeBinding.HideMapList()}else{TreeBinding.ShowMapList(b,c,d,a)}},AdjustNavigator:function(c,b,d){for(var a=0;a<arrMapPath.length;a++){if(arrMapPath[a][2]==d){arrMapPath.length=a;break}}arrMapPath[arrMapPath.length]=new Array(c,b,d)},TreeClick:function(e,d,c,b,f,a){TreeBinding.AdjustNavigator(d,c,b);if(b=="D"||b=="P"||b=="VN"){TreeBinding.BindTree(d,false,b)}else{TreeBinding.BindTree(d,false,"W");TreeBinding.HideMapList()}TreeBinding.ReloadTree();TreeBinding.ShowOnMap(d,b,f,a);TreeBinding.ReSearch()},NavigatorClick:function(e,d,c,b,f,a){TreeBinding.AdjustNavigator(d,c,b);if(tree!=null&&tree.Nodes.length>0&&tree.Nodes[0].id==d){TreeBinding.HideMapList()}if(b=="D"||b=="P"||b=="VN"){TreeBinding.BindTree(d,false,b)}TreeBinding.ReloadTree();TreeBinding.ShowOnMap(d,b,f,a);TreeBinding.ReSearch()},LoadTreeTo:function(a){if(a!=null){TreeBinding.TreeElement=document.getElementById(a)}TreeBinding.TreeElement.innerHTML='<div style="float:right"><a class="TreeClose" onclick="TreeBinding.HideMapList()">X</a></div><div style="padding:0px 10px 10px 10px">'+tree+"</div>";TreeBinding.TreeElement.scrollTop=0;$(".dTreeNode").mouseover(function(){$(this).addClass("dTreeNode-active")});$(".dTreeNode").mouseout(function(){$(this).removeClass("dTreeNode-active")})},ReloadTree:function(){if(TreeBinding.TreeElement==null){return}TreeBinding.TreeElement.innerHTML='<div style="float:right"><a class="TreeClose" onclick="TreeBinding.HideMapList()">X</a></div><div style="padding:0px 10px 10px 10px">'+tree+"</div>";TreeBinding.TreeElement.scrollTop=0;$(".dTreeNode").mouseover(function(){$(this).addClass("dTreeNode-active")});$(".dTreeNode").mouseout(function(){$(this).removeClass("dTreeNode-active")})},ResetTree:function(){TreeBinding.HideMapList();cID=0;cType="VN";cLatLng=CurrentCenter=null;removeArea();TreeBinding.AdjustNavigator(0,"Việt Nam","VN");TreeBinding.BindTree(0,false,"VN");TreeBinding.ReSearch()},ReSearch:function(){if(KeySearch!=""){doSearch()}},BindTree:function(e,b,c){TreeBinding.MapPathElement.innerHTML=TreeBinding.GetNavigatorPath(" > ",true,true);if(c=="VN"||c==null){$(".SWCloseArea").hide()}else{$(".SWCloseArea").show()}if(tree!=null&&tree.Nodes.length>0&&tree.Nodes[0].id==e){return}if(c=="W"){e=arrMapPath[arrMapPath.length-2][0]}var a=new dTree("tree");a.config.inOrder=true;a.config.useStatusText=true;a.icon.root="Resources/Contours/VietNam.png";var d=TreeBinding.GetMapPath(" > ",true,true);a.add(e,-1,d);TreeBinding.AddChilds(a,e);if(b){removeArea();removePosition()}if(a.ChildsCount(e)>0){tree=a}else{arrMapPath.length=arrMapPath.length-1}},AddChilds:function(h,f){var a=AJLocationSearch.GetChild(f).value;if(a==null||a.Rows.length==0){return}for(var g=0;g<a.Rows.length;g++){var c=a.Rows[g].Longitude;var b=a.Rows[g].Latitude;var e=a.Rows[g].NAME;var d=a.Rows[g].UniqueName;var j=a.Rows[g].TYPE;var k=a.Rows[g].ID;h.add(k,f,'<a style="background: url(Resources/Contours/'+d+'.png) no-repeat;" onclick="TreeBinding.TreeClick(event,'+k+",'"+e+"','"+j+"',"+b+","+c+')">'+e+"</a>","",e,"","","Resources/Contours/"+d+".png",h.icon.folderOpen,false)}},ShowOnMap:function(c,f,b,a){IDRegionBorder=c;if(f=="VN"||f=="NT"){cID=0;cType=f;cLatLng=null;CurrentCenter=cLatLng;removeArea();if(arrSearchMapResult==null||arrSearchMapResult.length==0){map.setCenter(new VLatLng(14.102783,109.649506),5)}return}cID=c;cType=f;cLatLng=new VLatLng(b,a);CurrentCenter=new VLatLng(b,a);if(f=="W"||f=="D"||f=="P"||f=="L"||f=="DC"||f=="UI"){removeArea();var j=AJLocationSearch.GetFitLevel(c,f,map.getSize().width,map.getSize().height).value;if(j!=null){var e=j[0];b=j[1];a=j[2];var h=j[3];var d=j[4];var i=j[5];var g=j[6];if(arrSearchMapResult==null||arrSearchMapResult.length==0){map.setCenter(new VLatLng(b,a),e+5)}if(bViewGeo){AJLocationSearch.GetAHGeometry(c,e,f,h,d,i,g,DrawGeometry)}}}},ZoomEnd:function(){removeArea();if(cLatLng!=null&&bViewGeo){var b=map.getLevel();var a=map.getDirectionBounds();AJLocationSearch.GetAHGeometry(cID,b,cType,a.getNorthWest().lng(),a.getNorthWest().lat(),a.getSouthEast().lng(),a.getSouthEast().lat(),DrawGeometry)}},bViewGeo:false,ViewGeoChange:function(){bViewGeo=!bViewGeo;if(bViewGeo){if(arrMapPath[arrMapPath.length-1][2]=="VN"){LoadTree()}TreeBinding.ShowOnMap(cID,cType)}else{map.resetSrcImgOverlay();removeArea()}}};var isRegionSelected=false;var pre=-1;var cur=-1;var cLatLng,cID,cType;var arrHightLight=new Array();function DrawGeometry(d){removeArea();var e=d.value;if(e==""){isRegionSelected=false;return}if(e==null){isRegionSelected=false;return}isRegionSelected=true;arrHightLight=new Array();var c=0.3;for(var a=0;a<e.length;a++){if(e[a]!=null&&e[a]!=""){var b=new VPolygon(e[a],"red",3,"#84C221",c,c);map.addOverlay(b);arrHightLight.push(b)}}}function removeArea(){if(arrHightLight!=null){for(var a=0;a<arrHightLight.length;a++){map.removeOverlay(arrHightLight[a])}arrHightLight=new Array()}}function removePosition(){if(arrSearchMapResult!=null){if(arrSearchMapResult.length==1){map.removeOverlay(arrSearchMapResult[0])}}arrSearchMapResult=new Array()}var NeedFilter=true;function FilterChange(a){NeedFilter=a}var ControlEvent={OnChangeSearchOption:function(a){}};var curHistory="";var skTitle="";function SendMap(){if($(".SendMapLinks-wrap").is(":visible")){$(".SendMapLinks-wrap").hide();$(".SendMap").removeClass("active");return}var b="Xem bản đồ lớn";if(isLang("en")){b="View Larger Map"}var a=BuildMapLink();var c="<iframe width='450' height='350' frameborder='0' scrolling='no' marginheight='0' marginwidth='0' src='"+a.replace("vbdMap.aspx","vbdEmbed.aspx")+"'></iframe><br/><small><a href='"+a+"' style='color:#D98923;'>"+b+"</a></small>";curHistory=a;$("#txtMapLink").val(a);$("#txtMapEmbed").val(c);a=escape(a);$(".shareFacebook")[0].href="http://www.facebook.com/share.php?u="+a+"&t="+skTitle;$(".shareTwitter")[0].href="http://twitter.com/home?status="+a;$(".shareYahooMess")[0].href="ymsgr:im?msg="+a;$(".shareDelicious")[0].href="http://delicious.com/save?url="+a+"&title="+skTitle;$(".shareDigg")[0].href="http://digg.com/submit?phase=2&url="+a+"&title="+skTitle;$(".shareZingme")[0].href="http://link.apps.zing.vn/pro/view/conn/share?u="+a+"&t="+skTitle;$(".shareLinkhay")[0].href="http://linkhay.com/submit?link_url="+a+"&link_title="+skTitle;$(".SendMapLinks-wrap").show();$(".SendMap").addClass("active");document.getElementById("txtMapLink").select()}function CloseSendMap(){$(".SendMapLinks-wrap").hide()}function BuildMapLink(a){return window.location.href}function BuildStateLink(){var a="";a+="t="+current_functype;var d=$("#mapinput").val();if(d!=null&&d!=inputTextHelp&&d!=""){a+="&sk="+URLEncode(d)}a+="&l="+map.getLevel();a+="&kv="+map.getCenter().toUrlValue();var c="";for(var b=0;b<arrDes.length;b++){c+=arrDes[b][0].getLatLng().toUrlValue();if(b<arrDes.length-1){c+="|"}}if(c!=""){a+="&fp="+c+";"+PathOptions.Vehicle+";"+PathOptions.Alley}if(arrBlockHouseObj.length>0){a+="&bh=1"}if(iMyMapOpening!=-1){a+="&mi="+dsMyMap.Tables[0].Rows[iMyMapOpening].MyMapID}return a}function PrintResult(){if(current_functype==GLOBAL_FINDPATH_FUNCTION){var r="";var b="";var n=map.getLevel();var d=map.getDirectionBounds();var e=0;var c=0;var o=0;var h=0;var p=0;var g=-1;var f="";for(var m=0;m<arrDes.length;m++){f+=$("input","#direction"+m).val()+"~"}f=f.substring(0,f.length-1).replace(/&/g,"!@");r="&TextName="+encodeURI(f);var k="";for(var l=0;l<arrDes.length;l++){for(var q=0;q<arrDes[l].length;q++){k+=arrDes[l][q].getPoint().lng()+","+arrDes[l][q].getPoint().lat()+","}if(l>0&&l<arrDes.length-1){b+=arrDes[l-1].length+","}}k=k.substring(0,k.length-1);var a="type=1&l="+(isLang("vi")?0:1)+"&FindString="+k+"&Vehicle="+PathOptions.Vehicle+"&Imode="+b.toString()+"&FindMode="+p+"&FindType="+g+"&Level="+n+"&Left="+d.getNorthWest().lng()+"&Top="+d.getNorthWest().lat()+"&Right="+d.getSouthEast().lng()+"&Bottom="+d.getSouthEast().lat()+"&Findopts="+e+"&Index="+c+"&Sub="+o+"&IsInsert="+h+"&Alley="+PathOptions.Alley+"&Block="+PathOptions.Block+"&Lat="+map.getCenter().lat()+"&Lng="+map.getCenter().lng()+""+r;window.open("/Maps/PrintMapResult.aspx?"+a)}else{var a="type=0&l="+map.getLevel()+"&kv="+map.getCenter().toUrlValue();window.open("/Maps/PrintMapResult.aspx?"+a)}}var bMeasureLine=false;var arrDrawingPtsML=null;var nDrawingPtsML=0;var arrMLObj=new Array();var nMLObj=0;var CurrentDistance=0;var TotalDistance=0;function ShowPopUpMyMapDistance(){TotalDistance=0;map.disableDoubleClickZoom();$("#lblCurDistance").html("0");$("#lblTotalDistance").html("0");$(".dokhoangcach").show()}function ClosePopupDistance(b){if(isMeasureDistance&&bMeasureLine){return}$(".dokhoangcach").hide();$(".MT-dokhoangcach").removeClass("MT-dokhoangcach-active");for(var a=0;a<nMLObj;a++){map.removeOverlay(arrMLObj[a])}map.enableDoubleClickZoom();isMeasureDistance=false;bMeasureLine=false;arrDrawingPtsML=null;nDrawingPtsML=0;arrMLObj=new Array();nMLObj=0;CurrentDistance=0;TotalDistance=0}function CalculateDistance(d,g){var a,b,j;var m;var c;var l;var n;var k;var f=d.lat();var e=d.lng();var i=g.lat();var h=g.lng();m=f*(Math.PI/180);c=e*(Math.PI/180);l=i*(Math.PI/180);n=h*(Math.PI/180);a=e-h;k=a*(Math.PI/180);j=Math.sin(m)*Math.sin(l)+Math.cos(m)*Math.cos(l)*Math.cos(k);j=Math.acos(j);b=j*180/Math.PI;b=b*60*1.1515;b=b*1.609344*1000;return Math.round(b)}var AP_CurObj=null;var AP_Name="";var AP_AddNumber="";var AP_AddStreet="";var AP_AddWard="";var AP_AddDistrict="";var AP_AddProvince="";var AP_Phone="";var AP_Note="";var AP_Coor="";var bIsPlaceAdding=false;function loadAddPlaceFunc(){if(!MembershipRequire()){return}ClearSearchResult();bIsPlaceAdding=true;var a="";if(isLang("vi")){a='<div class="MapHelp"><h3>Hướng dẫn thêm vị trí</h3>        <ul style="padding:8px 0 15px;"><li>Nhấp chuột trái lên bản đồ để thêm điểm. Hệ thống sẽ tự động điền các thành phần địa chỉ có thể dùm bạn.</li>        <li class="li2">Kéo marker <span class="pin-mymap"></span> đến vị trí bạn muốn trên bản đồ để thay đổi vị trí.</li>        <li>Nhập thông tin của vị trí và bấm vào nút Lưu.</li>        <li>Lưu ý: nếu vị trí có nhiều số điện thoại, bạn hãy nhập dấu " - " để phân cách và vui lòng nhập thông tin bằng tiếng Việt có dấu để việc tìm kiếm được chính xác.</li>        </ul>        <a class="backbtn" onclick="unloadAddPlaceFunc();"><span>« Quay lại</span></a></div>'}else{a='<div class="MapHelp"><h3>Add place help</h3>        <ul style="padding:8px 0 15px;"><li>Left-click on map to add a place. We will fill detected parts of address for you.</li>        <li class="li2">Drag marker <span class="pin-mymap"></span> on map to change the location of place.</li>        <li>Enter place\'s information and click Save.</li>        <li>Note: If the place have more than one phone number, use " - " sign to separate them.</li>        </ul>        <a class="backbtn" onclick="unloadAddPlaceFunc();"><span>« Back</span></a></div>'}document.getElementById("searchresult_div").innerHTML=a}function unloadAddPlaceFunc(a){bIsPlaceAdding=false;if(AP_CurObj!=null){map.removeOverlay(AP_CurObj);AP_CurObj=null}if(a){if(isLang("vi")){alert("Thêm vị trí thành công.\r\n\r\nCám ơn sự đóng góp của bạn.\r\nVị trí này sẽ phải chờ hệ thống của chúng tôi kiểm duyệt.\r\n\r\nTạm thời bạn chưa thể tìm thấy nó trên Vietbando.")}else{alert("Location added successfully. Thank for your contribution.\r\nThis location must be checked by our system.\r\nYou cannot find it now.")}}AP_Name="";AP_AddNumber="";AP_AddStreet="";AP_AddWard="";AP_AddDistrict="";AP_AddProvince="";AP_Phone="";AP_Note="";AP_Coor="";Show_Map_Help()}function AP_savePlace(){AP_Name=$("#txtAPName").val();AP_AddNumber=$("#txtAddNo").val();AP_AddStreet=$("#txtAddStreet").val();AP_Keyword=$("#txtVbdID").val();if(AP_Name!=""){if(AP_AddNumber=="Số nhà"||AP_AddNumber=="Addr No"){AP_AddNumber=""}var d=new RegExp(/^[A-Za-z0-9_]*$/g);if(AP_Keyword.length<6||AP_Keyword.length>50||!d.test(AP_Keyword)){if(isLang("vi")){$("#aperror").html("Vui lòng nhập VietbandoID từ 6-30 ký tự và chỉ chứa: (a-z A-Z 0-9).")}else{$("#aperror").html("Your VietbandoID must be 6-30 characters and only contains: (a-z A-Z 0-9).")}return}else{var c=AJLocationSearch.IsVBDIDAvailable(AP_Keyword).value;if(!c){if(isLang("vi")){$("#aperror").html("VietbandoID của bạn đã được dùng bởi người khác. Vui lòng chọn ID khác.")}else{$("#aperror").html("Your VietbandoID was taken by another user. Please try another.")}return}}AP_Phone="";if($("#loctype").val()=="biz"){AP_Phone=$("#txtPhone").val()}AP_Note=$("#txtNote").val();var b=AP_getObjCoor();var a=AJLocationSearch.AddPlace(AP_Name,AP_AddNumber,AP_AddStreet,AP_AddWard,AP_AddDistrict,AP_AddProvince,AP_Phone,AP_Note,b,AP_Keyword).value;if(!a){if(confirm("Dữ liệu thêm không thành công.\nĐã có lỗi trong quá trình thêm dữ liệu.\nBạn vui lòng liên hệ với người quản trị để thông báo về tình trạng này")==true){window.location.href="login.aspx"}return}map.closeInfoWindow();unloadAddPlaceFunc(true)}else{if(isLang("vi")){document.getElementById("aperror").innerHTML="Bạn vui lòng điền đầy đủ thông tin về vị trí."}else{document.getElementById("aperror").innerHTML="Please enter required information."}}}function AP_Cancel(){map.closeInfoWindow();unloadAddPlaceFunc(false)}var loctype="ips";function AP_showInfoWindow(){loctype=$("#loctype").val();var e="mymap_icon/point-1.gif";var k=LocationObjectHook(AP_CurObj.getPoint());AP_AddNumber="";AP_AddStreet=(k.szStreet!=null)?k.szStreet:"";AP_AddWard=(k.szWard!=null)?k.szWard:"";AP_AddDistrict=(k.szDistrict!=null)?k.szDistrict:"";AP_AddProvince=(k.szProvince!=null)?k.szProvince:"";var l=new Array();var p=new Array();var o=(isLang("vi"))?"Thêm mới vị trí":"Add new place";var j=(isLang("vi"))?"Tên vị trí":"Place name";var h=(isLang("vi"))?"Loại":"Type";var d=(isLang("vi"))?"Địa chỉ":"Address";var a=(isLang("vi"))?"Vị trí":"Location";var b=(isLang("vi"))?"Điện thoại":"Phone";var g=(isLang("vi"))?"VietbandoID":"VietbandoID";var q=(isLang("vi"))?"(6-30 ký tự)":"(6-30 characters)";var c=(isLang("vi"))?"Mô tả":"Comment";var m=(isLang("vi"))?"*Bạn vui lòng gõ tiếng Việt có dấu":"";var f=(isLang("vi"))?"Lưu":"Save";var i=(isLang("vi"))?"Hủy":"Cancel";var n=(isLang("vi"))?"Dùng làm từ khóa tìm kiếm. Vd: myhouse123":"Vietbando identifier. Ex: myhouse123";p[p.length]='<div id="apForm" class="jForm jFormPopup">	                        <h3>'+o+'</h3>                            <span id="aperror" class="typevnmese">'+m+'</span>                            <ol>                                <li>        	                        <label for="lbLocType">'+h+'</label>                                    <select name="loctype" id="loctype" onchange="AP_showInfoWindow()">                                        <option value="ips">Địa danh</option>                                        <option value="biz">Doanh nghiệp</option>                                    </select>                                </li>    	                        <li>        	                        <label for="txtAPName">'+j+'</label>                                    <input id="txtAPName" type="text" name="txtAPName" />                                </li>';if(loctype=="biz"){p[p.length]='<li>        	                        <label for="txtAddNo">'+d+'</label>                                    <input id="txtAddNo" class="address" type="text" value="'+((isLang("vi"))?"Số nhà":"Addr No")+'" onfocus="OnFocusAddNumber(this)" name="txtAddNo"/>                                    <input id="txtAddStreet" class="street" type="text" value="'+((AP_AddStreet!=null)?AP_AddStreet:((isLang("vi"))?"Tên đường":"Street name"))+'" onfocus="OnFocusAddStreet(this)" name="txtAddStreet"/>                                    <span class="addinfo">'+ConcatAddress("","",AP_AddWard,AP_AddDistrict,AP_AddProvince)+'</span>                                </li>                                <li>        	                        <label for="txtPhone">'+b+'</label>                                    <input id="txtPhone" type="text" name="txtPhone"/>                                </li>'}else{p[p.length]='<li>        	                        <label for="txtAddNo">'+a+'</label>                                    <input id="txtAddStreet" class="street" type="text" value="'+((AP_AddStreet!=null)?AP_AddStreet:((isLang("vi"))?"Tên đường":"Street name"))+'" onfocus="OnFocusAddStreet(this)" name="txtAddStreet"/>                                    <span class="addinfo">'+ConcatAddress("","",AP_AddWard,AP_AddDistrict,AP_AddProvince)+"</span>                                </li>"}p[p.length]='<li>        	                        <label for="txtVbdID">'+g+'</label>                                    <input id="txtVbdID" class="vietbandoid" type="text" name="txtVbdID" />                                    <span class="gioihan">'+q+'</span>                                    <span class="explain">'+n+'</span>                                </li>                                <li>        	                        <label for="txtNote">'+c+'</label>                                    <textarea id="txtNote" name="txtNote"></textarea>                                </li>                            </ol>                            <div>    	                        <a class="btnjForm" onclick="AP_savePlace()"><span>'+f+'</span></a>                                <a class="btnjForm" onclick="AP_Cancel()"><span>'+i+"</span></a>                            </div>                        </div>";AP_CurObj.openInfoWindow(p.join(""));$("#loctype").val(loctype);setTimeout(function(){if(document.getElementById("txtAPName")!=null){document.getElementById("txtAPName").focus()}},500)}function OnFocusAddNumber(a){if(a.value=="Số nhà"||a.value=="Addr No"){a.value=""}}function OnFocusAddStreet(a){if(a.value=="Tên đường"||a.value=="Street name"){a.value=""}}function ShowAddPlacePopup(a){if(AP_CurObj!=null){map.removeOverlay(AP_CurObj);AP_CurObj=null}var b=new VMarker(a,new VIcon("images/mymap_icon/point-1.gif",new VSize(32,32)));b.type=ADDPLACEOBJ;map.addOverlay(b);AP_CurObj=b;b.enableDragging();AP_showInfoWindow();VEvent.addListener(b,"dragend",AP_showInfoWindow)}function AP_getObjCoor(){var a=AP_CurObj.getPoint();var b="POINT("+a.lng()+" "+a.lat()+")";return b}var RoadCons=null;var TrafficJam=null;var arrBlockHouseObj=new Array();var arrTrafficJamObj=new Array();var TGreenCount=0;function TogglePopupTraffic(){if(!$(".MT-giaothong").hasClass("MT-giaothong-active")){ShowPopupTraffic()}else{ClosePopupTraffic()}}function ShowPopupTraffic(){$(".MT-giaothong").addClass("MT-giaothong-active");$("#PopupTraffic").show();viewBlockHouse()}function ClosePopupTraffic(){$(".MT-giaothong").removeClass("MT-giaothong-active");$("#PopupTraffic").hide();viewBlockHouse()}var bRoadConsCheck=true;var bTrafficJamCheck=true;function ToggleRoadCons(){if(bRoadConsCheck){if(isSupportEffect()){$(".PopupTraffic-construction, #RoadConsCount").css("opacity","0.5")}$("#RoadConsCount").html("0");for(var a=0;a<arrBlockHouseObj.length;a++){arrBlockHouseObj[a].hide()}}else{if(isSupportEffect()){$(".PopupTraffic-construction, #RoadConsCount").css("opacity","1")}$("#RoadConsCount").html(RoadCons.Rows.length);for(var a=0;a<arrBlockHouseObj.length;a++){arrBlockHouseObj[a].show()}}bRoadConsCheck=!bRoadConsCheck}function ToggleTrafficJam(){if(bTrafficJamCheck){if(isSupportEffect()){$(".PopupTraffic-jam, #TrafficJamCount").css("opacity","0.5")}$("#TrafficJamCount").html("0");for(var a=0;a<arrTrafficJamObj.length;a++){arrTrafficJamObj[a].hide()}}else{if(isSupportEffect()){$(".PopupTraffic-jam, #TrafficJamCount").css("opacity","1")}$("#TrafficJamCount").html(TrafficJam.Rows.length-TGreenCount);for(var a=0;a<arrTrafficJamObj.length;a++){arrTrafficJamObj[a].show()}}bTrafficJamCheck=!bTrafficJamCheck}function viewBlockHouse(){if($(".MT-giaothong").hasClass("MT-giaothong-active")){$("#RoadConsCount").html("0");$("#TrafficJamCount").html("0");AJLocationSearch.GetBlockHouse(viewBlockHouseCallback);checkBlock()}else{for(var a=0;a<arrBlockHouseObj.length;a++){map.removeOverlay(arrBlockHouseObj[a])}arrBlockHouseObj=new Array();for(var a=0;a<arrTrafficJamObj.length;a++){map.removeOverlay(arrTrafficJamObj[a])}arrTrafficJamObj=new Array();uncheckBlock()}}function viewBlockHouseCallback(c){if(c.error!=null){ReportError();return}var a=c.value;if(a!=null){RoadCons=a.Tables[0];TrafficJam=a.Tables[1];var g=Date.parse(new Date());for(var d=0;d<RoadCons.Rows.length;d++){var e=3;var h=Date.parse(RoadCons.Rows[d].THOIGIANKHOICONG);var b=Date.parse(RoadCons.Rows[d].THOIGIANHOANTHANH);if(g<h){e=3}else{if(g<b){e=2}else{e=0}}var f=new VIcon("",new VSize(20,15));var j=new VLatLng(RoadCons.Rows[d].Y,RoadCons.Rows[d].X);createTJMarker(j,f,d,BLOCKHOUSEOBJ,e)}bRoadConsCheck=!bRoadConsCheck;ToggleRoadCons();TGreenCount=0;for(var d=0;d<TrafficJam.Rows.length;d++){if(TrafficJam.Rows[d].State==3){TGreenCount++}var f=new VIcon("",new VSize(32,25));var j=new VLatLng(TrafficJam.Rows[d].Latitude,TrafficJam.Rows[d].Longitude);createTJMarker(j,f,d,TRAFFICJAMOBJ,TrafficJam.Rows[d].State)}bTrafficJamCheck=!bTrafficJamCheck;ToggleTrafficJam()}}function createTJMarker(g,e,d,a,b){var c=new VMarkerOptions(e,function(){return(resultActive==d)?3:2});if(a==BLOCKHOUSEOBJ){c.customMarker='<span class="imgConstruction-'+JamStateColor[b]+'"></span>';c.offset=new VSize(9,15)}else{c.customMarker='<span class="imgTraffic-'+JamStateColor[b]+'"></span>';c.offset=new VSize(14,25)}var f=new VMarker(g,c);f.bhIndex=d;f.type=a;map.addOverlay(f);if(a==BLOCKHOUSEOBJ){arrBlockHouseObj.push(f)}else{arrTrafficJamObj.push(f)}}function FitRoadConstruction(){var a,m;var h,d;var e=map.getBounds();var k=e.getNorthWest();var c=e.getSouthEast();a=k.lng();m=k.lat();h=c.lng();d=c.lat();var b,n,l=false;for(var g=0,f=0;g<arrBlockHouseObj.length,f<arrTrafficJamObj.length;g++,f++){b=arrBlockHouseObj[g].getLatLng().lat();n=arrBlockHouseObj[g].getLatLng().lng();if(n<h&&n>a&&b>d&&b<m){l=true;break}b=arrTrafficJamObj[f].getLatLng().lat();n=arrTrafficJamObj[f].getLatLng().lng();if(n<h&&n>a&&b>d&&b<m){l=true;break}}if(!l){map.fitOverlays()}}var JamStateColor=new Array("red","orange","yellow","green");var JamState=new Array("Kẹt cứng","Kẹt vừa","Kẹt ít","Thông thoáng");var JamLane=new Array("Tất cả","Xe máy","Xe ô tô","Xe tải");var JamPolice=new Array("Đã có cảnh sát","Chưa có cảnh sát");function showTrafficJamInfoWindow(b){var a=TrafficJam.Rows[b];var c='<div class="MiniPopup">                        <span class="Title">'+a.Position+'</span>                        <ol>                            <li><span class="Tit">Tình trạng:</span><span class="Content">'+JamState[a.State]+'</span></li>                            <li><span class="Tit">Bán kính:</span><span class="Content">'+a.Radius+' m</span></li>                            <li><span class="Tit">Hướng kẹt:</span><span class="Content">'+((a.HeadingType=="-1")?"Tất cả":"Hướng "+(a.HeadingType+1))+'</span></li>                            <li><span class="Tit">Làn kẹt:</span><span class="Content">'+JamLane[a.Lane]+"</span></li>                            "+((a.Reason!="")?'<li><span class="Tit">Nguyên nhân:</span><span class="Content">'+a.Reason+"</span>":"")+'</li>                            <li><span class="Tit">Nguồn tin:</span><span class="Content">'+a.Source+'</span></li>                            <li><span class="Tit police">'+JamPolice[a.Police]+'</span><span class="Content"></span></li>                            <li><span class="Tit">Cập nhật:</span><span class="Content"><b>'+a.LastUpdate+"</b></span></li>                        </ol>                    </div>";arrTrafficJamObj[b].openInfoWindow(c)}function showBlockHouseInfoWindow(b){var q=(isLang("vi"))?"Thông tin rào chắn":"Road construction information";var f=(isLang("vi"))?"Số hiệu":"ID";var e=(isLang("vi"))?"Tuyến đường":"Street ID";var d=(isLang("vi"))?"Tên dự án":"Project name";var k=(isLang("vi"))?"Gói thầu":"Contract";var h=(isLang("vi"))?"Tuyến đường":"Street";var a=(isLang("vi"))?"Giấy phép":"License number";var c=(isLang("vi"))?"Ngày cấp":"License date";var g=(isLang("vi"))?"Kích thước":"Size";var o=(isLang("vi"))?"Thời gian":"Period";var m=(isLang("vi"))?"Cấm loại xe":"Forbidden traffic";var j=(isLang("vi"))?"Hướng cấm":"Forbidden direction";var p=(isLang("vi"))?"Phạm vi cấm":"Forbidden range";var n=(isLang("vi"))?"Lộ trình thay thế":"Spare route";var l=RoadCons.Rows[b];var i='<div class="MiniPopup">                        <span class="Title">'+l.VITRI+"</span>                        <ol>                        "+((l.TENDUAN!="")?'<li><span class="Tit">'+d+':</span><span class="Content">'+l.TENDUAN+"</span>":"")+"</li>                        "+((l.TENCONGTRINH!="")?'<li><span class="Tit">'+k+':</span><span class="Content">'+l.TENCONGTRINH+"</span>":"")+"</li>                        "+((l.GIAYPHEP!="")?'<li><span class="Tit">'+a+':</span><span class="Content">'+l.GIAYPHEP+"</span>":"")+"</li>                        "+((l.NGAYCAP!="")?'<li><span class="Tit">'+c+':</span><span class="Content">'+(new Date(l.NGAYCAP)!="Invalid Date"?getDateString(new Date(l.NGAYCAP)):l.NGAYCAP)+"</span>":"")+"</li>                        "+((l.KICHTHUOC!="")?'<li><span class="Tit">'+g+':</span><span class="Content">'+l.KICHTHUOC+"</span>":"")+"</li>                        "+((l.MOTAVITRI!="")?'<li><span class="Tit">Phạm vi:</span><span class="Content">'+l.MOTAVITRI+"</span>":"")+"</li>                        "+((l.THOIGIANKHOICONG!="")?'<li><span class="Tit">'+o+':</span><span class="Content"><b>'+(new Date(l.THOIGIANKHOICONG)!="Invalid Date"?getDateString(new Date(l.THOIGIANKHOICONG)):l.THOIGIANKHOICONG)+"</b>":"")+"                        "+((l.THOIGIANHOANTHANH!="")?" - <b>"+(new Date(l.THOIGIANHOANTHANH)!="Invalid Date"?getDateString(new Date(l.THOIGIANHOANTHANH)):l.THOIGIANHOANTHANH)+"</b></span>":"")+"</li>                        </ol>                    </div>";arrBlockHouseObj[b].openInfoWindow(i)}function getDateString(a){return(getFullDate(a.getDate())+"/"+getFullDate(a.getMonth()+1)+"/"+a.getFullYear())}function getFullDate(a){a=a<10?"0"+a:a;return a}function ClickStatisticsInsert(a,b){AJLocationSearch.ClickStatistics(a,b)}jQuery.easing.jswing=jQuery.easing.swing;jQuery.extend(jQuery.easing,{def:"backout",swing:function(e,f,g,h,a){return jQuery.easing[jQuery.easing.def](e,f,g,h,a)},backout:function(f,g,h,i,a){var e=1.70158;return i*((g=g/a-1)*g*((e+1)*g+e)+1)+h},easeOutCirc:function(e,f,g,h,a){return h*Math.sqrt(1-(f=f/a-1)*f)+g}});(function(a){a.fn.lavaLamp=function(b){b=a.extend({fx:"swing",speed:500,click:function(){return true},startItem:"no",autoReturn:true,returnDelay:0,setOnClick:true,homeTop:0,homeLeft:0,homeWidth:0,homeHeight:0,returnHome:false},b||{});var c;if(b.homeTop||b.homeLeft){c=a('<li class="homeLava selectedLava"></li>').css({left:b.homeLeft,top:b.homeTop,width:b.homeWidth,height:b.homeHeight,position:"absolute"});a(this).prepend(c)}return this.each(function(){var j=location.pathname+location.search+location.hash;var h=new Object;var g;var d;var e;var f=a("li",this).not(a(".noLava"));if(b.startItem=="no"){h=a('li a[href$="'+j+'"]',this).parent("li")}if(h.length==0&&b.startItem=="no"){h=a('li a[href$="'+location.pathname.substring(location.pathname.lastIndexOf("/")+1)+location.search+location.hash+'"]',this).parent("li")}if(h.length==0||b.startItem!="no"){if(b.startItem=="no"){b.startItem=0}h=a(f[b.startItem])}e=a("li.selectedLava",this)[0]||a(h).addClass("selectedLava")[0];f.mouseenter(function(){if(a(this).hasClass("homeLava")){e=a(this)[0]}i(this)});d=a('<li class="nav-arrow" style="z-index:-1"></li>').appendTo(this);a(this).mouseleave(function(){if(b.autoReturn){if(b.returnHome&&c){i(c[0])}else{if(b.returnDelay){if(g){clearTimeout(g)}g=setTimeout(function(){i(null)},b.returnDelay+b.speed)}else{i(null)}}}});f.click(function(k){if(b.setOnClick){a(e).removeClass("selectedLava");a(this).addClass("selectedLava");e=this}return b.click.apply(this,[k,this])});if(b.homeTop||b.homeLeft){d.css({left:b.homeLeft,top:b.homeTop,width:b.homeWidth,height:b.homeHeight})}else{d.css({left:e.offsetLeft,top:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight})}function i(k){if(!k){k=e}var m=0,l=0;if(!a.browser.msie){m=(d.outerWidth()-d.innerWidth())/2;l=(d.outerHeight()-d.innerHeight())/2}d.stop().animate({left:k.offsetLeft-m,top:k.offsetTop-l,width:k.offsetWidth,height:k.offsetHeight},b.speed,b.fx)}})}})($);(function(a){a.fn.hoverIntent=function(l,m){var n={sensitivity:7,interval:100,timeout:0};n=a.extend(n,m?{over:l,out:m}:l);var d,e,j,k;var i=function(f){d=f.pageX;e=f.pageY};var b=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);if((Math.abs(j-d)+Math.abs(k-e))<n.sensitivity){a(f).unbind("mousemove",i);f.hoverIntent_s=1;return n.over.apply(f,[g])}else{j=d;k=e;f.hoverIntent_t=setTimeout(function(){b(g,f)},n.interval)}};var c=function(g,f){f.hoverIntent_t=clearTimeout(f.hoverIntent_t);f.hoverIntent_s=0;return n.out.apply(f,[g])};var h=function(f){var g=(f.type=="mouseover"?f.fromElement:f.toElement)||f.relatedTarget;while(g&&g!=this){try{g=g.parentNode}catch(f){g=this}}if(g==this){return false}var q=jQuery.extend({},f);var o=this;if(o.hoverIntent_t){o.hoverIntent_t=clearTimeout(o.hoverIntent_t)}if(f.type=="mouseover"){j=q.pageX;k=q.pageY;a(o).bind("mousemove",i);if(o.hoverIntent_s!=1){o.hoverIntent_t=setTimeout(function(){b(q,o)},n.interval)}}else{a(o).unbind("mousemove",i);if(o.hoverIntent_s==1){o.hoverIntent_t=setTimeout(function(){c(q,o)},n.timeout)}}};return this.mouseover(h).mouseout(h)}})(jQuery);(function(b){b.fn.superfish=function(j){var e=b.fn.superfish,k=e.c,g=b(['<span class="',k.arrowClass,'"></span>'].join("")),h=function(){var c=b(this),l=i(c);clearTimeout(l.sfTimer);c.showSuperfishUl().siblings().hideSuperfishUl()},d=function(){var l=b(this),m=i(l),c=e.op;clearTimeout(m.sfTimer);m.sfTimer=setTimeout(function(){c.retainPath=(b.inArray(l[0],c.$path)>-1);l.hideSuperfishUl();if(c.$path.length&&l.parents(["li.",c.hoverClass].join("")).length<1){h.call(c.$path)}},c.delay)},i=function(l){var c=l.parents(["ul.",k.menuClass,":first"].join(""))[0];e.op=e.o[c.serial];return c},f=function(c){c.addClass(k.anchorClass).append(g.clone())};return this.each(function(){var l=this.serial=e.o.length;var m=b.extend({},e.defaults,j);m.$path=b("li."+m.pathClass,this).slice(0,m.pathLevels).each(function(){b(this).addClass([m.hoverClass,k.bcClass].join(" ")).filter("li:has(ul)").removeClass(m.pathClass)});e.o[l]=e.op=m;b("li:has(ul)",this)[(b.fn.hoverIntent&&!m.disableHI)?"hoverIntent":"hover"](h,d).each(function(){if(m.autoArrows){f(b(">a:first-child",this))}}).not("."+k.bcClass).hideSuperfishUl();var c=b("a",this);c.each(function(n){var o=c.eq(n).parents("li");c.eq(n).focus(function(){h.call(o)}).blur(function(){d.call(o)})});m.onInit.call(this)}).each(function(){var c=[k.menuClass];if(e.op.dropShadows&&!(b.browser.msie&&b.browser.version<7)){c.push(k.shadowClass)}b(this).addClass(c.join(" "))})};var a=b.fn.superfish;a.o=[];a.op={};a.IE7fix=function(){var c=a.op;if(b.browser.msie&&b.browser.version>6&&c.dropShadows&&c.animation.opacity!=undefined){this.toggleClass(a.c.shadowClass+"-off")}};a.c={bcClass:"sf-breadcrumb",menuClass:"sf-js-enabled",anchorClass:"sf-with-ul",arrowClass:"sf-sub-indicator",shadowClass:"sf-shadow"};a.defaults={hoverClass:"sfHover",pathClass:"overideThisToUse",pathLevels:1,delay:500,animation:{opacity:"show"},speed:"normal",autoArrows:true,dropShadows:true,disableHI:false,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};b.fn.extend({hideSuperfishUl:function(){var d=a.op,e=(d.retainPath===true)?d.$path:"";d.retainPath=false;var c=b(["li.",d.hoverClass].join(""),this).add(this).not(e).removeClass(d.hoverClass).find(">ul").hide().css("visibility","hidden");d.onHide.call(c);return this},showSuperfishUl:function(){var e=a.op,d=a.c.shadowClass+"-off",c=this.addClass(e.hoverClass).find(">ul:hidden").css("visibility","visible");a.IE7fix.call(c);e.onBeforeShow.call(c);c.animate(e.animation,e.speed,function(){a.IE7fix.call(c);e.onShow.call(c)});return this}})})(jQuery);(function(a){a.fn.HideTipsy=function(){var b=a(this)[0];var c=a.fn.tipsy.elementOptions(b,a.fn.tipsy.defaults);a.data(b,"cancel.tipsy",false);var d=b;setTimeout(function(){if(a.data(b,"cancel.tipsy")){return}var e=a.data(d,"active.tipsy");if(c.fade){e.stop().fadeOut(function(){a(b).remove()})}else{e.remove()}},0)};a.fn.ShowTipsy=function(){var i=a(this)[0];var e=a.fn.tipsy.elementOptions(i,a.fn.tipsy.defaults);a.data(i,"cancel.tipsy",true);var g=a.data(i,"active.tipsy");if(!g){g=a('<div class="tipsy">                        <div class="tipsy-inner-wrap">                            <div class="tipsy-inner"></div>                        </div>                        <div class="tipsy-arrow"></div>                     </div>');g.css({position:"absolute",zIndex:100000});a.data(i,"active.tipsy",g)}if(a(i).attr("title")||typeof(a(i).attr("original-title"))!="string"){a(i).attr("original-title",a(i).attr("title")||"").removeAttr("title")}var d;if(typeof e.title=="string"){d=a(i).attr(e.title=="title"?"original-title":e.title)}else{if(typeof e.title=="function"){d=e.title.call(i)}}g.find(".tipsy-inner")[e.html?"html":"text"](d||e.fallback);var f=a.extend({},a(i).offset(),{width:i.offsetWidth,height:i.offsetHeight});g.get(0).className="tipsy";g.remove().css({top:0,left:0,visibility:"hidden",display:"block"}).appendTo(document.body);var h=g[0].offsetWidth,c=g[0].offsetHeight;var b=(typeof e.gravity=="function")?e.gravity.call(this):e.gravity;switch(b){case"sc":g.css({top:f.top-c-2,left:f.left+f.width/2-h/2});a(".tipsy-arrow",g).addClass("centerbottom");break;case"sl":g.css({top:f.top-c-2,left:f.left-5});a(".tipsy-arrow",g).addClass("leftbottom");break;case"sr":g.css({top:f.top-c-2,left:f.left-h+f.width+5});a(".tipsy-arrow",g).addClass("rightbottom");break}if(e.fade){g.css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:0.8})}else{g.css({visibility:"visible"})}};a.fn.tipsy=function(b){return this.each(function(){if(a(this).attr("title")==""){return}a(this).hover(a.fn.ShowTipsy,a.fn.HideTipsy)})};a.fn.tipsy.elementOptions=function(c,b){return a.extend({},b,{gravity:a(c).attr("tipdir")||a.fn.tipsy.autoS})};a.fn.tipsy.defaults={fade:false,fallback:"",gravity:"sc",html:true,title:"title"};a.fn.tipsy.autoS=function(){var b=a(this)[0];if(a(b).offset().left+b.offsetWidth+40>a(window).width()){return"sr"}else{if(a(b).offset().left-b.offsetWidth-40<a(document).scrollLeft()){return"sl"}else{return"sc"}}}})(jQuery);function VKI_buildKeyboardInputs(){var self=this;this.VKI_target=false;this.VKI_imageURI="Control/VirtualKeyboard/images/keyboard.png";this.VKI_isIE=
/*@cc_on!@*/
false;this.VKI_attachKeyboard=VKI_attach=function(elem){if(elem.VKI_attached){return false}var keybut=$('<img src="'+this.VKI_imageURI+'" class="keyboardInputInitiator">')[0];keybut.elem=elem;keybut.onclick=function(){self.VKI_show(this.elem)};elem.VKI_attached=true;$(elem).after(keybut);if(this.VKI_isIE){elem.onclick=elem.onselect=elem.onkeyup=function(e){if((e||event).type!="keyup"||!this.readOnly){this.range=document.selection.createRange()}}}};$("input.keyboardInput, textarea.keyboardInput").each(function(){VKI_attachKeyboard(this)});this.VKI_buildKeys=function(){$(".kb-bor2 a").each(function(){var character=$("span",this).text();switch(character){case"Enter":this.onclick=function(){doSearch();self.VKI_close();return true};break;case"Space":this.onclick=function(){self.VKI_insert(" ");return false};break;default:this.onclick=function(){self.VKI_insert(character);return false}}});$(".kb-btnBksp")[0].onclick=function(){self.VKI_target.focus();if(self.VKI_target.setSelectionRange){var rng=[self.VKI_target.selectionStart,self.VKI_target.selectionEnd];if(rng[0]<rng[1]){rng[0]++}self.VKI_target.value=self.VKI_target.value.substr(0,rng[0]-1)+self.VKI_target.value.substr(rng[1]);self.VKI_target.setSelectionRange(rng[0]-1,rng[0]-1)}else{if(self.VKI_target.createTextRange){try{self.VKI_target.range.select()}catch(e){self.VKI_target.range=document.selection.createRange()}if(!self.VKI_target.range.text.length){self.VKI_target.range.moveStart("character",-1)}self.VKI_target.range.text=""}else{self.VKI_target.value=self.VKI_target.value.substr(0,self.VKI_target.value.length-1)}}self.VKI_target.focus();return true};$(".kb-btnClear")[0].onclick=function(){self.VKI_target.value="";self.VKI_target.focus();return false};$(".kb-close")[0].onclick=function(){self.VKI_close()}};this.VKI_buildKeys();this.VKI_insert=function(text){this.VKI_target.focus();if(this.VKI_target.maxLength){this.VKI_target.maxlength=this.VKI_target.maxLength}if(typeof this.VKI_target.maxlength=="undefined"||this.VKI_target.maxlength<0||this.VKI_target.value.length<this.VKI_target.maxlength){if(this.VKI_target.setSelectionRange){var rng=[this.VKI_target.selectionStart,this.VKI_target.selectionEnd];this.VKI_target.value=this.VKI_target.value.substr(0,rng[0])+text+this.VKI_target.value.substr(rng[1]);if(text=="\n"&&window.opera){rng[0]++}this.VKI_target.setSelectionRange(rng[0]+text.length,rng[0]+text.length)}else{if(this.VKI_target.createTextRange){try{this.VKI_target.range.select()}catch(e){this.VKI_target.range=document.selection.createRange()}this.VKI_target.range.text=text;this.VKI_target.range.collapse(true);this.VKI_target.range.select()}else{this.VKI_target.value+=text}}this.VKI_target.focus()}else{if(this.VKI_target.createTextRange&&this.VKI_target.range){this.VKI_target.range.select()}}};this.VKI_close=VKI_close=function(){if(this.VKI_target){$(".kb-bor1").hide();this.VKI_target.focus();this.VKI_target=false}};this.VKI_show=function(elem){if(!this.VKI_target){this.VKI_target=elem;if(this.VKI_isIE){if(!this.VKI_target.range){this.VKI_target.range=this.VKI_target.createTextRange();this.VKI_target.range.moveStart("character",this.VKI_target.value.length)}this.VKI_target.range.select()}$(".kb-bor1").css("left",$(elem).offset().left,"top",$(elem).offset().top);$(".kb-bor1").show();this.VKI_target.focus()}else{this.VKI_close()}}}if(window.addEventListener){window.addEventListener("load",VKI_buildKeyboardInputs,false)}else{if(window.attachEvent){window.attachEvent("onload",VKI_buildKeyboardInputs)}}$(document).ready(function(){$("#lstLocation, .weather-today, .weather-future, .Weather-shadow").click(function(b){b.stopPropagation()});var a=getCookie("UserWeather");if(a==null||a==""){a=48900}$("#lstLocation").val(a);getWeatherInfo()});var countLoad=0;var bshowWeather=true;var bWeatherDynChange=false;function toggleWeather(){if(bshowWeather){showWeather()}else{hideWeather()}}function showWeather(){$(".province").hide();$(".weather-img-small").hide();$(".temp-wrap").addClass("right");$(".weather-img-large-wrap").show();$(".weather-currentCondition").show();$(".Weather-shadow").addClass("dark");$(".Weather-wrap").addClass("fixie");$(".weather-info-wrap").show();bshowWeather=false}function hideWeather(){$(".province").show();$(".weather-img-small").show();$(".temp-wrap").removeClass("right");$(".weather-img-large-wrap").hide();$(".weather-currentCondition").hide();$(".Weather-shadow").removeClass("dark");$(".Weather-wrap").removeClass("fixie");$(".weather-info-wrap").hide();bshowWeather=true}function getWeatherInfo(){setCookie("UserWeather",$("#lstLocation :selected").val(),5000,"","","");if(isSupportEffect()){$(".weather-img-large-wrap, .temp-wrap, .weather-today, .weather-future").stop().animate({opacity:0.5},400,"linear")}setTimeout(function(){Control_WeatherModuleAjax.LoadWeatherInformation($("#lstLocation :selected").val(),callback_Message)},400)}var CountLoadWeather=0;function callback_Message(c){var b=c.value;if(b!=null){$(".province").html($("#lstLocation :selected").text());var a=(new Date).getHours();$(".weather-img-small").css("background",'url("/Maps/Control/WeatherModule/WeatherImages/Set_2_small/'+((a>6&&a<18)?b.strImgCurrentCon:b.strImgCurrentCon+"_night")+'.png") no-repeat');$(".weather-img-large").css("background",'url("/Maps/Control/WeatherModule/WeatherImages/Set_2/'+((a>6&&a<18)?b.strImgCurrentCon:b.strImgCurrentCon+"_night")+'.png") no-repeat');$(".temp-wrap, .weather-img-large").attr("title",b.strCurrentCon+" - "+b.strHumidity+" - "+b.strPressure+" - "+b.strWindSpeed);$("#divTemperature").html(b.strTemperature);$("#wCondition").html(b.strCurrentCon);$("#wHumidity").html(b.strHumidity);$("#wPressure").html(b.strPressure);$("#wWindDirection").css("background",'url("/Maps/Control/WeatherModule/WeatherImages/WindDirections/'+b.strWindDirection+'.png") no-repeat');$("#wWindSpeed").html(b.strWindSpeed);$("#wUpdateTime").html(b.strUpdateTime);$("#cday1").css("background",'url("/Maps/Control/WeatherModule/WeatherImages/Set_2_small/'+b.otherDays[0].strImgCondition+'.png") no-repeat');$("#cday1").attr("title","Sáng: "+b.otherDays[0].strCondition);$("#tday1").html(b.otherDays[0].strTemperature);$("#cnight1").css("background",'url("/Maps/Control/WeatherModule/WeatherImages/Set_2_small/'+b.otherDays[1].strImgCondition+'.png") no-repeat');$("#cnight1").attr("title","Tối: "+b.otherDays[1].strCondition);$("#tnight1").html(b.otherDays[1].strTemperature);$("#day2").html(b.otherDays[2].strDay);$("#cday2").css("background",'url("/Maps/Control/WeatherModule/WeatherImages/Set_2_small/'+b.otherDays[2].strImgCondition+'.png") no-repeat');$("#cday2").attr("title","Sáng: "+b.otherDays[2].strCondition);$("#tday2").html(b.otherDays[2].strTemperature);$("#cnight2").css("background",'url("/Maps/Control/WeatherModule/WeatherImages/Set_2_small/'+b.otherDays[3].strImgCondition+'.png") no-repeat');$("#cnight2").attr("title","Tối: "+b.otherDays[3].strCondition);$("#tnight2").html(b.otherDays[3].strTemperature);$("#day3").html(b.otherDays[4].strDay);$("#cday3").css("background",'url("/Maps/Control/WeatherModule/WeatherImages/Set_2_small/'+b.otherDays[4].strImgCondition+'.png") no-repeat');$("#cday3").attr("title","Sáng: "+b.otherDays[4].strCondition);$("#tday3").html(b.otherDays[4].strTemperature);$("#cnight3").css("background",'url("/Maps/Control/WeatherModule/WeatherImages/Set_2_small/'+b.otherDays[5].strImgCondition+'.png") no-repeat');$("#cnight3").attr("title","Tối: "+b.otherDays[5].strCondition);$("#tnight3").html(b.otherDays[5].strTemperature);$(".Weather-shadow").show();if(isSupportEffect()){$(".weather-img-large-wrap, .temp-wrap, .weather-today, .weather-future").stop().animate({opacity:1},400,"linear")}}else{if(CountLoadWeather<10){CountLoadWeather++;setTimeout(function(){getWeatherInfo()},CountLoadWeather*500)}else{$(".Weather-shadow").hide()}}};;var GLOBAL_SEARCH_ALL=0,GLOBAL_SEARCH_BUSINESS=1,GLOBAL_SEARCH_MAP=2,GLOBAL_SEARCH_ADDRESS=2,GLOBAL_SEARCH_FUNCTION=3,GLOBAL_FINDPATH_FUNCTION=4,GLOBAL_MYMAP_FUNCTION=5,GLOBAL_ACTIVE_ZINDEX=2,GLOBAL_HIDDEN_ZINDEX=1,map,cMnu=null,current_searchtype=0,current_functype=GLOBAL_SEARCH_FUNCTION,MARKER_POI=0,MARKER_AB=1,MYMAPOBJ=2,MMCONTROLOBJ=3,MMAPCONTROLOBJ=4,FPMARKEROBJ=5,FPPOLYLINEOBJ=6,ADDPLACEOBJ=7,MARKER_MPOI=8,BLOCKHOUSEOBJ=9,TRAFFICJAMOBJ=10,mkD=null,mkP=null,mkOP=null,arrow=null,directionLatLng=null,directionLevel=null,onlineSupportShow=false,SearchWhat="",SearchWhere="",CurrentCenter,bMoveStart=false,ClientID,_gaq=[];_gaq.push(["_setAccount","UA-26408966-1"]);_gaq.push(["_trackPageview"]);function ChangeTextColor(a,b){if(a!=null)a.style.color=b}function ChangeFontWeight(a,b){if(a!=null)a.style.fontWeight=b}var firstLoadMymap=false;function ChangeFunctionType(a){current_functype=a;MessageBox.Hide();HideSelectPlaceBox();if(a==GLOBAL_SEARCH_FUNCTION)activeTabById("searchtab");else if(a==GLOBAL_FINDPATH_FUNCTION){activeTabById("findpathtab");LoadDirectionTool();for(var b=arrDes.length-1;b>=0;b--)RemovePlace_History(b+",0",1,false)}else a==GLOBAL_MYMAP_FUNCTION&&activeTabById("mymaptab")}function closeContextMenu(){if(cMnu!=null){map.removeControl(cMnu);cMnu=null}}var MapLoaded=false,welcomeHTML="",MymapHelpHTML="",FavHelppHTML="",dirInputTemplate="",inputTextHelp="",inputDirHelp="",PageLoad=false;function StartApp(){self!=top&&top.location.replace(self.location);if(window.location.search!=""&&window.location.hash==""){window.location.hash=window.location.search.substring(1);window.location.search="";window.location.href.reload()}if(MapLoaded)return;MapLoaded=true;PageLoad=true;BrowserDetect();ResizeWindow();ClientID=Math.round(Math.random()*(1e6-1))+1+"";welcomeHTML=$("#searchresult_div").html();MymapHelpHTML=$("#MyMapList").html();FavHelppHTML=$("#MarkLocation_Cookie").html();dirInputTemplate=$("#dirInputTemplate").html();inputTextHelp="Tìm địa chỉ, dịch vụ và số điện thoại...";inputDirHelp="Nhập vào địa chỉ, doanh nghiệp...";ContextMenu.prototype=new VControl;MapToolbar.prototype=new VControl;var a=document.getElementById("container");map=new VMap(a);map.addControl(new VLargeMapControl);map.addControl(new VScaleControl);map.addControl(new VOverviewMapControl);map.addControl(new MapToolbar);map.fitOverlays();infoWindow=map.getInfoWindow();AddListeners();InitState();VirtualMarker.Init("container");InitMapArea();TreeBinding.InitTree("Tree","TreeFilter",LoadTree,UnLoadTree);ShowFav();InitMyMap();setTimeout(function(){includeJavascript("../../apis.google.com/js/plusone.js");includeJavascript("../../www.google-analytics.com/ga.js")},0);GetSearchType()==0&&SetSearchType(0);current_searchtype=0;window.location.hash.indexOf("#")==-1&&$.History.go("")}function AddListeners(){VEvent.addListener(map,"singlerightclick",function(e,f,b){var c=map.fromContainerPixelToLatLng(e);if(c!=null){if(mkD!=null){map.removeOverlay(mkD);mkD=null}closeContextMenu();var a=[];if(b!=null&&b.vType!=undefined)if(b.type==MYMAPOBJ||b.type==MMCONTROLOBJ||b.type==MMAPCONTROLOBJ){if(!bReadOnly)if(b.type==MMAPCONTROLOBJ)a[a.length]=["cminsertpoint",isLang("vi")?"Thêm điểm":"Insert point",function(){closeContextMenu();clearControlPoint();enableSaveBtn();arrMyMapCoorObj[b.editObjectIndex].insertPoint(b.addPointIndex,b.getLatLng().copy());if(arrMyMapCoorObj[b.editObjectIndex].actionType!="New")arrMyMapCoorObj[b.editObjectIndex].actionType="Edit";showControlPoint(arrMyMapCoorObj[b.editObjectIndex])}];else if(b.type==MMCONTROLOBJ){var d=arrMyMapCoorObj[b.editObjectIndex].vType()=="VPolyline"?2:4;if(arrMyMapCoorObj[b.editObjectIndex].getVertexCount()>d)a[a.length]=["cmdeletepoint",isLang("vi")?"Xóa điểm":"Delete point",function(){closeContextMenu();clearControlPoint();enableSaveBtn();arrMyMapCoorObj[b.editObjectIndex].deletePoint(b.editPointIndex);if(arrMyMapCoorObj[b.editObjectIndex].actionType!="New")arrMyMapCoorObj[b.editObjectIndex].actionType="Edit";showControlPoint(arrMyMapCoorObj[b.editObjectIndex])}]}}else if(b.type==FPMARKEROBJ){a[a.length]=["cmdeletepoint",isLang("vi")?"Xóa điểm này":"Delete this point",function(){closeContextMenu();state(RemovePlace,b.sid)}];a[a.length]=["","-",null]}a[a.length]=["cmfromhere",isLang("vi")?"Từ đây":"From here",function(a){state(FromHereClick,a)}];a[a.length]=["cmtohere",isLang("vi")?"Đến đây":"To here",function(a){state(ToHereClick,a)}];a[a.length]=["","-",null];a[a.length]=["cmshowstreet",isLang("vi")?"Xem Đường":"Show Streets",function(a){zoomTo(a,17)}];a[a.length]=["cmshowcity",isLang("vi")?"Xem Thành phố":"Show Cities",function(a){zoomTo(a,13)}];a[a.length]=["","-",null];a[a.length]=["cmsearchnearby",isLang("vi")?"Tìm xung quanh":"Search nearby",searchNearBy];a[a.length]=["cmcapturemap",isLang("vi")?"Chụp bản đồ":"Capture map",captureMap];if(b!=null&&b.vType!=undefined&&b.vType()=="VMarker")cMnu=new ContextMenu(b.getLatLng(),a);else cMnu=new ContextMenu(c,a);map.addControl(cMnu)}});VEvent.addListener(map,"movestart",function(){closeContextMenu();enableSaveBtn();DisplayPopupScroll("hidden");VirtualMarker.isClicked=false;bMoveStart=true});VEvent.addListener(map,"zoomstart",function(){closeContextMenu();enableSaveBtn();bMoveStart=true});VEvent.addListener(map,"click",function(a,c){closeContextMenu();if(bIsPlaceAdding&&c!=null){ShowAddPlacePopup(c);return}if(selTbrButton!=null&&selTbrButton.id!="btnMove"&&c!=null){if(selTbrButton.id=="btnAddPoint"||selTbrButton.id=="btnAddText"){var h=selTbrButton.id=="btnAddPoint"?"images/MyMap_icon/point-1.gif":"images/icon_text.gif",i=isLang("vi")?"Chưa đặt tên":"Noname";createMyMapCoor(nMyMapCoorObj,h,i,"")}if(selTbrButton.id=="btnAddPoint"){selectToolbarBtn(document.getElementById("btnMove"));var f=new VMarker(c,new VIcon("images/mymap_icon/point-1.gif",new VSize(32,32)));f.type=MYMAPOBJ;f.mmIndex=nMyMapCoorObj;f.actionType="New";map.addOverlay(f);arrMyMapCoorObj[nMyMapCoorObj]=f;nMyMapCoorObj++;f.enableDragging();var b={};b.MyMapCoorID="";b.MyMapID="";if(isLang("vi"))b.ObjectTitle="Chưa đặt tên";else b.ObjectTitle="No name";b.ObjectDesc="";b.Coor="POINT("+c.lng()+" "+c.lat()+")";b.Style=";;;;point-1.gif;";dsMyMapCoor.Tables[0].Rows[dsMyMapCoor.Tables[0].Rows.length]=b;bCreateNewMMObj=true;showMyMapInfoWindow(f.mmIndex,0)}else if(selTbrButton.id=="btnAddText"){selectToolbarBtn(document.getElementById("btnMove"));var g=new VText(c,"vietbando");g.type=MYMAPOBJ;g.mmIndex=nMyMapCoorObj;g.actionType="New";map.addOverlay(g);arrMyMapCoorObj[nMyMapCoorObj]=g;nMyMapCoorObj++;g.enableDragging();var b={};b.MyMapCoorID="";b.MyMapID="";if(isLang("vi"))b.ObjectTitle="Chưa đặt tên";else b.ObjectTitle="No name";b.ObjectDesc="";b.Coor="POINT("+c.lng()+" "+c.lat()+")";b.Style="normal;#ff0000;20;Arial;;vietbando";dsMyMapCoor.Tables[0].Rows[dsMyMapCoor.Tables[0].Rows.length]=b;bCreateNewMMObj=true;showMyMapInfoWindow(g.mmIndex,0)}else if(selTbrButton.id=="btnAddPolyline"){map.disableDoubleClickZoom();bDrawingPolyline=true;if(tempPolyline!=null){map.removeOverlay(tempPolyline);tempPolyline=null}if(arrDrawingPts==null)arrDrawingPts=[];arrDrawingPts[nDrawingPts]=c.copy();nDrawingPts++;if(nDrawingPts==2){var d=new VPolyline(arrDrawingPts);d.type=MYMAPOBJ;d.mmIndex=nMyMapCoorObj;d.actionType="New";map.addOverlay(d);arrMyMapCoorObj[nMyMapCoorObj]=d;nMyMapCoorObj++;VEvent.addListener(d,"mouseover",function(){showControlPoint(d)})}else nDrawingPts>2&&arrMyMapCoorObj[nMyMapCoorObj-1].setLatLngs(arrDrawingPts)}else if(selTbrButton.id=="btnAddPolygon"){map.disableDoubleClickZoom();bDrawingPolyline=true;if(tempPolyline!=null){map.removeOverlay(tempPolyline);tempPolyline=null}if(arrDrawingPts==null)arrDrawingPts=[];arrDrawingPts[nDrawingPts]=c.copy();nDrawingPts++;if(nDrawingPts==2){var e=new VPolygon(arrDrawingPts);e.type=MYMAPOBJ;e.mmIndex=nMyMapCoorObj;e.reductionTol=0;e.actionType="New";map.addOverlay(e);arrMyMapCoorObj[nMyMapCoorObj]=e;nMyMapCoorObj++;VEvent.addListener(e,"mouseover",function(){showControlPoint(e)})}else nDrawingPts>2&&arrMyMapCoorObj[nMyMapCoorObj-1].setLatLngs(arrDrawingPts)}return}if(isMeasureDistance&&c!=null){bMeasureLine=true;if(tempPolyline!=null){map.removeOverlay(tempPolyline);tempPolyline=null}if(arrDrawingPtsML==null)arrDrawingPtsML=[];arrDrawingPtsML[nDrawingPtsML]=c.copy();nDrawingPtsML++;if(nDrawingPtsML==2){var d=new VPolyline(arrDrawingPtsML,"green");map.addOverlay(d);arrMLObj[nMLObj]=d;nMLObj++}else nDrawingPtsML>2&&arrMLObj[nMLObj-1].setLatLngs(arrDrawingPtsML);if(arrDrawingPtsML.length>1)CurrentDistance=CalculateDistance(arrDrawingPtsML[arrDrawingPtsML.length-2],arrDrawingPtsML[arrDrawingPtsML.length-1]);else CurrentDistance=CalculateDistance(arrDrawingPtsML[arrDrawingPtsML.length-1],c);if(CurrentDistance>=1e3)$("#lblCurDistance").html('<FONT style="color:#FF3300">'+CurrentDistance/1e3+" km</FONT>");else $("#lblCurDistance").html('<FONT style="color:#FF3300">'+CurrentDistance+" m</FONT>");TotalDistance+=CurrentDistance;if(TotalDistance>=1e3)$("#lblTotalDistance").html('<FONT style="color:#FF3300;font-weight:bold">'+TotalDistance/1e3+" km</FONT>");else $("#lblTotalDistance").html('<FONT style="color:#FF3300;font-weight:bold">'+TotalDistance+" m</FONT>")}else if(a!=null&&a.vType!=undefined){if(a.vType()=="VMarker"&&a.type==MARKER_POI){if(document.getElementById("resultItem_"+a.order)!=null)document.getElementById("searchresult_div").scrollTop=document.getElementById("resultItem_"+a.order).offsetTop-10;ResultViewDetailCurrentLevel(a.order);return}if(bIsPlaceAdding&&(a.type==ADDPLACEOBJ||a.type==MMCONTROLOBJ||a.type==MMAPCONTROLOBJ)){AP_showInfoWindow();return}if(a.type==BLOCKHOUSEOBJ)showBlockHouseInfoWindow(a.bhIndex);else a.type==TRAFFICJAMOBJ&&showTrafficJamInfoWindow(a.bhIndex);if(a.type==MYMAPOBJ||a.type==MMCONTROLOBJ||a.type==MMAPCONTROLOBJ){clickedPoint=c;if(a.mmIndex!=undefined)showMyMapInfoWindow(a.mmIndex,1);else showMyMapInfoWindow(a.editObjectIndex,1)}}});VEvent.addListener(map,"mousemove",function(a){if(selTbrButton!=null&&selTbrButton.id!="btnMove"){if(a!=null&&bDrawingPolyline)if(tempPolyline==null){var i=new VPolylineOptions(false,false,"Dot");tempPolyline=new VPolyline([arrDrawingPts[arrDrawingPts.length-1],a]);tempPolyline.opts=i;map.addOverlay(tempPolyline)}else tempPolyline.setLatLngs([arrDrawingPts[arrDrawingPts.length-1],a]);return}if(a!=null&&bMeasureLine){if(tempPolyline==null){var i=new VPolylineOptions(false,false,"Dot");tempPolyline=new VPolyline([arrDrawingPtsML[arrDrawingPtsML.length-1],a],"green");tempPolyline.opts=i;map.addOverlay(tempPolyline)}else tempPolyline.setLatLngs([arrDrawingPtsML[arrDrawingPtsML.length-1],a]);if(arrDrawingPtsML.length>1)if(arrDrawingPtsML[arrDrawingPtsML.length-1].lat()==a.lat())CurrentDistance=CalculateDistance(arrDrawingPtsML[arrDrawingPtsML.length-2],a);else CurrentDistance=CalculateDistance(arrDrawingPtsML[arrDrawingPtsML.length-1],a);else CurrentDistance=CalculateDistance(arrDrawingPtsML[arrDrawingPtsML.length-1],a);window.status=CurrentDistance+"aa";if(CurrentDistance>=1e3)document.getElementById("lblCurDistance").innerHTML='<FONT style="color:#FF3300">'+CurrentDistance/1e3+" km</FONT>";else document.getElementById("lblCurDistance").innerHTML='<FONT style="color:#FF3300">'+CurrentDistance+" m</FONT>";return false}if(mkD!=null&&selectedPoly!=null&&!isFPObjDragging&&!bCPDragging){var k=selectedPoly.split(","),m=parseInt(k[0]),n=parseInt(k[1]),c=arrPaths[m][n].latlngs,d=[];VUtil.ClosestPointPolylines(a.lng(),a.lat(),c,d);var f=d[0],e=map.fromLatLngToDivPixel(a),b=map.fromLatLngToDivPixel(f),g=map.fromLatLngToDivPixel(c[0][0]),h=c.length,l=c[h-1].length,j=map.fromLatLngToDivPixel(c[h-1][l-1]);if(VUtil.Distance(e.x,e.y,b.x,b.y)>300||VUtil.Distance(b.x,b.y,g.x,g.y)<150||VUtil.Distance(b.x,b.y,j.x,j.y)<150){map.removeOverlay(mkD);mkD=null;selectedPoly=null}else mkD.setPoint(f)}if(iMyMapCoorOver!=-1&&!bCPDragging&&!isFPObjDragging){var c=arrMyMapCoorObj[iMyMapCoorOver].latlngs,d=[];VUtil.ClosestPointPolyline(a.lng(),a.lat(),c,d);var f=d[0],e=map.fromLatLngToDivPixel(a),b=map.fromLatLngToDivPixel(f);if(VUtil.Distance(e.x,e.y,b.x,b.y)>300){clearControlPoint();iMyMapCoorOver=-1}}});VEvent.addListener(map,"dblclick",function(f,e){if(nDrawingPts>1&&bDrawingPolyline&&(selTbrButton.id=="btnAddPolyline"||selTbrButton.id=="btnAddPolygon")){var d=selTbrButton.id=="btnAddPolyline"?"images/icon_polyline.gif":"images/icon_polygon.gif",b=isLang("vi")?"Chưa đặt tên":"Noname";createMyMapCoor(nMyMapCoorObj-1,d,b,"");bDrawingPolyline=false;if(tempPolyline!=null){map.removeOverlay(tempPolyline);tempPolyline=null}if(browserName!="msie"){arrDrawingPts.pop();nDrawingPts--}if(selTbrButton.id=="btnAddPolygon"){arrDrawingPts[nDrawingPts]=arrDrawingPts[0].copy();nDrawingPts++}arrMyMapCoorObj[nMyMapCoorObj-1].setLatLngs(arrDrawingPts);var a={};a.MyMapCoorID="";a.MyMapID="";a.ObjectTitle=b;a.ObjectDesc="";var c=selTbrButton.id=="btnAddPolyline"?"LINESTRING":"POLYGON";a.Coor=GeoAsText(arrDrawingPts,c);if(selTbrButton.id=="btnAddPolyline")a.Style="3;#ff0000;#ff0000;0.5;;";else if(selTbrButton.id=="btnAddPolygon")a.Style="3;#ff0000;#00ff00;0.3;0.5;";dsMyMapCoor.Tables[0].Rows[dsMyMapCoor.Tables[0].Rows.length]=a;arrDrawingPts=null;nDrawingPts=0;bCreateNewMMObj=true;selectToolbarBtn(document.getElementById("btnMove"));showMyMapInfoWindow(arrMyMapCoorObj[nMyMapCoorObj-1].mmIndex,0)}if(nDrawingPtsML>1&&bMeasureLine){bMeasureLine=false;if(tempPolyline!=null){map.removeOverlay(tempPolyline);tempPolyline=null}if(browserName!="msie"){arrDrawingPtsML.pop();nDrawingPtsML--}if(arrDrawingPtsML.length>1)CurrentDistance=CalculateDistance(arrDrawingPtsML[arrDrawingPtsML.length-2],arrDrawingPtsML[arrDrawingPtsML.length-1]);else CurrentDistance=CalculateDistance(arrDrawingPtsML[arrDrawingPtsML.length-1],e);if(CurrentDistance>=1e3)document.getElementById("lblCurDistance").innerHTML='<FONT style="color:#FF3300">'+CurrentDistance/1e3+" km</FONT>";else document.getElementById("lblCurDistance").innerHTML='<FONT style="color:#FF3300">'+CurrentDistance+" m</FONT>";arrDrawingPtsML=null;nDrawingPtsML=0;isMeasureDistance=false;return false}});VEvent.addListener(map,"infowindowclosebuttonclick",function(){bIsPlaceAdding&&AP_Cancel();if(iMyMapCoorSel!=-1){changeCoorBkColor(iMyMapCoorSel,false);iMyMapCoorSel=-1}curTitle="";curDesc="";curIcon="";curText="";curFontFamily="";curFontWeight="";curFontSize="";curFontColor="";curLineColor="";curLineWidth="";curLineOpacity="";curFillColor="";curFillOpacity="";bCreateNewMMObj=false});VEvent.addListener(map,"infowindowclose",function(){bCreateNewMMObj&&map.enableDoubleClickZoom();if(resultActive!=-1){var a=document.getElementById("resultItem_"+resultActive);a!=null&&ResultEntryInActive(a);resultActive=-1}if(nearbymarker!=null){map.removeOverlay(nearbymarker);nearbymarker=null}});VEvent.addListener(map,"zoomend",function(){directionLevel!=map.getLevel()&&GetDirectionLatLngs();TreeBinding.ZoomEnd();enableSaveRegion();if(bMoveStart){saveState();bMoveStart=false}});VEvent.addListener(map,"moveend",function(){if(CurrentCenter!=null&&arrHightLight.length>0){var a=map.fromLatLngToDivPixel(CurrentCenter),b=map.fromLatLngToDivPixel(map.getCenter());if(Math.sqrt(VUtil.Distance(a.x,a.y,b.x,b.y))>map.getSize().width||Math.sqrt(VUtil.Distance(a.x,a.y,b.x,b.y))>map.getSize().height){CurrentCenter=map.getCenter().copy();TreeBinding.ZoomEnd()}}if(directionLatLng!=null&&arrDes.length>1){var a=map.fromLatLngToDivPixel(directionLatLng),b=map.fromLatLngToDivPixel(map.getCenter());(Math.sqrt(VUtil.Distance(a.x,a.y,b.x,b.y))>map.getSize().width||Math.sqrt(VUtil.Distance(a.x,a.y,b.x,b.y))>map.getSize().height)&&GetDirectionLatLngs()}DisplayPopupScroll("auto");enableSaveRegion();if(bMoveStart){saveState();bMoveStart=false}})}function InitMapArea(){VirtualMarker.CreateLayer("POI",10,19,0,0,8,null,function(d,a,c,b){AJLocationSearch.GetPoiForTiles(a,c,b)},function(){ShowLocationInfo(null,this.GUID,"poi",this.latlng)},true)}var resultActive=-1;function HightlightActiveItem(b){if(resultActive!=-1){var a=document.getElementById("resultItem_"+resultActive);ResultEntryInActive(a)}if(dsResultData.Tables[0].Rows[b-1].DolGisId!=-1){resultActive=b;var a=document.getElementById("resultItem_"+resultActive);ResultEntryActive(a)}}function ResultEntryMouseOver(){}function ResultEntryMouseOut(){}function ResultEntryActive(a){arrSearchMapResult[resultActive-1].active();$(a).addClass("resultItem-active")}function ResultEntryInActive(a){arrSearchMapResult[resultActive-1].unactive();if(a==null)return;$(a).removeClass("resultItem-active")}function ResultEntryPlaceABMouseOver(a){$(a).addClass("SPresultItem-active")}function ResultEntryPlaceABMouseOut(a){$(a).removeClass("SPresultItem-active")}function captureMap(a){closeContextMenu();var b="l="+map.getLevel()+"&kv="+a.toUrlValue()+"&m="+a.toUrlValue()+",point-1.gif";window.open("/Maps/ShareMap/Default.aspx?qs="+AJLocationSearch.URLEncoding(b).value);ClickStatisticsInsert("CaptureMap","Chup anh ban do")}function zoomTo(b,a){closeContextMenu();map.setCenter(b,a)}function zoomIn(a){closeContextMenu();map.setCenter(a,map.getLevel()+1)}function zoomOut(a){closeContextMenu();map.setCenter(a,map.getLevel()-1)}isMeasureDistance=false;function measureDistance(){closeContextMenu();isMeasureDistance=true;ShowPopUpMyMapDistance()}function searchNearBy(a){closeContextMenu();ShowSearchNearByLngLat(a)}function RestoreUserRegion(){map.setCenter(GetStoredLatLng(),GetStoredLevel())}function SaveUserRegion(){if(bRegionSaved)return;disableSaveRegion();SetUserRegion(map.getCenter().lat(),map.getCenter().lng(),map.getLevel())}function SetUserRegion(c,b,a){setCookie("UserRegion",c+"%"+b+"%"+a,5e3,"http://www.vietbando.com/","","")}function GetStoredLatLng(){var a=getCookie("UserRegion");if(a!=null&&a!=""){var b=a.split("%");return new VLatLng(b[0],b[1])}else return new VLatLng(14.102783,109.649506)}function GetStoredLevel(){var a=getCookie("UserRegion");if(a!=null&&a!=""){var b=a.split("%");return parseInt(b[2])}else return 5}var bRegionSaved=false;function enableSaveRegion(){if(!bRegionSaved)return;if(isSupportEffect()){$("#ReturnHome").css("opacity","1");$("#ReturnHome").css("filter","alpha(opacity = 100)");$("#SaveView").css("opacity","1");$("#SaveView").css("filter","alpha(opacity = 100)")}bRegionSaved=false}function disableSaveRegion(){if(isSupportEffect()){$("#ReturnHome").css("opacity","0.4");$("#ReturnHome").css("filter","alpha(opacity = 40)");$("#SaveView").css("opacity","0.4");$("#SaveView").css("filter","alpha(opacity = 40)")}bRegionSaved=true}function DisplayPopupScroll(b){var a=document.getElementById("popup_max");if(a!=null)a.style.overflow=b;var c=document.getElementById("Tree");if(c!=null)c.style.overflow=b}var KeySearch,PAGE_ROWS=10,PAGE_SHOW=7,DELTA_FROM_CENTER=3,RelativeDir="",pTitleLength=50,popupW=595,popupH=250,CurGuid="",ContentLocation={ActiveTab:function(a,c,b){if(document.getElementById("tab"+a)==null)return;if(document.getElementById("tab"+a).className!="current"){if(document.getElementById(a+"content").innerHTML=="")switch(a){case "overview":ContentLocation.GetOverview(b);break;case "detail":ContentLocation.GetDetail(c);break;case "review":ContentLocation.GetReview(b);break;case "photo":ContentLocation.GetPhoto(b);break;case "video":ContentLocation.GetVideo(b)}}else{ContentLocation.Loading=false;return}document.getElementById("taboverview").className="none";document.getElementById("tabdetail").className="none";document.getElementById("tabreview").className="none";document.getElementById("tabphoto").className="none";document.getElementById("tabvideo").className="none";document.getElementById("overviewcontent").className="pcHide";document.getElementById("detailcontent").className="pcHide";document.getElementById("reviewcontent").className="pcHide";document.getElementById("photocontent").className="pcHide";document.getElementById("videocontent").className="pcHide";document.getElementById(a+"content").className="pc";document.getElementById("tab"+a).className="current"},GetReview:function(c,d){if(c==null||c==""||c=="undefined"||c=="null")return;if(d==null)d="useful";dtReview=AJLocationSearch.GetReview(c,d).value;var m=new RegExp("\x0a","g"),i=new Date,l=i.getDate(),j=i.getMonth()+1,k=i.getFullYear(),b='<div id="review" class="review" style="width:100%;">',f=false;if(dtReview!=null)dtReview=dtReview.Tables[0];if(dtReview!=null&&dtReview.Rows.length>0)if(dtReview.Rows[0].rou==1&&dtReview.Rows[0].UserName!=""&&dtReview.Rows[0].Content!=null){b+='<div id="wrLink">Nhận xét của bạn';b+='\t\t\t\t<div class="row">\t\t\t\t\t<p style="left:40px">'+dtReview.Rows[0].Content.replace(m,"<br/>")+'</p>\t\t\t\t\t<p><a href="javascript:ContentLocation.EditReview()">Chỉnh sửa</a>\t\t\t\t\t - <a href="javascript:ContentLocation.DeleteReview(\''+c+"')\">Xóa</a></p>";if(dtReview.Rows[0].Checked)b+='<span style="color:#336600">Nhận xét của bạn đã được duyệt</span>';else b+='<span style="color:red">Nhận xét của bạn đang chờ kiểm duyệt nội dung, chúng tôi sẽ nhanh chóng phản hồi trong thời gian ngắn nhất</span>';b+="</div></div>";f=true}if(!f)b+='<p id="wrLink"><a href="javascript:ContentLocation.ShowReviewForm();">Viết nhận xét của bạn</a></p>';b+='<div id="ReviewForm" class="jForm" style="display:none">\t\t\t\t\t<fieldset>\t\t\t\t\t\t<legend>Gửi nhận xét</legend>\t\t\t\t\t\t<div>\t\t\t\t\t\t\t<label for="rvTitle">Tiêu đề:</label>\t\t\t\t\t\t\t<input id="rvTitle" name="txtTitle" type="text" style="width:400px" />\t\t\t\t\t\t</div>\t\t\t\t\t\t<div>\t\t\t\t\t\t\t<label for="rating">Đánh giá:</label>\t\t\t\t\t\t\t<ul id="rating" class="rating">\t\t\t\t\t\t\t\t<li id="r1" class="starunrated" onmouseover="Rating.displayAsRate(1)" onclick="Rating.setRate(1)" onmouseout="Rating.displayRated()"/>\t\t\t\t\t\t\t\t<li id="r2" class="starunrated" onmouseover="Rating.displayAsRate(2)" onclick="Rating.setRate(2)" onmouseout="Rating.displayRated()"/>\t\t\t\t\t\t\t\t<li id="r3" class="starunrated" onmouseover="Rating.displayAsRate(3)" onclick="Rating.setRate(3)" onmouseout="Rating.displayRated()"/>\t\t\t\t\t\t\t\t<li id="r4" class="starunrated" onmouseover="Rating.displayAsRate(4)" onclick="Rating.setRate(4)" onmouseout="Rating.displayRated()"/>\t\t\t\t\t\t\t\t<li id="r5" class="starunrated" onmouseover="Rating.displayAsRate(5)" onclick="Rating.setRate(5)" onmouseout="Rating.displayRated()"/>\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t\t<span id="RateExplain" class="gray">(Chưa đánh giá)</span>\t\t\t\t\t\t</div>\t\t\t\t\t\t<p style="padding-top:10px"><textarea rows="10" cols="100" id="rvContent" name="rvContent"></textarea></p>\t\t\t\t\t</fieldset>\t\t\t\t\t<div class="submit">\t\t\t\t\t\t<span id="rverror" style="float:left;color:red"></span>\t\t\t\t\t\t<input type="button" value="Gửi nhận xét" onclick="ContentLocation.SendReview(\''+c+'\')"/>\t\t\t\t\t\t<input name="Reset" type="reset" onclick="ContentLocation.HideReviewForm()" value="Hủy" />\t\t\t\t\t</div>\t\t\t\t</div>';if(dtReview!=null&&(!f&&dtReview.Rows.length>0||f&&dtReview.Rows.length>1)){b+='<p style="text-align:right;">Sắp xếp theo: ';if(d=="useful")b+="<strong>Nhận xét hay</strong>";else b+="<a href=\"javascript:ContentLocation.GetReview('"+c+"','useful');\">Nhận xét hay</a>";b+="&nbsp;&nbsp;|&nbsp;&nbsp;";if(d=="date")b+="<strong>Ngày</strong>";else b+="<a href=\"javascript:ContentLocation.GetReview('"+c+"','date');\">Ngày</a>";b+="&nbsp;&nbsp;|&nbsp;&nbsp;";if(d=="rate")b+="<strong>Đánh giá</strong>";else b+="<a href=\"javascript:ContentLocation.GetReview('"+c+"','rate');\">Đánh giá</a>";for(var a=0;a<dtReview.Rows.length;a++){if(dtReview.Rows[a].rou==1)continue;if(dtReview.Rows[a].DateAdded!=null){var g=dtReview.Rows[a].DateAdded.split(" "),e=g[1].split("http://www.vietbando.com/");if(e[0]==l&&e[1]==j&&e[2]==k)g[0]="Today";if(e[0]==l-1&&e[1]==j&&e[2]==k)g[0]="Yesterday";dtReview.Rows[a].DateAdded=g.join(" ");dtReview.Rows[a].DateAdded=dtReview.Rows[a].DateAdded.replace("Today","Hôm nay");dtReview.Rows[a].DateAdded=dtReview.Rows[a].DateAdded.replace("Yesterday","Hôm qua");dtReview.Rows[a].DateAdded=dtReview.Rows[a].DateAdded.replace("Monday","Thứ hai");dtReview.Rows[a].DateAdded=dtReview.Rows[a].DateAdded.replace("Tuesday","Thứ ba");dtReview.Rows[a].DateAdded=dtReview.Rows[a].DateAdded.replace("Wednesday","Thứ tư");dtReview.Rows[a].DateAdded=dtReview.Rows[a].DateAdded.replace("Thursday","Thứ năm");dtReview.Rows[a].DateAdded=dtReview.Rows[a].DateAdded.replace("Friday","Thứ sáu");dtReview.Rows[a].DateAdded=dtReview.Rows[a].DateAdded.replace("Saturday","Thứ bảy");dtReview.Rows[a].DateAdded=dtReview.Rows[a].DateAdded.replace("Sunday","Chủ nhật")}b+='\t\t\t\t<div class="row">\t\t\t\t\t<img class="avatar" src="'+RelativeDir+'images/mymap_icon/media_4.gif"/>\t\t\t\t\t<span class="author">'+dtReview.Rows[a].UserName+'</span> - <span class="date">'+dtReview.Rows[a].DateAdded+"</span>\t\t\t\t\t - ";for(var h=1;h<=dtReview.Rows[a].Rating;h++)b+='<img src="'+RelativeDir+'images/start_yellow.gif"/>';for(var h=dtReview.Rows[a].Rating+1;h<=5;h++)b+='<img src="'+RelativeDir+'images/start_gray.gif"/>';b+="<p>"+dtReview.Rows[a].Content.replace(m,"<br/>")+"</p>\t\t\t\t\t\t</div>"}b+="</div>"}SafeSetInnerHtml("reviewcontent",b)},EditReview:function(){if(dtReview.Rows[0].Checked)if(confirm("Nhận xét của bạn đã được duyệt, chỉnh sửa nội dung của nhận xét này sẽ dẫn tới việc bạn phải chờ để được kiểm duyệt nội dung lại, bạn đó đồng ý chỉnh sửa không ?")==false)return;ContentLocation.ShowReviewForm();document.getElementById("rvTitle").value=dtReview.Rows[0].Title;document.getElementById("rvContent").value=dtReview.Rows[0].Content;Rating.setRate(dtReview.Rows[0].Rating)},ShowReviewForm:function(){var a=AJLocationSearch.BeginWriteAReview().value;if(a){document.getElementById("ReviewForm").style.display="";document.getElementById("wrLink").style.display="none"}else window.location="Login.aspx"},HideReviewForm:function(){document.getElementById("ReviewForm").style.display="none";document.getElementById("wrLink").style.display="";Rating.setUnRated()},SendReview:function(b){var f=document.getElementById("rvTitle").value,d=Rating.RatePoint,c=document.getElementById("rvContent").value,a=document.getElementById("rverror");if(b==null||b==""){a.innerHTML="Xin lỗi, bạn không thể gửi nhận xét cho vị trí này";return}if(d==0||c==""){a.innerHTML="Vui lòng đánh giá và viết nhận xét của bạn trước khi gửi";return}if(c.length<30){a.innerHTML="Xin lỗi, nhận xét của bạn phải nhiều hơn 30 ký tự";return}var e=AJLocationSearch.SendReview(f,d,c,b).value;if(e)ContentLocation.GetReview(b);else a.innerHTML="Nhận xét của bạn không thể gửi được, hãy thử Refresh lại trang"},DeleteReview:function(b){var a="Bạn thực sự muốn xóa nhận xét này ?";if(dtReview.Rows[0].Checked)a="Nhận xét của bạn đã được duyệt, Bạn có chắc muốn xóa nhận xét này ?";if(confirm(a)==true){AJLocationSearch.DeleteReview(b);ContentLocation.GetReview(b)}},LoadMiniMap:function(d,e){var b=document.getElementById("InfoMap");if(b==null)return;var a=new VMap(b);a.addControl(new VSmallZoomControl);a.setCenter(new VLatLng(d,e),10);var c=new VIcon(RelativeDir+"images/mymap_icon/point_7.gif");c.iconSize=new VSize(32,32);var g=new VMarkerOptions(c),f=new VMarker(new VLatLng(d,e),g);a.addOverlay(f)}};function ShowAJLoad(a){var a=document.getElementById(a);if(a!=null){var c=a.style.width,b=a.style.height;a.className="ajLoading";a.style.width=c;a.style.height=b;a.innerHTML=""}}function HideAJLoad(a,b){if(document.getElementById(a)!=null)if(b!=null)document.getElementById(a).className=b;else document.getElementById(a).className=""}Rating={RatePoint:0,setUnRated:function(){Rating.RatePoint=0;Rating.displayRated()},displayAsRate:function(b){for(var a=1;a<=b;a++){var c=document.getElementById("r"+a);c.className="starrated"}for(var a=b+1;a<=5;a++){var c=document.getElementById("r"+a);c.className="starunrated"}Rating.displayExplain(b)},setRate:function(a){Rating.displayAsRate(a);Rating.RatePoint=a},displayRated:function(){Rating.displayAsRate(Rating.RatePoint)},displayExplain:function(b){var a=document.getElementById("RateExplain");switch(b){case 0:a.innerHTML="(Chưa đánh giá)";break;case 1:a.innerHTML="(Chưa tốt)";break;case 2:a.innerHTML="(Bình thường)";break;case 3:a.innerHTML="(Tốt)";break;case 4:a.innerHTML="(Rất tốt)";break;case 5:a.innerHTML="(Tuyệt vời)"}}};function PlaceBinding(u){isSearching=false;hideBusyDiv();dsResultData=u.value;var a=[];if(null!=dsResultData&&"object"==typeof dsResultData){var v=dsResultData.Tables[0].Rows.length,d=dsResultData.Tables[1].Rows[0].HitSize,b=dsResultData.Tables[1].Rows[0].Key,m=dsResultData.Tables[1].Rows[0].What,l=dsResultData.Tables[1].Rows[0].Where;b=b.replace(/\[QUOTE]/g,'"');var j=b.indexOf("|"),f=b,e="";if(j>=0){f=Global.TrimSpace(b.substring(0,j));e=Global.TrimSpace(b.substring(j+1))}if(e!="")if(f!="")FillQueryToTextBox(f+" | "+e);else FillQueryToTextBox("$ "+e);else FillQueryToTextBox(f);var c=parseInt((d+PAGE_ROWS-1)/PAGE_ROWS),k=10;c=c>k?k:c;var t=c>PAGE_SHOW?PAGE_SHOW:c,h=dsResultData.Tables[1].Rows[0].PageIdx,n=dsResultData.Tables[1].Rows[0].Lx,o=dsResultData.Tables[1].Rows[0].Ly,p=dsResultData.Tables[1].Rows[0].Rx,q=dsResultData.Tables[1].Rows[0].Ry;searchType=dsResultData.Tables[1].Rows[0].SearchType;var r=dsResultData.Tables[1].Rows[0].SuggestedKey,g=(h-1)*PAGE_ROWS+1,s=g+PAGE_ROWS-1>d?d:g+PAGE_ROWS-1;if(false&&arrMapPath!=null&&arrMapPath.length>0){var i='<div class="dtree"  style="padding: 0px 10px 10px;"><div class="dTreeNode">                                <img id="itree0" alt="" src="Treeview/dtree/img/base.gif"/>                                <div id="map_path_div" style="display:inline;white-space:normal;">';i+=TreeBinding.GetMapPath(" > ",true,true);i+="</div></div>";a[a.length]=i}a[a.length]='<div id="TablePlace">';a[a.length]=Global.GetResultText(b,"<b>"+f+"</b>",e,r,d,dsResultData.Tables[1].Rows[0].IsLonLat,dsResultData.Tables[1].Rows[0].IsAddress,g,s);KeySearch=b;h+1<=c&&isFirstSearch&&setTimeout(function(){isBindingMorePlace=true;AJLocationSearch.FindMorePlace(b,m,l,1,map.getLevel(),n,o,p,q,searchType,MorePlaceBinding)},1e3);ClearSearchMapResult();if(plHighlight!=null){map.removeOverlay(plHighlight);plHighlight=null}HideSelectPlaceBox();isFirstSearch=false;a[a.length]=BindResult(dsResultData.Tables[0]);a[a.length]="</div>";a[a.length]=Global.GetComplainLink(b);a[a.length]=Global.BuildPaging(h,c,d,t,Global.PagingFindPlace,[RemoveHTMLTag(b),m,l,n,o,p,q,searchType])}else{a[a.length]="</div>";a[a.length]=Global.GetNotFoundText("<b>"+RemoveHTMLTag(document.getElementById("mapinput").value)+"</b>","","","");a[a.length]=Global.GetComplainLink(KeySearch)}LoadPlaceTool();$("#searchresult_div").html(a.join("")).scrollTop(0);if(!dontFit){bMoveStart=true;map.fitMultiOverlays(arrSearchMapResult)}}function PhoneBinding(h){isSearching=false;hideBusyDiv();dsResultData=h.value;ClearSearchMapResult();if(plHighlight!=null){map.removeOverlay(plHighlight);plHighlight=null}HideSelectPlaceBox();var a=[];a[a.length]='<div id="TablePlace">';if(dsResultData!=null&&typeof dsResultData=="object"){var c=dsResultData.Tables[1].Rows[0].HitSize;KeySearch=dsResultData.Tables[1].Rows[0].Key;var k=dsResultData.Tables[0].Rows.length,b=parseInt((c+PAGE_ROWS-1)/PAGE_ROWS),d=dsResultData.Tables[1].Rows[0].PageIdx,f=b>PAGE_SHOW?PAGE_SHOW:b,j=1,e=10;b=b>e?e:b;var g=(d-1)*PAGE_ROWS+1,i=(d-1)*PAGE_ROWS+dsResultData.Tables[0].Rows.length;if(c>0)a[a.length]=Global.GetFoundText("<b>"+KeySearch+"</b>","số điện thoại","phone number",g,i,c);else a[a.length]='<tr><td height=20px align=left valign=middle style="font-size:11px;">'+Global.GetNotFoundText("<b>"+KeySearch+"</b>","số điện thoại","phone number","")+"</td></tr>";a[a.length]=BindResult(dsResultData.Tables[0]);a[a.length]="</div>";a[a.length]=Global.GetComplainLink(KeySearch);a[a.length]=Global.BuildPaging(d,b,c,f,Global.PagingFindPlace)}else{a[a.length]="</div>";a[a.length]=Global.GetNotFoundText("<b>"+KeySearch+"</b>","số điện thoại","phone number","");a[a.length]=Global.GetComplainLink(KeySearch)}LoadPlaceTool();$("#searchresult_div").html(a.join("")).scrollTop(0);if(!dontFit){bMoveStart=true;map.fitMultiOverlays(arrSearchMapResult)}}function createSMarker(g,d,f,b){if(g==0){b++;var c=new VMarkerOptions(new VIcon("",new VSize(33,33)));c.zIndexProcess=function(){return resultActive==b?3:2};c.customMarker=f;c.offset=new VSize(14,33);var a=new VMarker(d,c);a.order=b;a.type=MARKER_POI;map.addOverlay(a);arrSearchMapResult.push(a);VEvent.addListener(a,"mouseover",function(){});VEvent.addListener(a,"mouseout",function(){})}else{var e=new VMarkerOptions(f);e.zIndexProcess=function(){return 1};var a=new VMarker(d,e);a.GUID=b;a.order=numMoreData+1;a.type=MARKER_MPOI;map.addOverlay(a);arrMorePlaceResult.push(a);numMoreData++;VEvent.addListener(a,"click",function(){ShowLocationInfo(a,a.GUID,"more")})}}function ShowLocationInfo(a,c,d,b){resultActive!=-1&&ResultEntryInActive(document.getElementById("resultItem_"+resultActive));if(a!=null)a.openInfoWindow("Đang tải...");else map.openInfoWindow(b,"Đang tải...");AJLocationSearch.GetInfo(c,function(c){BindLocationInfo(c,a,d,b)})}function BindLocationInfo(h,a,g,c){var d=h.value;if(d!=null&&typeof d=="object"&&d.Tables[0].Rows[0]!=null){var b=d.Tables[0].Rows[0],e=GetLocationFullName(b);c=a!=null?a.getLatLng():c;b.Latitude=c.lat();b.Longitude=c.lng();var f=a!=null?a.order:0;if(a!=null)a.openInfoWindow(BuildMiniPopupWindow(b,f-1,e,false));else map.openInfoWindow(c,BuildMiniPopupWindow(b,f-1,e,false));AtachEventMiniPopup(b,f,e,g)}else if(a!=null)a.openInfoWindow("Không tìm thấy thông tin");else map.openInfoWindow(c,"Không tìm thấy thông tin")}function BindResult(b){for(var c="",a=0;a<b.Rows.length;a++){if(b.Rows[a].DolGisId=="-1"){latlng=new VLatLng(b.Rows[a].Latitude,b.Rows[a].Longitude);icon=new VIcon("images/mymap_icon/point-1.gif");icon.iconSize=new VSize(32,32);var d=new VMarkerOptions(icon,function(){return 1});marker=new VMarker(latlng,d);marker.order=a+1;marker.type=MARKER_POI;map.addOverlay(marker);arrSearchMapResult.push(marker);if(centerObjectNearby!=null){b.Rows[a]=centerObjectNearby;centerObjectNearby=null}continue}CombineAddress(b.Rows[a]);if(b.Rows[a].Website!=null&&b.Rows[a].Website!=""&&b.Rows[a].Website.indexOf("http://")!=0)b.Rows[a].Website="http://"+b.Rows[a].Website;c+=BuildLocationItem(b.Rows[a],a+1)}return c}function BuildLocationItem(b,c){var a='<div id="resultItem_%Number%" class="resultItem" onmouseout="ResultEntryMouseOut(this)" onmouseover="ResultEntryMouseOver(this)">\t\t\t\t\t\t\t%Icon%%Title%\t\t\t\t\t\t\t<div class="Spacer"></div>\t\t\t\t\t\t\t<p>%Description%</p>\t\t\t\t\t\t\t<ul class="resultOptions">\t\t\t\t\t\t\t\t<li>%FromHere%</li>\t\t\t\t\t\t\t\t<li>%ToHere%</li>\t\t\t\t\t\t\t\t<li>%ViewOnMap%</li>\t\t\t\t\t\t\t\t<li>%SearchNearby%</li>\t\t\t\t\t\t\t\t<li>%Detail%</li>\t\t\t\t\t\t\t</ul>\t\t\t\t\t\t</div>',e=b.VietbandoID,g=b.Table,i=g!="VietbandoID"?ToSafeHTML(b.Name):"<b>"+e+"</b>",j=GetShortText(RemoveHTMLTag(b.Comment),90),m=b.ShortComment,f=ToSafeHTML(b.Address);if(i==""){i=b.Name=f;f=b.Address=""}var d=b.Picture,l=b.Tel,B=b.Logo,x=b.Latitude,w=b.Longitude,z=b.StoreID,e=b.VietbandoID,y=b.Property,A=b.GUID,k="",u=g=="VietbandoID"?"ID":(dsResultData.Tables[1].Rows[0].PageIdx-1)*10+(dsResultData.Tables[0].Rows[0].Table=="VietbandoID"?c-1:c),h="";if(!(g!="ds_store"&&g!="VietbandoID")){if(d!=""&&d!=null&&d!="UPLOADFOLDER/icon.bmp"){if(d.indexOf("http://www.vietbando.com/")==0)d=d.substring(d.indexOf("http://www.vietbando.com/"));h+='<img class="resultImg" src="'+d+'" onerror="this.parentNode.removeChild(this)"/>'}k="red"}h+='<span class="address">'+f+"</span>";if(l!=""&&l!=null)h+=' <span class="phone">'+l+"</span>";if(m=="Placement on map is approximate"){j=b.ShortComment=nLanguage==0?"Vị trí trên bản đồ chỉ là điểm gần đúng":m;k="appr"}if(j!=""&&j!=null)h+='<span class="comment"><span>'+j+"</span></span>";var p='<a class="icon1-10 '+k+'">'+u+'<span class="icon1-10Hover"></span></a>';createSMarker(0,new VLatLng(x,w),p,c-1);a=a.replace(/%Number%/g,c);a=a.replace(/%Icon%/g,p);a=a.replace(/%Order%/g,c);a=a.replace(/%Title%/g,'<a class="resultTitle" onclick="ResultViewDetailCurrentLevel('+c+')">'+i+"</a>");a=a.replace(/%Description%/g,g!="VietbandoID"?h:"");var o="";if(e!=""&&e!=null)o="font-weight:bold";var q=i+(f!=i&&f!=""?", "+f:""),t='<a onclick="state2(ResultFromHere, '+c+", '"+q+"')\">Từ đây</a>",v='<a onclick="state2(ResultToHere, '+c+", '"+q+"')\">Đến đây</a>",s='<a class="flnk" onclick="ResultViewOnMap('+c+')">Phóng to</a>',r='<a class="flnk" onclick="ResultSearchNearBy('+c+')">Tìm xung quanh</a>',n="";if(e!=""&&e!=null)n='<a target="_blank" style="'+o+'"  href="/'+e+'">Chi tiết</a>';a=a.replace(/%FromHere%/g,t);a=a.replace(/%ToHere%/g,v);a=a.replace(/%ViewOnMap%/g,s);a=a.replace(/%SearchNearby%/g,r);a=a.replace(/%Detail%/g,n);return a}var dsMoreData,numMoreData=0;function MorePlaceBinding(j){dsMoreData=j.value;if(dsMoreData!=null&&typeof dsMoreData=="object"&&isBindingMorePlace){var h=RemoveHTMLTag(dsMoreData.Tables[1].Rows[0].Key),i=dsMoreData.Tables[1].Rows[0].SearchType;if(h!=RemoveHTMLTag(KeySearch)||i!=TypeSearch)return;var f=dsMoreData.Tables[1].Rows[0].HitSize,a=parseInt((f+PAGE_ROWS-1)/PAGE_ROWS),c=dsMoreData.Tables[1].Rows[0].PageIdx,k=a>PAGE_SHOW?PAGE_SHOW:a;if(c==1)numMoreData=0;var e=10;a=a>e?e:a;if(f>0){for(var b=0;b<dsMoreData.Tables[0].Rows.length&&b<11;b++){var d=dsMoreData.Tables[0].Rows[b].GUID;if(d==null||d=="")continue;var g=new VIcon("images/cmark.gif");g.iconSize=new VSize(10,10);createSMarker(1,new VLatLng(dsMoreData.Tables[0].Rows[b].Latitude,dsMoreData.Tables[0].Rows[b].Longitude),g,d)}c+1<=a&&setTimeout(function(){CallNextMore(h,c,dsMoreData.Tables[1].Rows[0],TypeSearch)},1e3)}}}function CallNextMore(g,e,a,s){switch(s){case 0:var f=a.What,i=a.Where,b=map.getBounds(),p=b.getNorthWest().lng(),c=b.getNorthWest().lat(),q=b.getSouthEast().lng(),d=b.getSouthEast().lat();if(c>d){var r=c;c=d;d=r}AJLocationSearch.FindMorePlace(g,f,i,e+1,map.getLevel(),p,c,q,d,0,MorePlaceBinding);break;case 6:var f=a.What,l=a.SelName,j=a.SelAddress,n=a.SelLng+"",m=a.SelLat+"",k=a.Radius;AJLocationSearch.FindMoreNearByPoint(g,f,l,j,n,m,k,e+1,MorePlaceBinding);break;case 7:var h=PathSectionID,g=a.Key,f=a.What,i=a.Where,o=a.Radius;AJLocationSearch.FindMoreNearByPolyline(ClientID,GetPolylineOrder(h),arrDes[h].length,g,f,i,e+1,o,MorePlaceBinding)}}function BuildMiniPopupWindow(b,k){var m=b.Name,g=b.Address,j=GetShortText(RemoveHTMLTag(b.Comment),320),r=b.Logo,f=b.Website,e=b.VietbandoID,c=b.Picture,h=b.Tel,l=b.Table,q=b.RootID,p=b.StoreID,n=b.URLFriendly,d=b.GUID,i=l!="ds_store"?"ip":"ds",a=[];a[a.length]='<div class="MiniPopup">';a[a.length]='<span class="Title">'+m;if(d!=""&&d!=null)if(hasFav(d))a[a.length]='<a id="pmarklocation" class="favToogle-Dis favToogle-Ena"></a>';else a[a.length]='<a id="pmarklocation" class="favToogle-Dis"></a>';a[a.length]='</span><br/><p class="Content">';if(c!=""&&c!=null&&c!="UPLOADFOLDER/icon.bmp"){if(c.indexOf("http://www.vietbando.com/")==0)c=c.substring(c.indexOf("http://www.vietbando.com/"));a[a.length]='<span class="popupImg"><img src="'+c+'"/></span>'}if(g!=""&&g!=null)a[a.length]='<span class="address">'+g+"</span>";if(h!=""&&h!=null)a[a.length]='<span class="phone">'+h+"</span>";if(e!=""&&e!=null)a[a.length]='<a class="vietbandoid" target="_blank" href="/'+e+'">'+e+"</a>";if(f!=""&&f!=null)a[a.length]='<a class="website" target="_blank" href="'+f+'">'+GetShortDomain(f)+"</a>";a[a.length]='<span class="comment">'+j+"</span>";if(d!=""&&d!=null&&i=="ip")a[a.length]='<a class="flnk" id="createcontent'+k+'" onclick=\'window.open("DS_Manager/ManageStore.aspx?guid='+d+"&type="+i+"\")'>Sửa thông tin</a>";a[a.length]="</p>";a[a.length]='<ul class="CommonFunction">';a[a.length]='<li><a class="flnk" id="pfromhere">Từ đây</a></li>';a[a.length]='<li><a class="flnk" id="ptohere">Đến đây</a><li>';a[a.length]='<li><a class="flnk" id="pviewonmap">Phóng to</a><li>';a[a.length]='<li><a class="flnk" id="pviewsearchnearby">Tìm xung quanh</a></li>';a[a.length]="</ul>";a[a.length]="</div>";return a.join("")}function AtachEventMiniPopup(a,b,c,d){$("#pfromhere").click(function(){state2(FromHere,a,c)});$("#ptohere").click(function(){state2(ToHere,a,c)});$("#pviewonmap").click(function(){ViewOnMap(a,b,d)});$("#pviewsearchnearby").click(function(){ViewDetailCurrentLevelWithSearchNearBy(a,b,d)});$("#pmarklocation").click(function(){if($(this).hasClass("favToogle-Ena")){DelFav(a);$("#pmarklocation").removeClass("favToogle-Ena")}else{AddFav(a);$("#pmarklocation").addClass("favToogle-Ena");MMSubTabChange(FAVOURITE_TAB)}})}function ShowNewestUserAddPlace(){jQuery.facebox("some html<br/>")}nLanguage=0;var Global={NormalSearchStatus:'Tìm địa chỉ, dịch vụ, sản phẩm và số điện thoại. <a href="Help/index.html" style="cursor: pointer;">Xem thêm</a>',ProductSearchStatus:'Vd:         <a id="cafe,1" onclick="MapExampleClick(this.id)" style="cursor: pointer;">Cafe</a>,         <a id="qa,1" onclick="MapExampleClick(this.id)" style="cursor: pointer;">Quần áo trẻ em</a>,         <a id="ga,1" onclick="MapExampleClick(this.id)" style="cursor: pointer;">Cơm gà</a>,         <a id="ht,1" onclick="MapExampleClick(this.id)" style="cursor: pointer;">Hủ tiếu</a>,         <a id="pi,1" onclick="MapExampleClick(this.id)" style="cursor: pointer;">Pizza</a>,         v.v...',NormalSearchStatusE:'Find addresses, businesses, products and phones. <a href="Help/index.html" style="cursor: pointer;">Learn more</a>',ProductSearchStatusE:'Ex:         <a id="cafe,1" onclick="MapExampleClick(this.id)" style="cursor: pointer;">Cafe</a>,         <a id="qa,1" onclick="MapExampleClick(this.id)" style="cursor: pointer;">Quần áo trẻ em</a>,         <a id="ga,1" onclick="MapExampleClick(this.id)" style="cursor: pointer;">Cơm gà</a>,         <a id="ht,1" onclick="MapExampleClick(this.id)" style="cursor: pointer;">Hủ tiếu</a>,         <a id="pi,1" onclick="MapExampleClick(this.id)" style="cursor: pointer;">Pizza</a>,         v.v...',LoginUrl:"/Accounts/Login.aspx",GetDataUpdating:function(){return "<p>Dữ liệu đang cập nhật.</p>"},DataUpdating:'<p>Dữ liệu đang cập nhật.</p><p>Nếu bạn muốn cập nhật thông tin cho vị trí này, bạn có thể liên hệ với chúng tôi bằng những hình thức sau:</p>\t\t\t\t\t<ul>\t\t\t\t\t  <li>Thông qua trang góp ý: <a href="vbdfeedback.aspx">Bấm vào đây</a></li><br/>\t\t\t\t\t  <li>Hổ trợ trực tuyến: <a href="ymsgr:sendIM?hotro_vietbando" class="nav2"><img border="0" src="http://opi.yahoo.com/online?u=hotro_vietbando&m=g&t=1"/></a></li>\t\t\t\t\t</ul>',GetResultText:function(i,c,b,d,e,k,j,g,h,f){var a="",l="Tọa độ:";if(nLanguage==1)l="Coordinate:";if(e>0)if(k)a='<span class="countPlace">'+l+'</span> <span class="keyPlace">'+i.replace("|","")+"</span>";else if(j)a=Global.GetFoundText("<b>"+i+"</b>","địa chỉ","address",g,h,e);else if(b!=""&&c!="")a=Global.GetFoundText("<b>"+c+"</b> ở <b>"+b+"</b>","","",g,h,e);else if(b!=""&&c=="")a=Global.GetFoundText(b,"","",g,h,e);else a=Global.GetFoundText(c,"","",g,h,e);else if(k)a=Global.GetNotFoundText(i,"tọa độ","coordinate",d,f);else if(j)a=Global.GetNotFoundText("<b>"+i+"</b>","địa chỉ","address",d,f);else{if(c!=""&&b!="")a=Global.GetNotFoundText("<b>"+c+"</b> ở <b>"+b+"</b>","","",d,f);if(c=="")a=Global.GetNotFoundText(b,"","",d,f);if(b=="")a=Global.GetNotFoundText(c,"","",d,f)}return a},GetNotFoundText:function(c,e,d,a,b){if(nLanguage==0)return '<div class="kotimthay">\t\t\t\t\t    Không tìm thấy '+e+' <p class="searchKey">'+c.replace(/[|]/g,"")+"</p>"+(a!=""?'<p class="goiy">Có phải bạn muốn tìm: <a id="dym,0,'+b+'" onclick="MapExampleClick(this.id)">'+a+"</a> <span>?</span></p>":"")+"\t\t\t\t\t    <p>Đề xuất:</p>\t\t\t\t\t    <ul class=\"dexuat\">\t\t\t\t\t      <li>Xin bạn chắc chắn đã viết đúng chính tả.</li>\t\t\t\t\t      <li>Hãy chắc bạn đã chọn đúng vùng cần tìm.\t\t\t\t\t      Thử từ khóa của bạn ở toàn <a onclick=\"TreeBinding.TreeClick(event,0,'Việt Nam','VN')\">Việt Nam</a></li>\t\t\t\t\t      <li>Nếu bạn viết tắt, hãy thử không viết tắt.</li>\t\t\t\t\t      <li>Hãy thử dùng các từ khóa khác có nghĩa tương tự.</li>\t\t\t\t\t    </ul>\t\t\t\t    </div>";else return '<div class="kotimthay">\t\t\t\t    We couldn\'t found '+d+' <p class="searchKey">'+c.replace(/[|]/g,"").replace(/ở gần/g,"near").replace(/ở/g,"in").replace("trong phạm vi","within")+"</p>"+(a!=""?'<p class="goiy">Did you mean: <a id="dym,0,'+b+'" onclick="MapExampleClick(this.id)">'+a+"</a> <span>?</span></p>":"")+"\t\t\t\t    <p>Suggestion:</p>\t\t\t\t    <ul class=\"dexuat\">\t\t\t\t      <li>Make sure all keywords are spelled correctly.</li>\t\t\t\t      <li>Make sure that you chose the correct region.\t\t\t\t\t      <br/>try your keyword at <a onclick=\"TreeBinding.TreeClick(event,0,'Việt Nam','VN')\">Việt Nam</a></li>\t\t\t\t      <li>Please do not use abbreviation.</li>\t\t\t\t      <li>Please try another search with synonym keywords.</li>\t\t\t\t    </ul>\t\t\t    </div>"},GetFoundText:function(a,b,d,h,j,e){if(b==null)b="";if(d==null)d="";var c="cho  "+b,f="Kết quả từ",g="Kết quả tìm kiếm",i="trong số";a=a.replace(/^\s+|\s+$/g,"");if(isLang("en"))a=a.replace(/ở gần/g,"near").replace(/ở/g,"in").replace("trong phạm vi","within");if(e>1)return '<span class="countPlace">'+f+" <b>"+h+"-"+j+"</b> "+i+" <b>"+e+"</b> "+c+'</span>                    <span class="keyPlace">                        '+a.replace("|","")+'                        <span class="searchinwrap"><a><span onclick="LoadTree()">Xem</span></a></span>                    </span>';else return '<span class="countPlace">'+g+" "+c+'</span>                    <span class="keyPlace">                        '+a.replace("|","")+'                        <span class="searchinwrap"><a><span onclick="LoadTree()">Xem</span></a></span>                    </span>'},GetComplainLink:function(a){if(nLanguage==0)return '<div class="kohailong">\t\t\t\t\t\t<div id="fblnk"><p>Bạn không hài lòng về kết quả tìm kiếm?</p>\t\t\t\t\t\t\t<ul>\t\t\t\t\t\t\t  <li><a onclick="Global.ShowFeedBackForm()">Gửi ý kiến của bạn.</a></li>\t\t\t\t\t\t\t  <li><a onclick="loadAddPlaceFunc()">Thêm vị trí của bạn vào bản đồ.</a></li>\t\t\t\t\t\t\t</ul></div>\t\t\t\t\t\t<div id="fbForm" class="jForm" style="display:none">\t\t\t\t\t\t\t<p>Gửi phê bình</p>\t\t\t\t\t\t\t<span class="typevnmese" id="fberror">*Bạn vui lòng gõ tiếng Việt có dấu</span>\t\t\t\t\t\t\t<div>\t\t\t\t\t\t\t\t<label for="fbName">Họ tên:</label>\t\t\t\t\t\t\t\t<input id="fbName" name="fbName" type="text" style="width:220px" />\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div>\t\t\t\t\t\t\t\t<label for="fbEmail">Email:</label>\t\t\t\t\t\t\t\t<input id="fbEmail" name="fbEmail" type="text" style="width:220px" />\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<span>Ý kiến của bạn</span>\t\t\t\t\t\t\t<textarea rows="6" cols="40" id="fbContent" name="fbContent"></textarea>\t\t\t\t\t\t\t<a class="submit_wrap" onclick="Global.SendFeedBack(\''+a+'\')"><span class="submit">Gửi phê bình</span></a>\t\t\t\t\t\t\t<a class="cancel_wrap" onclick="Global.HideFeedBackForm()"><span class="cancel">Hủy</span></a>\t\t\t\t\t\t</div>\t\t\t\t\t</div>';else return '<div class="kohailong">\t\t            <div id="fblnk"><p>Can\'t find what you are looking for?</p>                        <ul>                          <li><a onclick="Global.ShowFeedBackForm()">Send your feedback.</a></li>                          <li><a onclick="loadAddPlaceFunc()">Add your place to the map.</a></li>                        </ul></div>\t\t\t\t    <div id="fbForm" class="jForm" style="display:none">\t\t\t\t\t    <p>Feedback</p>\t\t\t\t\t    <span class="typevnmese" id="fberror">*Please enter valid email</span>\t\t\t\t\t    <div>\t\t\t\t\t\t    <label for="fbName">Name:</label>\t\t\t\t\t\t    <input id="fbName" name="fbName" type="text" style="width:220px" />\t\t\t\t\t    </div>\t\t\t\t\t    <div>\t\t\t\t\t\t    <label for="fbEmail">Email:</label>\t\t\t\t\t\t    <input id="fbEmail" name="fbEmail" type="text" style="width:220px" />\t\t\t\t\t    </div>\t\t\t\t\t    <span>Your opinion:</span>\t\t\t\t\t    <textarea rows="6" cols="40" id="fbContent" name="fbContent"></textarea>\t\t\t\t        <span class="typevnmese" id="fberror"></span>\t\t\t\t\t    <input class="submit" type="button" onclick="Global.SendFeedBack(\''+a+'\')" value="Send"/>\t\t\t\t\t    <input class="cancel" type="button" onclick="Global.HideFeedBackForm()" value="Cancel"/>\t\t\t\t\t</div>\t\t\t\t</div>'},ShowFeedBackForm:function(){document.getElementById("fbForm").style.display="";document.getElementById("fblnk").style.display="none"},HideFeedBackForm:function(){document.getElementById("fbForm").style.display="none";document.getElementById("fblnk").style.display="";document.getElementById("fbName").value="";document.getElementById("fbEmail").value="";document.getElementById("fberror").innerHTML=""},SendFeedBack:function(k){var e="Vui lòng điền đầy đủ thông tin",f="Email của bạn không chính xác",g="Ý kiến của bạn phải trên 30 ký tự",d="<b>Cảm ơn bạn, ý kiến của bạn đã được gửi tới ban quản trị</b>";if(nLanguage==1){e="Please enter required information.";f="Your is email is invalid";g="Your opinion must be more than 30 characters";d="<b>Thank you, your feedback has sent successfully</b>"}var h=document.getElementById("fbName").value,c=document.getElementById("fbEmail").value,b=document.getElementById("fbContent").value,a=document.getElementById("fberror"),l=document.getElementById("fblnk");if(h.length==0||c.length==0||b.length==0){a.innerHTML=e;return}if(!Global.CheckEmail(c)){a.innerHTML=f;return}if(b.length<30){a.innerHTML=g;return}var i="Từ khóa tìm: "+RemoveHTMLTag(k)+"<br/>Ý kiến: "+b+"<br/>Trình duyệt: "+Browser.Name+" "+Browser.FullVersion,j=AJLocationSearch.SendFeedBack(h,c,i).value;if(j){Global.HideFeedBackForm();document.getElementById("fblnk").innerHTML=d}},CheckEmail:function(b){var a=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;if(!a.test(b))return false;else return true},pHPad:30,pVPad:120,pMinW:595,pMinH:250,pMaxW:595,pMaxH:5e3,TreeRatio:.33,LockRequest:false,BuildPaging:function(d,b,k,l,g,h){var a="";if(b>1||k>PAGE_ROWS){var i="« Đầu",j="Cuối »";a+='<ul class="resultPage">';if(d>1)a+='<li><a onclick="'+g(1,h)+'">'+i+"</a></li>";else a+="<li><span>"+i+"</span></li>";var f=Math.max(d-DELTA_FROM_CENTER,1),e=Math.min(d+DELTA_FROM_CENTER,b);if(f==1)e=Math.min(f+2*DELTA_FROM_CENTER,b);else if(e==b)f=Math.max(e-2*DELTA_FROM_CENTER,1);for(var c=f;c<=e;c++)if(c==d)a+='<li><span class="active_page">'+c+"</span></li>";else a+='<li><a onclick="'+g(c,h)+'">'+c+"</a></li>";if(d<b)a+='<li><a onclick="'+g(b,h)+'">'+j+"</a></li>";else a+="<li><span>"+j+"</span></li>";a+="</ul>"}return a},PagingFindPlace:function(b,a){if(a!=null&&a.length>0)return BuildFunction("FindPlace",a,b,0);else return "FindPlace("+b+")"},PagingSearchPlaceForPath:function(b,a){return BuildFunction("SearchPlace",a,b,2)},PagingSearchNearByPolylineExt:function(b,a){return BuildFunction("SearchNearByPolylineExt",a,b,3)},PagingSearchNearByPointExt:function(b,a){return BuildFunction("SearchNearByPointExt",a,b,6)},PagingFindProcductInsideStore:function(a){return "ContentLocation.SearchInsideStore("+a+")"},PagingProductMatch:function(b,a){return "ContentLocation.GetDetailPage("+a[0]+","+b+")"},SearchProduct:function(a){return "ContentLocation.GetProductInsideStore("+a+")"},TrimSpace:function(a){if(a==null)return "";a=a.replace(/\s+/g," ");a=a.replace(/^\s+|\s+$/g,"");return a},RemoveSpace:function(a){if(a==null)return "";a=a.replace(/\s/g,"");return a}};function BuildFunction(e,c,f,d){for(var b=e+"(",a=0;a<c.length;a++){if(d!=null&&a==d)b+=f+",";if(typeof c[a]=="string")b+="'"+c[a].replace(/'/g,"\\'").replace(/"/g,"&quot;")+"',";else b+=c[a]+","}return b.substr(0,b.length-1)+")"}function SafeSetInnerHtml(c,b){var a=document.getElementById(c);if(a!=null)a.innerHTML=b}function SafeAppendInnerHtml(c,b){var a=document.getElementById(c);if(a!=null)a.innerHTML+=b}function installSearchEngine(){if(window.external&&"AddSearchProvider" in window.external){var a=window.location.href;a=a.substring(0,a.lastIndexOf("http://www.vietbando.com/")+1);window.external.AddSearchProvider(a+"vietbando.xml")}else!(window.sidebar&&"addSearchEngine" in window.sidebar)&&alert("No search engine support")}function Utf8Decode(a){var b=a;a=unescape(a);if(/%[a-zA-Z][0-9]/g.test(b))a=Utf8.decode(a).replace(/[+]/g," ");else a=a.replace(/[+]/g," ");return a}function URLEncode(a){return RemoveHTMLTag(a.replace(/\s*[|]\s*/g,", ").replace(/,\s*$/g,"").replace(/[ ]/g,"+").replace(/,/g,"%2C"))}var MessageBox={Show:function(b,g,e,f,d,c,h){if(getCookie("No"+b)=="1")return;MessageBox.Hide(b);var a=$("#PopupTempl").clone();a[0].id=b;a.css("z-index",1e3);$("#messcontent",a).html(g);$(".close",a)[0].onclick=function(){MessageBox.Close(b)};e!=-1&&a.css("left",e);f!=-1&&a.css("top",f);d!=-1&&a.css("right",d);c!=-1&&a.css("bottom",c);$(".messagebox-leftbot",a)[0].className="messagebox-"+h;$(document.body).append(a);a.show()},Hide:function(a){$("#"+a).remove()},Close:function(a){$("#chkNoMess","#"+a).is(":checked")&&setCookie("No"+a,"1",1,"http://www.vietbando.com/");MessageBox.Hide(a)}},Utf8={encode:function(c){c=c.replace(/\r\n/g,"\n");for(var b="",d=0;d<c.length;d++){var a=c.charCodeAt(d);if(a<128)b+=String.fromCharCode(a);else if(a>127&&a<2048){b+=String.fromCharCode(a>>6|192);b+=String.fromCharCode(a&63|128)}else{b+=String.fromCharCode(a>>12|224);b+=String.fromCharCode(a>>6&63|128);b+=String.fromCharCode(a&63|128)}}return b},decode:function(c){var d="",a=0,b=c1=c2=0;while(a<c.length){b=c.charCodeAt(a);if(b<128){d+=String.fromCharCode(b);a++}else if(b>191&&b<224){c2=c.charCodeAt(a+1);d+=String.fromCharCode((b&31)<<6|c2&63);a+=2}else{c2=c.charCodeAt(a+1);c3=c.charCodeAt(a+2);d+=String.fromCharCode((b&15)<<12|(c2&63)<<6|c3&63);a+=3}}return d}};function includeJavascript(b){var c=document.getElementsByTagName("head").item(0),a=document.createElement("script");a.setAttribute("language","javascript");a.setAttribute("type","text/javascript");a.setAttribute("src",b);c.appendChild(a);return false}function GetShortText(a,b){if(a==null||a=="")return "";if(a.length<b)return a;var c=a.substring(b).indexOf(" ");if(c<0)return a;return a.substring(0,b+c)+"..."}function CombineAddress(a){if(a.Address!=null)return a.Address;a.Address=ConcatAddress(a.Number,a.Street,a.Ward,a.District,a.Province);return a.Address}function ConcatAddress(d,e,f,b,c){var a="";a+=d!=""&&d!=null?d+" ":"";a+=e!=""&&e!=null?e+", ":"";a+=f!=""&&f!=null?f+", ":"";a+=b!=""&&b!=null?b+", ":"";a+=c!=""&&c!=null?c:"";return a}var randomLocation;function RandomLocationHTML(){if(randomLocation==null)randomLocation=AJLocationSearch.GetRandomLocation().value;var a="";if(null!=randomLocation&&"object"==typeof randomLocation){for(var c=0;c<randomLocation.Tables[0].Rows.length;c++){var b=randomLocation.Tables[0].Rows[c].Name;a+='<a title="'+b+'" onclick="ShowLocation(\''+randomLocation.Tables[0].Rows[c].GUID+"')\">"+(b.length>42?b.substring(0,42)+"...":b)+"</a><br/>"}if(a!="")a='<div class="Acor"><span class="Title">Vị trí ngẫu nhiên</span>                        <div class="Content">'+a+"</div></div>"}return a}function setImageDelay(c,b){var a=document.getElementById(c);if(a==null){setTimeout(function(){setImageDelay(c,b)},200);return}a.src=b}function setCookie(h,g,a,d,c,f){var b=new Date;b.setTime(b.getTime());if(a)a=a*1e3*60*60*24;var e=new Date(b.getTime()+a);document.cookie=h+"="+escape(g)+(a?";expires="+e.toGMTString():"")+(d?";path="+d:"")+(c?";domain="+c:"")+(f?";secure":"")}function getCookie(a){var b=document.cookie.indexOf(a+"="),d=b+a.length+1;if(!b&&a!=document.cookie.substring(0,a.length))return null;if(b==-1)return null;var c=document.cookie.indexOf(";",d);if(c==-1)c=document.cookie.length;return unescape(document.cookie.substring(d,c))}function DeleteCookie(b,c,a){if(getCookie(b))document.cookie=b+"="+(c?";path="+c:"")+(a?";domain="+a:"")+";expires=Thu, 01-Jan-1970 00:00:01 GMT"}var busyDivTmr=null,keepContentID="",bShowingBusy=false;function showBusyDiv(e,a){if(document.getElementById("divBusy")!=null)return;if($("#"+a)[0].style.display=="none")return;bShowingBusy=true;if(a==null||document.getElementById(a)==null)a="leftpanel";if(e==null||e=="")e="Đang tải dữ liệu, vui lòng chờ trong giây lát.<br/>Nếu chờ quá lâu, bạn hãy bấm <span><b>Ctrl+F5</b></span>.";keepContentID=a;var f=$("#"+a).clone();f[0].id="divBusy";f.html("<img width='24px' height='24px' id='loadingImg' src='images/loading.gif' /><a class='a1' id='loadingText' style='line-height:20px;font-size:12px;color:#333;'>"+e+"</a>");var b=document.getElementById(a);b.parentNode.appendChild(f[0]);var d=document.getElementById("loadingImg"),h=(parseInt(b.offsetWidth)-parseInt(d.offsetWidth))/2,j=(parseInt(b.offsetHeight)-parseInt(d.offsetHeight))/2-50;d.style.position="absolute";d.style.left=h+"px";d.style.top=j+"px";var c=document.getElementById("loadingText"),g=(parseInt(b.offsetWidth)-parseInt(c.offsetWidth))/2,i=(parseInt(b.offsetHeight)-parseInt(c.offsetHeight))/2-10;c.style.position="absolute";c.style.left=g+"px";c.style.top=i+"px";b.style.display="none"}function hideBusyDiv(){if(keepContentID==""||keepContentID==null)return;$("#divBusy").remove();$("#"+keepContentID).show()}var myWidth=0,myHeight=0;function calculateWindowSize(){if(typeof window.innerWidth=="number"){myWidth=window.innerWidth;myHeight=window.innerHeight}else if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){myWidth=document.documentElement.clientWidth;myHeight=document.documentElement.clientHeight}else if(document.body&&(document.body.clientWidth||document.body.clientHeight)){myWidth=document.body.clientWidth;myHeight=document.body.clientHeight}}function MakeItLoom(c,b,d){var a=document.getElementById(c);if(a==null||browserName=="msie")return;a.style.opacity=b/100;a.style.filter="alpha(opacity = "+b+")";VEvent.addDOMListener(a,"mouseout",function(){$("#"+c).stop().animate({opacity:b/100},d,"linear")});VEvent.addDOMListener(a,"mouseover",function(){$("#"+c).stop().animate({opacity:1},d,"linear")})}function isPhoneNumber(a){a=Global.RemoveSpace(a.replace(".",""));if(a.length>=6&&!isNaN(a))return true;else return false}function RemoveHTMLTag(a){if(a==null)return "";a=a.replace(/<.*?>|<[/].*?>/g,"");return a}function ToSafeHTML(a){if(a==null)return "";return a.replace(/'/g,"&#39").replace(/"/g,"&quot;")}function checkLogin(){return AJLocationSearch.IsAuthenticated().value}function RedirectToLoginForm(){window.location=Global.LoginUrl+"?ReturnUrl="+escape(BuildMapLink())}function MembershipRequire(){if(!checkLogin()){RedirectToLoginForm();return false}return true}function NormalizeGeo(b,a){var c=new RegExp(a,"g");return b.replace(c,"").replace(/[)]/g,"").replace(/[(]/g,"").replace(/[ ]+/g,",")}function GeoAsText(c,d){var a=d;if(d=="LINESTRING")a+="(";else a+="((";for(var b=0;b<c.length;b++){a+=c[b].lng()+" "+c[b].lat();if(b<c.length-1)a+=","}if(d=="LINESTRING")a+=")";else a+="))";return a}Array.prototype.remove=function(a,c){var b=this.slice((c||a)+1||this.length);this.length=a<0?this.length+a:a;return this.push.apply(this,b)};Array.prototype.removeItem=function(b){for(var a=this.length-1;a>=0;a--)this[a]==b&&this.remove(a,a);return this};function ReportError(){if(nLanguage==0)alert("Đã có lỗi trong quá trình kết nối đến server. Bạn vui lòng nhấn Ctrl + F5 để refresh lại trang web.");else alert("Error occured while trying to connect server. Press Ctrl + F5 to refresh page.")}function autoIncrease(a,b,d,c,e){e==null&&$("#"+a).stop().animate({opacity:.2},500,"linear");$("#"+a).html(b);if(b==d){$("#"+a).stop().animate({opacity:1},500,"linear");return}setTimeout(function(){autoIncrease(a,b+1,d,c,true)},c)}function isSupportEffect(){return browserName!="msie"}function LocationObjectHook(a){return AJLocationSearch.GetGeoObjectByPoint(a.lng()+"",a.lat()+"").value}function LocationPathHook(e){var d=LocationObjectHook(e);if(d==null)return "";var c=d.szStreet,a=d.szDistrict,b="";b+=c!=""&&c!=null?c+", ":"";b+=a!=""&&a!=null?a:"";return b}function LocationHook(a){return AJLocationSearch.GetGeoInfoByPoint(a.lng()+"",a.lat()+"").value}function GetLocationFullName(d){var b=d.Name,a=CombineAddress(d),c=b;if(a!=b&&a!="")c=b+", "+a;return c}function QueryString(b){var c=window.location.href,a="";a=(new RegExp("([?]|&)"+b+"=([^&#]*)")).exec(c);if(!a)return "";return a[2]}var Browser={Name:"",FullVersion:"",MajorVersion:"",AppName:"",UserAgent:""};function BrowserDetect(){var h=navigator.appVersion,b=navigator.userAgent,d=navigator.appName,a=""+parseFloat(navigator.appVersion),e=parseInt(navigator.appVersion,10),g,c,f;if((c=b.indexOf("MSIE"))!=-1){d="Internet Explorer";a=b.substring(c+5)}else if((c=b.indexOf("Opera"))!=-1){d="Opera";a=b.substring(c+6)}else if((c=b.indexOf("Chrome"))!=-1){d="Chrome";a=b.substring(c+7)}else if((c=b.indexOf("Safari"))!=-1){d="Safari";a=b.substring(c+7)}else if((c=b.indexOf("Firefox"))!=-1){d="Firefox";a=b.substring(c+8)}else if((g=b.lastIndexOf(" ")+1)<(c=b.lastIndexOf("http://www.vietbando.com/"))){d=b.substring(g,c);a=b.substring(c+1);if(d.toLowerCase()==d.toUpperCase())d=navigator.appName}if((f=a.indexOf(";"))!=-1)a=a.substring(0,f);if((f=a.indexOf(" "))!=-1)a=a.substring(0,f);e=parseInt(""+a,10);if(isNaN(e)){a=""+parseFloat(navigator.appVersion);e=parseInt(navigator.appVersion,10)}Browser.Name=d;Browser.FullVersion=a;Browser.MajorVersion=e;Browser.AppName=navigator.appName;Browser.UserAgent=navigator.userAgent}var VirtualMarker={OverlayLoc:[],currLoc:null,isClicked:true,Layers:[],Init:function(a){a="#"+a;VEvent.addListener(map,"mousemove",function(){var b=map.getCurrentPointer();b.x-=$(a).offset().left;b.y-=$(a).offset().top;b=map.fromContainerPixelToLatLng(b);b=VProjection.fromLatLngToPixel(b,map.getLevel());var d=[];d.x=parseInt(b.x/256);d.y=parseInt(b.y/256);for(var e=VirtualMarker.Layers.length-1;e>=0;e--){var h=VirtualMarker.GetLayer(VirtualMarker.Layers[e].Name);if(h!=null&&!h.Visible)continue;var f=VirtualMarker.OverlayLoc[VirtualMarker.Layers[e].Name][d.x+"_"+d.y];if(f==null)continue;for(var g=0;g<f.length;g++){var c=f[g];if(Math.abs(c.X-b.x)<=c.Radius&&Math.abs(c.Y-b.y)<=c.Radius){$(a)[0].style.cursor="pointer";VirtualMarker.currLoc=c;return}}}if($(a)[0].style.cursor=="pointer")$(a)[0].style.cursor='url("/Maps/API/Skins/WhiteSkin/images/openhand.cur"), auto';VirtualMarker.currLoc=null});VEvent.addListener(map,"click",function(){VirtualMarker.isClicked&&VirtualMarker.currLoc!=null&&VirtualMarker.currLoc.onclickfunc();setTimeout(function(){VirtualMarker.isClicked=true},100)})},GetLayer:function(b){for(var a=0;a<VirtualMarker.Layers.length;a++)if(VirtualMarker.Layers[a].Name==b)return VirtualMarker.Layers[a];return null},CreateLayer:function(b,d,e,l,m,n,f,i,j,k){var c=VirtualMarker.GetLayer(b);if(c!=null&&c.MapType!=null){c.Visible=true;map.setCenter(map.getCenter(),map.getLevel(),c.MapType);return}var a=[];a.Name=b;a.FromLevel=d;a.ToLevel=e;a.OffsetX=l;a.OffsetY=m;a.Radius=n;a.GetImageFunc=f;a.GetDataFunc=i;a.OnClickFunc=j;a.Visible=true;a.Index=VirtualMarker.Layers.length;VirtualMarker.Layers[VirtualMarker.Layers.length]=a;VirtualMarker.OverlayLoc[b]=[];VEvent.addListener(map,"moveend",function(){VirtualMarker._GetData(b)});if(k)a.MapType=V_NORMAL_MAP.getTileLayers()[0];else{var h=new VTileLayer(new VCopyrightCollection("Vietbando Inc"),d,e);h.getTileUrl=function(c,a){if(a>=d&&a<=e)return f(b,c,a);else return "http://www.vietbando.com/Maps/API/Skins/WhiteSkin/images/transparent.png"};var g=a.MapType=new VMapType([V_NORMAL_MAP.getTileLayers()[0],h],V_NORMAL_MAP.getProjection(),b);map.addMapType(g);map.setCenter(map.getCenter(),map.getLevel(),g)}},_GetData:function(d){var a=VirtualMarker.GetLayer(d);if(a!=null&&!a.Visible)return;for(var c=map.getCurrentLayerColRows(0),g=[],e=map.getLevel(),f="",b=0;b<c.length;b++)if(VirtualMarker.OverlayLoc[d][c[b].x+"_"+c[b].y]==null){g.push(c[b]);f+=c[b].x+","+c[b].y+";"}e>=a.FromLevel&&e<=a.ToLevel&&f!=""&&a.GetDataFunc(d,f,e,function(b){VirtualMarker.BindOverlay(b,d,a.OnClickFunc,g,e,a.OffsetX,a.OffsetY,a.Radius)})},HideAllCustomLayer:function(){for(var a=0;a<VirtualMarker.Layers.length;a++)if(VirtualMarker.Layers[a].Name!="POI")VirtualMarker.Layers[a].Visible=false;map.setCenter(map.getCenter(),map.getLevel(),V_NORMAL_MAP)},RefreshLayer:function(a){var b=VirtualMarker.GetLayer(a);if(b!=null){map.refreshLayer(b.Index);VirtualMarker._GetData(a)}},ClearCache:function(a){VirtualMarker.OverlayLoc[a]=[]},BindOverlay:function(e,g,j,d,o,k,l,m){if(e.value!=null){e=e.value;for(var b=0;b<d.length;b++){if(e.Tables[0].Rows[b].Coord==null){VirtualMarker.OverlayLoc[g][d[b].x+"_"+d[b].y]="";continue}for(var c=[],h=e.Tables[0].Rows[b].Coord.split(";"),n=e.Tables[0].Rows[b].GUID.split(";"),a=0;a<h.length;a++){var i=h[a].split(",");c[a]=[];c[a].X=d[b].x*256+i[0]*1+k;c[a].Y=d[b].y*256+i[1]*1+l;c[a].Radius=m;c[a].GUID=n[a];var f=new VPoint(c[a].X,c[a].Y);f=VProjection.fromPixelToLatLng(f,o);c[a].latlng=f;c[a].onclickfunc=j}VirtualMarker.OverlayLoc[g][d[b].x+"_"+d[b].y]=c}}}};function DHTMLSound(a){$("#soundContain").html('<embed type="application/x-shockwave-flash" wmode="transparent" src="http://www.google.com/reader/ui/3523697345-audio-player.swf?audioUrl='+a+'" height="27" width="320"></embed>')}(function(){jQuery.fn.xshow=function(){$(this).css("visibility","visible");return $(this).show()};jQuery.fn.xhide=function(){$(this).css("visibility","hidden");return $(this).hide()}})();function GetShortDomain(a){a=a.replace(/http:\/\//g,"").replace(/www./g,"");a=a.replace(/\/.*/g,"");return GetShortText(a,25)}var arrDes=[],arrPaths=[],arrArrows=[],PlaceArray=[0,0],arrBus=[],currentIndex=-1,currentSub=-1,currentFindtype=0,isFinding=false,isChanging=false,isSearching=false,isFPObjDragging=false,selectedPoly=null,currentStep=null,toFirst=false,changeContentFlag=false,PathSectionID=0,alphabet="A,B,C,D,E,F,G,H,I,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z";alphabet=alphabet.split(",");function SetDirectionInputText(a,b){$("input","#direction"+a)[0].value=b;OnforcusTextBoxAB($("input","#direction"+a));if(b!=""){$("input","#direction"+a).attr("class","boxtimduong");$(".del-timduong","#direction"+a).css("display","")}else{$("input","#direction"+a).attr("class","boxtimduong timduong-default");$("input","#direction"+a).val(inputDirHelp);$(".del-timduong","#direction"+a).css("display","none")}}function AddPlace(){var b=PlaceArray.length;if(b>alphabet.length-1)return;var c=document.getElementById("findpath_div"),a=dirInputTemplate;a=a.replace(/[$]section[$]/g,b);a=a.replace(/[$]order[$]/g,alphabet[b]);$("#listDirection").append(a);PlaceArray.push(0)}function AddPathMarker(d,c){var b=new VMarkerOptions(new VIcon("",new VSize(33,33)));b.offset=new VSize(12,32);b.customMarker='<span class="a-z">'+alphabet[c]+"</span>";b.zIndexProcess=function(){return 4};var a=new VMarker(d,b);map.addOverlay(a);a.enableDragging();a.sid=c+",0";a.type=FPMARKEROBJ;VEvent.addListener(a,"dragend",function(){FixCenter=false;isFPObjDragging=false;var c=a.sid.toString().split(","),b=parseInt(c[0]);if(arrFinish[b]!=null)if(arrFinish.length==1){arrFinish[b].hide();arrFinish.pop();firstStart=true}else arrFinish[b].hide();UpdateShortestPath(a.sid);saveState()});VEvent.addListener(a,"dragging",function(){isFPObjDragging=true;if(mkD!=null){map.removeOverlay(mkD);mkD=null}if(PathOptions.Vehicle==6)return;ChangeShortestPath(a.sid)});return a}function AddPlaceToFind(d,b,c){if(a>alphabet.length-1||isFinding==true)return;ChangeFunctionType(GLOBAL_FINDPATH_FUNCTION);PathOptions.Vehicle==6&&RemovePlace("1,0");var a=arrDes.length,f=false;if(toFirst){toFirst=false;f=true;a--}if(arrDes.length==0){a++;toFirst=true}if(b==null||b==""){b=LocationPathHook(d);if(b==null||b=="")b=d.toUrlValue()}var e=AddPathMarker(d,a);changeContentFlag=true;SetDirectionInputText(a,b);if(f==true)arrDes.unshift([e]);else arrDes.push([e]);arrPaths.push([0]);arrArrows.push([0]);PlaceArray[a]=1;arrDes.length>1&&AddPlace();(c==null||c!=null&&c)&&FindShortestPath(a+","+0,0,1)}function AddPlaceFromFind(f,b){if(arrDes.length>alphabet.length-1||isFinding==true)return;ChangeFunctionType(GLOBAL_FINDPATH_FUNCTION);PathOptions.Vehicle==6&&RemovePlace("0,0");if(b==null||b==""){b=LocationPathHook(f);if(b==null||b=="")b=f.toUrlValue()}var e=AddPathMarker(f,0);if(toFirst){toFirst=false;SetDirectionInputText(0,b);PlaceArray[0]=1;arrDes.unshift([e]);arrPaths.push([0]);arrArrows.push([0]);AddPlace();FindShortestPath("0,0",0,1);return}if(PlaceArray[0]==0){SetDirectionInputText(0,b);PlaceArray[0]=1;arrDes.push([e]);arrPaths.push([0]);arrArrows.push([0]);CheckMissingPlace();return}for(var a=PlaceArray.length-1;a>=0;a--){changeDirectionIndex(a,a+1);if(a<arrDes.length){for(var c=0;c<arrDes[a].length;c++)arrDes[a][c].sid=a+1+","+c;for(var c=0;c<arrPaths[a].length;c++)arrPaths[a][c].sid=a+1+","+c;arrDes[a][0].setCustomMarker('<span class="a-z">'+alphabet[a+1]+"</span>")}}PlaceArray.push(0);arrDes.push(e);arrPaths.push([]);arrArrows.push([]);for(var a=PlaceArray.length-1;a>0;a--){if(a<arrDes.length){arrDes[a]=arrDes[a-1];arrPaths[a]=arrPaths[a-1];arrArrows[a]=arrArrows[a-1]}PlaceArray[a]=PlaceArray[a-1]}arrDes[0]=[e];arrPaths[0]=[0];arrArrows[0]=[0];PlaceArray[0]=1;var d=dirInputTemplate;d=d.replace(/[$]section[$]/g,0);d=d.replace(/[$]order[$]/g,alphabet[0]);$("#direction1").before(d);SetDirectionInputText(0,b);if(PlaceArray.length==alphabet.length+1){$("#direction"+(PlaceArray.length-1)).remove();PlaceArray.pop()}FindShortestPath("0,0",0,1)}function ClickRemovePlaceButton(d){var f=document.getElementById("findpath_div"),c=d.parentNode.parentNode.id,a=parseInt(c.substring(9,c.length)),e=a+",0",b=e.split(","),g=parseInt(b[0]),h=parseInt(b[1]);RemovePlace(a+",0")}function changeDirectionIndex(b,a){var d=document.getElementById("direction"+b);if(d==null)return;$(".a-z","#direction"+b).html(alphabet[a]);$("input","#direction"+b)[0].onkeydown=function(b){return SearchPlaceEnter(b,a)};d.id="direction"+a;document.getElementById("guide"+b).id="guide"+a;var c=document.getElementById("btnSearchPlace"+b);c.id="btnSearchPlace"+a;c.onclick=function(){doSearchPlace(a)}}function RemovePath(a){for(var b=arrPaths[a].length-1;b>=0;b--){arrPaths[a][b]!=null&&arrPaths[a][b]!=0&&map.removeOverlay(arrPaths[a][b]);arrArrows[a][b]!=null&&arrArrows[a][b]!=0&&map.removeOverlay(arrArrows[a][b])}arrPaths[a]=[];arrArrows[a]=[]}function RemovePlace(h,g){ping_connection();if(mkP!=null){map.removeOverlay(mkP);mkP=null}map.closeInfoWindow();var f=h.split(","),a=parseInt(f[0]),d=parseInt(f[1]);if(toFirst==true&&a==1){toFirst=false;map.removeOverlay(arrDes[0][0]);arrPaths=[];arrArrows=[];arrDes=[];PlaceArray=[0,0];SetDirectionInputText(1,"");$("#clearPathResultText").hide();return}if(PlaceArray[a]==0)return;if(d>0){map.removeOverlay(arrPaths[a][d]);map.removeOverlay(arrArrows[a][d]);map.removeOverlay(arrDes[a][d]);for(var b=d;b<arrDes[a].length-1;b++){arrPaths[a][b]=arrPaths[a][b+1];arrArrows[a][b]=arrArrows[a][b+1];arrDes[a][b]=arrDes[a][b+1];arrDes[a][b].sid=arrPaths[a][b].sid=a+","+b}arrPaths[a].pop();arrArrows[a].pop();arrDes[a].pop();AJLocationSearch.RemoveDirectionPlaces(ClientID,GetPolylineOrder(a)+d,1);FindShortestPath(a+",0",1,0,1);return}if(g!=1)if(a==0&&arrDes.length>1)AJLocationSearch.RemoveDirectionPlaces(ClientID,0,GetPolylineOrder(a+1));else if(a==arrDes.length-1&&a>0)AJLocationSearch.RemoveDirectionPlaces(ClientID,GetPolylineOrder(a-1),GetPolylineOrder(a)-GetPolylineOrder(a-1));else AJLocationSearch.RemoveDirectionPlaces(ClientID,GetPolylineOrder(a-1),GetPolylineOrder(a+1)-GetPolylineOrder(a-1)-1);if(a>0){RemovePath(a-1);for(var b=arrDes[a-1].length-1;b>0;b--){map.removeOverlay(arrDes[a-1][b]);arrDes[a-1].pop()}if(PathOptions.Vehicle==6){for(var b=arrBus[a-1].length-1;b>=0;b--)map.removeOverlay(arrBus[a-1][b]);arrBus[a-1]=[]}}if(a==arrDes.length-1){map.removeOverlay(arrDes[a][0]);arrDes[a].pop()}else{RemovePath(a);for(var b=arrDes[a].length-1;b>=0;b--)map.removeOverlay(arrDes[a][b]);arrDes[a]=[];if(PathOptions.Vehicle==6){for(var b=arrBus[a].length-1;b>=0;b--)map.removeOverlay(arrBus[a][b]);arrBus[a]=[]}}if(PlaceArray.length==2){prev_selectedResAB_Text="";PlaceArray[a]=0;SetDirectionInputText(0,"")}else{var e=a;if(a==arrDes.length-1)e=a-1;$("#direction"+a).remove();$("#guide"+a).remove();$("#guide"+e).html("");$(".swrap-timduong","#direction"+e).removeClass("background")}for(var b=a;b<PlaceArray.length;b++){b>=a&&PlaceArray.length>2&&changeDirectionIndex(b,b-1);if(b<arrDes.length){var i='<span class="a-z">'+alphabet[b-1]+"</span>";b!=a&&arrDes[b][0].setCustomMarker(i);for(var c=0;c<arrDes[b].length;c++)arrDes[b][c].sid=b-1+","+c;for(var c=0;c<arrPaths[b].length;c++)arrPaths[b][c].sid=b-1+","+c;arrDes[b]=arrDes[b+1];arrPaths[b]=arrPaths[b+1];arrArrows[b]=arrArrows[b+1]}if(PlaceArray[b+1]!=undefined)PlaceArray[b]=PlaceArray[b+1];else PlaceArray[b]=0}arrDes.pop();arrPaths.pop();arrArrows.pop();PlaceArray.length>2&&PlaceArray.pop();arrDes.length==alphabet.length-1&&AddPlace();if(a==0||a==arrDes.length){LoadDirectionTool();GetTotalDistance()}else FindShortestPath(a-1+","+0,0,0)}function LoadDirectionTool(){if(arrDes.length<2){$("#topLeftPathResult").css("display","none");$("#clearPathResultText").css("display","none")}else{$("#topLeftPathResult").css("display","");$("#clearPathResultText").css("display","")}if(arrDes.length>2)$(".bus").addClass("bus-disable");else $(".bus").removeClass("bus-disable");if(arrDes.length==2){document.getElementById("tdreverse").style.display="";document.getElementById("printDirection").style.display=""}else document.getElementById("tdreverse").style.display="none"}function RemovePlace_History(f,h,d){if(mkP!=null){map.removeOverlay(mkP);mkP=null}map.closeInfoWindow();var g=document.getElementById("findpath_div"),e=f.split(","),a=parseInt(e[0]),c=parseInt(e[1]);if(PlaceArray[a]==0)return;if(arrPaths[0][0]==0)return;if(arrDes[0][0]==0)return;if(c>0){if(d){arrPaths[a][c].hide();arrDes[a][c].hide()}else{arrPaths[a][c].show();arrDes[a][c].show()}for(var b=c;b<arrDes[a].length-1;b++){arrPaths[a][b]=arrPaths[a][b+1];arrPaths[a][b].sid=a+","+b;arrDes[a][b]=arrDes[a][b+1];arrDes[a][b].sid=a+","+b}return}if(a>0)for(var b=arrDes[a-1].length-1;b>=0;b--){if(d)arrPaths[a-1][b].hide();else arrPaths[a-1][b].show();if(b>0)if(d)arrDes[a-1][b].hide();else arrDes[a-1][b].show()}if(a<arrDes.length-1)for(var b=arrDes[a].length-1;b>=0;b--)if(d){arrPaths[a][b].hide();arrDes[a][b].hide()}else{arrPaths[a][b].show();arrDes[a][b].show()}else if(a==arrDes.length-1)if(d)arrDes[a][0].hide();else arrDes[a][0].show();if(a==0||a==arrDes.length){LoadDirectionTool();GetTotalDistance()}}var FixCenter=true;function FromHereClick(a){FixCenter=false;AddPlaceFromFind(a,LocationHook(a));closeContextMenu()}function ToHereClick(a){FixCenter=false;AddPlaceToFind(a,LocationHook(a));closeContextMenu()}function GetPolylineOrder(b){var c=0;if(b==arrDes.length)return -1;for(var a=0;a<b;a++)c+=arrDes[a].length;return c}function UpdateShortestPath(e){var c=e.split(","),a=parseInt(c[0]),d=parseInt(c[1]);if(arrDes.length<2||isFinding==true)return;currentIndex=a;currentSub=d;var b=LocationHook(arrDes[a][0].getLatLng());if(b==undefined||b=="")b=arrDes[a][0].getLatLng().toUrlValue();$("input","#direction"+a).val(b);FindShortestPath(a+","+d,0,0)}var PathOptions={Alley:1,Block:0,Vehicle:1};function CheckMissingPlace(){if(needtoFillAllPlace)for(var a=0;a<PlaceArray.length;a++){var b=$("input","#direction"+a);if(b.val()!=inputDirHelp&&PlaceArray[a]==0)if(CheckInputDatatype(b.val())!="coor"){SearchPlace(a,b.val(),1);return true}}return false}var needtoFillAllPlace=false;function FindAllPath(){needtoFillAllPlace=false;if(arrDes.length<2||arrDes.length<PlaceArray.length){needtoFillAllPlace=true;if(CheckMissingPlace())return}if(isFinding==true)return;ping_connection();if(mkP!=null){map.removeOverlay(mkP);mkP=null}for(var d="",e="",f=map.getLevel(),a=map.getDirectionBounds(),b=0;b<arrDes.length;b++){for(var c=0;c<arrDes[b].length;c++)d+=arrDes[b][c].getPoint().lng()+","+arrDes[b][c].getPoint().lat()+",";if(b>0&&b<arrDes.length-1)e+=arrDes[b-1].length+","}if(PathOptions.Vehicle!=6)AJLocationSearch.FindShortestPath(ClientID,d,PathOptions.Vehicle,e,0,-1,f,a.getNorthWest().lng(),a.getNorthWest().lat(),a.getSouthEast().lng(),a.getSouthEast().lat(),currentFindtype,0,0,0,PathOptions.Alley,PathOptions.Block,PathOptions.Block,FindAllPathChange);else AJLocationSearch.FindShortestBus(ClientID,d,PathOptions.Vehicle,e,0,-1,f,a.getNorthWest().lng(),a.getNorthWest().lat(),a.getSouthEast().lng(),a.getSouthEast().lat(),currentFindtype,0,0,0,PathOptions.Alley,PathOptions.Block,PathOptions.Block,FindAllPathChange);isFinding=true;showBusyDiv("","findpathtabdiv")}function FindAllPathChange(b){if(b.error!=null)return;var a=b.value;if(a!=null)if(PathOptions.Vehicle!=6)BindAllPath(a);else BindAllBusPath(a);isFinding=false;isChanging=false;FitDirectionOverlays();GetAllGuide()}function FindShortestPath(m,l,f,k){if(arrDes.length<2)return;var j=m.split(","),a=parseInt(j[0]),e=parseInt(j[1]);currentIndex=a;currentSub=e;if(a<0||a>arrDes.length-1)return;ping_connection();if(mkP!=null){map.removeOverlay(mkP);mkP=null}var c="",g="";if(l==1){currentFindtype=1;for(var b=0;b<=e;b++)c+=arrDes[a][b].getPoint().lng()+","+arrDes[a][b].getPoint().lat()+",";if(mkD!=null)c+=mkD.getPoint().lng()+","+mkD.getPoint().lat()+",";for(var b=e+1;b<arrDes[a].length;b++)c+=arrDes[a][b].getPoint().lng()+","+arrDes[a][b].getPoint().lat()+",";c+=arrDes[a+1][0].getPoint().lng()+","+arrDes[a+1][0].getPoint().lat()}else{currentFindtype=0;if(a>0&&e==0)for(var b=0;b<arrDes[a-1].length;b++)c+=arrDes[a-1][b].getPoint().lng()+","+arrDes[a-1][b].getPoint().lat()+",";for(var b=0;b<arrDes[a].length;b++)c+=arrDes[a][b].getPoint().lng()+","+arrDes[a][b].getPoint().lat()+",";if(a<arrDes.length-1){c+=arrDes[a+1][0].getPoint().lng()+","+arrDes[a+1][0].getPoint().lat();if(a>0)g=arrDes[a-1].length.toString()}}var i=map.getLevel(),d=map.getDirectionBounds(),h=GetPolylineOrder(currentIndex);if(currentIndex==arrDes.length-1||currentIndex>0&&e==0&&f==0&&k!=1)h=GetPolylineOrder(currentIndex-1);if(PathOptions.Vehicle!=6)AJLocationSearch.FindShortestPath(ClientID,c,PathOptions.Vehicle,g,0,1,i,d.getNorthWest().lng(),d.getNorthWest().lat(),d.getSouthEast().lng(),d.getSouthEast().lat(),currentFindtype,h,currentSub,f,PathOptions.Alley,PathOptions.Block,PathOptions.Block,FindShortestPathChange);else AJLocationSearch.FindShortestBus(ClientID,c,PathOptions.Vehicle,g,0,1,i,d.getNorthWest().lng(),d.getNorthWest().lat(),d.getSouthEast().lng(),d.getSouthEast().lat(),currentFindtype,h,currentSub,f,PathOptions.Alley,PathOptions.Block,PathOptions.Block,FindShortestPathChange);isFinding=true;showBusyDiv("","findpathtabdiv")}var firstStart=true,mStart=null,mFinish=null,arrFinish=[];function FindShortestPathChange(c){hideBusyDiv();if(c==null||c.error!=null||c.value==null){isFinding=false;isChanging=false;return}var a=c.value,f,d;directionLatLng=map.getCenter();if(currentFindtype==1){BindSubPath(a,b,currentIndex);GetGuide();return}var b=0;if(currentIndex>0)if(PathOptions.Vehicle!=6)b=BindPath(a,b,currentIndex-1);else BindBusPath(a,currentIndex-1);if(currentIndex<arrDes.length-1)if(PathOptions.Vehicle!=6)BindPath(a,b,currentIndex);else BindBusPath(a,currentIndex);var e=$("input","#direction"+currentIndex).val();FixCenter&&FitDirectionOverlays();FixCenter=true;GetGuide()}function BindSubPath(e,i,b){for(var h=.5,a=0;a<e.length;a++){var d=new VPolyline(e[a],"red",3,"",h);d.sid=b+","+a;arrPaths[b][a]!=0&&arrPaths[b][a]!=null&&map.removeOverlay(arrPaths[b][a]);arrPaths[b][a]=d;map.addOverlay(d);AddPathMouseMoveEvent(d);var g=new VArrow(e[a],"end");arrArrows[b][a]!=0&&arrArrows[b][a]!=null&&map.removeOverlay(arrArrows[b][a]);arrArrows[b][a]=g;map.addOverlay(g);if(a>0){var f=new VLatLng(d.getVertex(0).lat(),d.getVertex(0).lng()),c=arrDes[b][a];ic=new VIcon("images/circle.gif");ic.iconSize=new VSize(10,10);opts=new VMarkerOptions(ic);opts.offset=new VSize(5,5);if(c==null){c=new VMarker(f,opts);c.type=FPMARKEROBJ;arrDes[b].push(c);map.addOverlay(c)}c.sid=b+","+a;c.setPoint(f);c.enableDragging();VEvent.addListener(c,"dragend",function(a){isFPObjDragging=false;FindShortestPath(a.sid,1,0)});VEvent.addListener(c,"dragging",function(a){isFPObjDragging=true;if(mkD!=null){map.removeOverlay(mkD);mkD=null}ChangeShortestPath(a.sid)})}}}function BindAllBusPath(a){BindBusPath(a,0)}function ClearBusMarker(a){if(arrBus[a]!=null)for(var b=0;b<arrBus[a].length;b++)map.removeOverlay(arrBus[a][b]);arrBus[a]=[]}function BindBusPath(e,b){if(e==null||e.BusPath==null)return;var f=e.BusPath,g=e.StationName,h=.5;ClearBusMarker(b);RemovePath(b);for(var a=0;a<f.length;a++){var j=g[a]=="-10"?"blue":"red",c=new VPolyline(f[a],j,3,"",h);c.sid=b+","+a;arrPaths[b][a]=c;map.addOverlay(c);var i=new VArrow(f[a],"end",j,1,h);arrArrows[b][a]=i;map.addOverlay(i);var k=new VLatLng(c.getVertex(0).lat(),c.getVertex(0).lng()),d=new VMarkerOptions(new VIcon("",new VSize(62,30)));if(g[a]=="-10"){d.offset=new VSize(62,29);d.customMarker='<div class="bus-stationnumber-wrap bus-dibo"><span class="bus-stationnumber"><img src="Skins/WhiteSkin/images/bus-dibo.png"/><span class="bus-arrow"></span></span></div>'}else{d.offset=new VSize(0,29);d.customMarker='<div class="bus-stationnumber-wrap"><span class="bus-stationnumber"><img src="Skins/WhiteSkin/images/bus-dixebuyt.png"/><span class="bus-number">'+g[a]+'</span><span class="bus-arrow"></span></span></div>'}d.zIndexProcess=function(){return 3};mk=new VMarker(k,d);map.addOverlay(mk);arrBus[b].push(mk);a==0&&arrDes[b][a].setPoint(c.getVertex(0));a==f.length-1&&arrDes[b+1][0].setPoint(c.getVertex(c.getVertexCount()-1))}}function BindAllPath(c){for(var f=.5,a=0;a<c.length;a++){RemovePath(a);ClearBusMarker(a);arrPaths[a]=[];arrArrows[a]=[];for(var b=0;b<c[a].length;b++){var d=new VPolyline(c[a],"red",3,"",f);d.sid=a+","+b;arrPaths[a][b]=d;map.addOverlay(d);var e=new VArrow(c[a],"end");arrArrows[a][b]=e;map.addOverlay(e)}}}function BindPath(f,d,a){for(var g=.5,b=0;b<arrDes[a].length;b++){var c=new VPolyline(f[d],"red",3,"",g);c.sid=a+","+b;arrPaths[a][b]!=0&&arrPaths[a][b]!=null&&map.removeOverlay(arrPaths[a][b]);arrPaths[a][b]=c;map.addOverlay(c);AddPathMouseMoveEvent(c);var e=new VArrow(f[d],"end");arrArrows[a][b]!=0&&arrArrows[a][b]!=null&&map.removeOverlay(arrArrows[a][b]);arrArrows[a][b]=e;map.addOverlay(e);d++;arrDes[a][b].setPoint(c.getVertex(0));arrDes[a+1][0].setPoint(c.getVertex(c.getVertexCount()-1))}return d}function AddPathMouseMoveEvent(a){VEvent.addListener(a,"mousemove",function(h,j,a){if(!isFPObjDragging){if(mkD!=null){map.removeOverlay(mkD);mkD=null}var b=map.fromLatLngToDivPixel(h),c=map.fromLatLngToDivPixel(a.latlngs[0][0]),d=a.latlngs.length,i=a.latlngs[d-1].length,e=map.fromLatLngToDivPixel(a.latlngs[d-1][i-1]);if(VUtil.Distance(b.x,b.y,c.x,c.y)>150&&VUtil.Distance(b.x,b.y,e.x,e.y)>150){var g=new VIcon("images/circle.gif");g.iconSize=new VSize(10,10);var f=new VMarkerOptions(g);f.offset=new VSize(5,5);mkD=new VMarker(h,f);mkD.sid=a.sid;selectedPoly=a.sid;map.addOverlay(mkD);mkD.enableDragging();VEvent.addListener(mkD,"mousemove",function(k,h){var j=a.latlngs,d=[];VUtil.ClosestPointPolylines(h.lng(),h.lat(),j,d);var g=d[0],b=map.fromLatLngToDivPixel(g),c=map.fromLatLngToDivPixel(a.latlngs[0][0]),e=a.latlngs.length,i=a.latlngs[e-1].length,f=map.fromLatLngToDivPixel(a.latlngs[e-1][i-1]);VUtil.Distance(b.x,b.y,c.x,c.y)>150&&VUtil.Distance(b.x,b.y,f.x,f.y)>150&&mkD.setPoint(g)});VEvent.addListener(mkD,"dragend",function(){isFPObjDragging=false;FindShortestPath(mkD.sid,1,1)});VEvent.addListener(mkD,"dragging",function(){isFPObjDragging=true;ChangeShortestPath(mkD.sid,1)})}}})}function GetGuide(){AJLocationSearch.GetDirection(GetGuideChange)}function GetGuideChange(b){if(b.error!=null)return;if(currentIndex>arrDes.length-1)return;isFinding=false;isChanging=false;var a=ReplaceDirectionText(b.value).split("newsectiontable");hideBusyDiv("");if(currentFindtype==1)BindGuide(currentIndex,a[0]);else{currentIndex>0&&BindGuide(currentIndex-1,a[0]);currentIndex<arrDes.length-1&&BindGuide(currentIndex,a[currentIndex>0?1:0])}ChangeFunctionType(GLOBAL_FINDPATH_FUNCTION);GetTotalDistance()}function GetAllGuide(){AJLocationSearch.GetDirection(GetAllGuideChange)}function GetAllGuideChange(c){if(c.error!=null)return;isFinding=false;isChanging=false;var b=ReplaceDirectionText(c.value).split("newsectiontable");hideBusyDiv("");for(var a=0;a<b.length-1;a++)BindGuide(a,b[a]);ChangeFunctionType(GLOBAL_FINDPATH_FUNCTION);GetTotalDistance()}function BindGuide(a,b){$(".swrap-timduong","#direction"+a).addClass("background");$("#guide"+a).html(b)}function ReplaceDirectionText(a){if(isLang("vi")){a=a.replace(/Start at/g,"Bắt đầu tại điểm");a=a.replace(/Arrive at/g,"Đến đích tại điểm");a=a.replace(/Head on/g,"Đi thẳng");a=a.replace(/Turn right at/g,"Rẽ phải vào");a=a.replace(/Turn left at/g,"Rẽ trái vào");a=a.replace(/At the roundabout/g,"Đến vòng xoay");a=a.replace(/At/g,"Đến");a=a.replace(/Turn to/g,"Rẽ vào");a=a.replace(/Pass over/g,"Qua");a=a.replace(/Continue on/g,"Đi tiếp");a=a.replace(/Length/g,"Chiều dài");a=a.replace(/Walk to/g,"Đi bộ đến");a=a.replace(/Take bus/g,"Đón tuyến");a=a.replace(/[^a-zA-Z]to[^a-zA-Z]/g,"đến");a=a.replace(/min/g,"phút");a=a.replace(/Price/g,"Giá");a=a.replace(/Find business on this route/g,"Tìm dịch vụ trên đoạn này");a=a.replace(/We cannot drive between two these locations/g,"Chúng tôi không tìm thấy đường đi giữa hai vị trí này")}return a}var a1,a2,ptMove=null;function ChangeShortestPath(g,f){if(arrDes.length<2||isChanging==true||isFinding==true)return;var e=g.split(","),a=parseInt(e[0]),b=parseInt(e[1]);currentIndex=a;currentSub=b;if(a<0||a>arrDes.length-1)return;var h=mkD!=null?mkD.getPoint():arrDes[a][b].getPoint();if(ptMove!=null&&ptMove.equals(h))return;a1=g;a2=f;if(mkP!=null){map.removeOverlay(mkP);mkP=null}var c="",i="";if(f==1){currentFindtype=1;c+=arrDes[a][b].getPoint().lng()+","+arrDes[a][b].getPoint().lat()+",";c+=mkD.getPoint().lng()+","+mkD.getPoint().lat();if(b<arrDes[a].length-1)c+=","+arrDes[a][b+1].getPoint().lng()+","+arrDes[a][b+1].getPoint().lat();else c+=","+arrDes[a+1][0].getPoint().lng()+","+arrDes[a+1][0].getPoint().lat()}else{currentFindtype=0;if(a>0&&b==0)c+=arrDes[a-1][arrDes[a-1].length-1].getPoint().lng()+","+arrDes[a-1][arrDes[a-1].length-1].getPoint().lat()+",";else if(b>0)c+=arrDes[a][b-1].getPoint().lng()+","+arrDes[a][b-1].getPoint().lat()+",";c+=arrDes[a][b].getPoint().lng()+","+arrDes[a][b].getPoint().lat();if(a<arrDes.length-1&&b>=arrDes[a].length-1)c+=","+arrDes[a+1][0].getPoint().lng()+","+arrDes[a+1][0].getPoint().lat();else if(b<arrDes[a].length-1)c+=","+arrDes[a][b+1].getPoint().lng()+","+arrDes[a][b+1].getPoint().lat()}var j=map.getLevel(),d=map.getDirectionBounds();if(mkD!=null)ptMove=mkD.getPoint().copy();else ptMove=arrDes[a][b].getPoint().copy();AJLocationSearch.FindShortestPath(ClientID,c,PathOptions.Vehicle,i.toString(),1,1,j,d.getNorthWest().lng(),d.getNorthWest().lat(),d.getSouthEast().lng(),d.getSouthEast().lat(),-1,-1,-1,-1,PathOptions.Alley,PathOptions.Block,PathOptions.Block,ChangeShortestPathChange);isChanging=true}function ChangeShortestPathChange(c){if(c.error!=null)return;var a=c.value;if(a==null||a[0]==null||a.length<1||isFinding==true)return;if(currentFindtype==1){for(var b=0;b<a[1].length;b++)a[0].push(a[1][b]);a.pop();arrPaths[currentIndex][currentSub].setLatLngs(a[0]);arrArrows[currentIndex][currentSub].setLatLngs(a[0]);isChanging=false;ChangeShortestPath(a1,a2);return}var b=0;if(currentIndex>0&&currentSub==0){arrPaths[currentIndex-1][arrPaths[currentIndex-1].length-1].setLatLngs(a[0]);arrArrows[currentIndex-1][arrArrows[currentIndex-1].length-1].setLatLngs(a[0]);b++}else if(currentSub>0){arrPaths[currentIndex][currentSub-1].setLatLngs(a[0]);arrArrows[currentIndex][currentSub-1].setLatLngs(a[0]);b++}if(currentIndex<arrDes.length-1){arrPaths[currentIndex][currentSub].setLatLngs(a[b]);arrArrows[currentIndex][currentSub].setLatLngs(a[b])}isChanging=false;ChangeShortestPath(a1,a2)}function GetDirectionLatLngs(){if(arrDes.length<2)return;var b=map.getLevel(),a=map.getDirectionBounds();directionLatLng=map.getCenter();directionLevel=b;AJLocationSearch.GetDirectionLatLngs(ClientID,b,a.getNorthWest().lng(),a.getNorthWest().lat(),a.getSouthEast().lng(),a.getSouthEast().lat(),GetDirectionLatLngsChange)}function GetDirectionLatLngsChange(e){if(e.error!=null||e==null||e.value==null)return;var d=e.value,c=0;if(PathOptions.Vehicle!=6)for(var a=0;a<arrDes.length;a++){for(var f=PathOptions.Vehicle==6?arrBus[a].length:arrDes[a].length,b=0;b<arrDes[a].length;b++){arrPaths[a][b].setLatLngs!=undefined&&arrPaths[a][b].setLatLngs(d[c]);arrArrows[a][b].setLatLngs!=undefined&&arrArrows[a][b].setLatLngs(d[c]);c++}if(c>=d.length)break}else for(var a=0;a<arrBus.length;a++){for(var b=0;b<arrBus[a].length;b++){arrPaths[a][b].setLatLngs!=undefined&&arrPaths[a][b].setLatLngs(d[c]);arrArrows[a][b].setLatLngs!=undefined&&arrArrows[a][b].setLatLngs(d[c]);c++}if(c>=d.length)break}}function FitDirectionOverlays(){for(var c=[],a=0;a<arrDes.length;a++)for(var b=0;b<arrDes[a].length;b++)if(arrDes[a][b]!=null&&arrDes[a][b].vType!=null)arrDes[a][b].vType()=="VMarker"&&c.push(arrDes[a][b]);for(var a=0;a<arrPaths.length;a++)for(var b=0;b<arrPaths[a].length;b++)if(arrPaths[a][b]!=null&&arrPaths[a][b].vType!=null)arrPaths[a][b].vType()=="VPolyline"&&c.push(arrPaths[a][b]);if(!dontFit){bMoveStart=true;map.fitMultiOverlays(c)}c=[]}function CloseDirection(a){if(a==undefined||a.parentNode==undefined)a=this;$(".stepsList",a.parentNode.parentNode).css("display","none");$(".summary",a.parentNode.parentNode).css("display","none");$(".options",a.parentNode.parentNode).attr("class","options");$(".swrap-timduong",a.parentNode.parentNode.parentNode).attr("class","swrap-timduong");a.className="expand";a.onclick=OpenDirection}function OpenDirection(){var a=this;$(".stepsList",a.parentNode.parentNode).css("display","");$(".summary",a.parentNode.parentNode).css("display","");$(".options",a.parentNode.parentNode).attr("class","options background");$(".swrap-timduong",a.parentNode.parentNode.parentNode).attr("class","swrap-timduong background");a.className="collapse";a.onclick=CloseDirection}function OverDirectionGuide(a){a!=currentElement&&$(a).addClass("StepList-hover");var b=$(a).parents(".direction-item")[0].id,f=parseInt(b.substring(9,b.length)),d=a.id.split("_"),h=parseFloat(d[0]),i=parseFloat(d[1]);if(f>=0){var g=new VLatLng(i,h),l=map.getLevel(),e=new VIcon("images/blink2.gif");e.iconSize=new VSize(11,11);var c=new VMarkerOptions(e,null,new VSize(5,5));c.offset=new VSize(5,5);if(mkOP!=null){map.removeOverlay(mkOP);mkOP=null}mkOP=new VMarker(g,c);map.addOverlay(mkOP)}}function OutDirectionGuide(a){$(a).removeClass("StepList-hover");if(mkOP!=null){map.removeOverlay(mkOP);mkOP=null}}function SearchPlaceEnter(b,a){b.keyCode==13&&doSearchPlace(a)}function doSearchPlace(b){var a=$("input","#direction"+b).val();if(a==""||a==inputDirHelp)return;if(CheckInputDatatype(a)=="coor")CheckCoorInput(b,a);else SearchPlace(b,a,1);return false}function CheckInputDatatype(b){var a=b.split(",");if(a.length==2&&!isNaN(parseFloat(a[0]))&&!isNaN(parseFloat(a[1])))return "coor";else return "string"}function CheckCoorInput(a,d){var c=d.split(","),b=new VLatLng(parseFloat(c[0]),parseFloat(c[1]));if(arrDes[a]==null)if(a==arrDes.length&&a==0)AddPlaceFromFind(b);else AddPlaceToFind(b);else{arrDes[a][0].setPoint(b);FindShortestPath(a+",0",0,0)}}var currentElement=null;function GetRoadFromShortestPath(a){var f=$(a).parents(".direction-item")[0].id,j=parseInt(f.substring(9,f.length)),c=a.id.split("_"),l=$(a).index(),b=$(".instruction",a).html(),e=$(".distance",a).html();if(j>=0){b+=' <span style="white-space:nowrap;">- '+(b.indexOf("Đi")==0?"":"đi ")+e+"</span>";var g='<div class="MiniPopup" style="width:230px;"><p style="padding:2px;font-size:12px">'+b+"</p>";g+='<a id="pathzoom" onclick=""></a>';var k=$(".instruction",a).text();k+=", "+(b.indexOf("Đi")==0?"":"đi ")+e.replace(".",",").replace(",0","");var c=new VLatLng(c[1],c[0]);currentStep=a;map.getLevel()<16&&map.setCenter(c,16);var d=new VInfoWindowOptions,i=new VIcon("images/blink1.gif");i.iconSize=new VSize(11,11);var h=new VMarkerOptions(i,null,new VSize(5,5));h.offset=new VSize(5,5);if(mkP!=null){map.removeOverlay(mkP);mkP=null}mkP=new VMarker(c,h);map.addOverlay(mkP);d.offset=new VSize(0,5);mkP.openInfoWindow(g,d);currentElement!=null&&$(currentElement).removeClass("StepList-active");$(a).addClass("StepList-active");currentElement=a}}var isPlayStep=false;function PlayStep(a,b){isPlayStep=true;ShowStep(a,b,true)}function StopStep(a,b){isPlayStep=false;var e=document.getElementById("dirPrev");e.className="dirPrevAvai";e.onclick=function(){ShowStep(a,b-1)};var c=document.getElementById("dirNext");c.className="dirNextAvai";c.onclick=function(){ShowStep(a,b+1)};var d=document.getElementById("dirPlay");d.className="dirPlayStepAvai";d.onclick=function(){PlayStep(a,b)}}function ShowStep(a,b,e){if(b==0){a--;if(a<0)return;b=$("#guide"+a+" ol:first li").length}else{var d=$("#guide"+a+' ol:first li[id!=""]').length;if(b>d){if($("#guide"+(a+1)+' ol:first li[id!=""]')[1]==null){StopStep(a,b-1);return}a++;b=1}}var c=$("#guide"+a+' ol:first li[id!=""]')[b-1];c!=null&&c.id.indexOf("_")>0&&GetRoadFromShortestPath(c);e&&setTimeout(function(){if(isPlayStep){b++;PlayStep(a,b)}},5e3)}function SearchNearByPolylineExt(f,c,g,h,d){ping_connection();var b=null,a="";SetSearchType(0);ChangeFunctionType(GLOBAL_SEARCH_FUNCTION);showBusyDiv("","searchresult_div");if(f==null)if(currentStep!=null){if(currentStep.parentNode==null)return;var e=currentStep.parentNode.parentNode.parentNode.id;b=parseInt(e.substring(5,e.length));if(b==null)b=arrDes.length;a="Đoạn đường "+GetNodeName(b)}else{a=SearchWhere;if(a.toLowerCase().indexOf("đoạn đường ")==0||a.toLowerCase().indexOf("doan duong ")==0){a=a.substring(11);a=a.replace(/^\s+|\s+$/g,"");b=GetSectionId(a.substring(0,1));if(b==null)b=arrDes.length;a="Đoạn đường "+a}}else b=f;PathSectionID=b;if(b>=arrDes.length-1){hideBusyDiv();if(isLang("vi"))alert("Không tồn tại đoạn đường bạn yêu cầu");else alert("Road is not exist");ClearPathResult();return}if(c!=null){if(document.getElementById("shortestpathsearchnearby")!=null)document.getElementById("shortestpathsearchnearby").value=c}else if(c==null){c=document.getElementById("shortestpathsearchnearby").value;g=""}if(d==null){d=document.getElementById("shortestpathsearchnearby_radius").value;if(isNaN(d))d=100}c=c.replace(/\[quote]/g,'"');FillQueryToTextBox(c+" trên đoạn đường "+GetNodeName(b));document.getElementById("mapinput").value=c+" trên đoạn đường "+GetNodeName(b);if(a=="")a=SearchWhere;a=a.toLowerCase().replace("doan duong","đoạn đường");var i=a.substring(11).toLowerCase();a=a.substring(0,11)+" "+i;a=a.replace(/^\s+|\s+$/g,"");isSearching=true;AJLocationSearch.SearchNearByPolyline(ClientID,GetPolylineOrder(b),arrDes[b].length,c,g,a,h,d,SearchNearByPolylineChange)}function SearchNearByPolylineChange(l){isSearching=false;if(l.error!=null)return;hideBusyDiv();map.closeInfoWindow();currentStep=null;dsResultData=l.value;var a=[];if(null!=dsResultData&&"object"==typeof dsResultData){var q=dsResultData.Tables[0].Rows.length,c=dsResultData.Tables[1].Rows[0].HitSize,d=dsResultData.Tables[1].Rows[0].Key,b=parseInt((c+PAGE_ROWS-1)/PAGE_ROWS),h=10;b=b>h?h:b;var o=b>PAGE_SHOW?PAGE_SHOW:b,g=dsResultData.Tables[1].Rows[0].PageIdx,r=dsResultData.Tables[1].Rows[0].Lx,s=dsResultData.Tables[1].Rows[0].Ly,t=dsResultData.Tables[1].Rows[0].Rx,u=dsResultData.Tables[1].Rows[0].Ry,p=dsResultData.Tables[1].Rows[0].SearchType,m=dsResultData.Tables[1].Rows[0].SuggestedKey,e=dsResultData.Tables[1].Rows[0].Radius,k=dsResultData.Tables[1].Rows[0].What,j=dsResultData.Tables[1].Rows[0].Where,f=(g-1)*PAGE_ROWS+1,n=f+PAGE_ROWS-1>c?c:f+PAGE_ROWS-1;a[a.length]='<div id="TablePlace">';var i="<b>"+d+"</b> trên <b>"+j+"</b> trong phạm vi <b>"+e+"(m)</b>";a[a.length]=Global.GetResultText(i,i,"",m,c,dsResultData.Tables[1].Rows[0].IsLonLat,dsResultData.Tables[1].Rows[0].IsAddress,f,n);KeySearch=d;if(g+1<=b&&isFirstSearch){TypeSearch=7;setTimeout(function(){isBindingMorePlace=true;AJLocationSearch.SearchNearByPolyline(ClientID,GetPolylineOrder(PathSectionID),arrDes[PathSectionID].length,d,k,j,1,e,MorePlaceBinding)},1e3)}ClearSearchMapResult();HideSelectPlaceBox();a[a.length]=BindResult(dsResultData.Tables[0]);a[a.length]="</div>";a[a.length]=Global.GetComplainLink(KeySearch);a[a.length]=Global.BuildPaging(g,b,c,o,Global.PagingSearchNearByPolylineExt,[null,d,k,e]);$("#searchresult_div").html(a.join("")).scrollTop(0);c>0&&map.fitMultiOverlays(arrSearchMapResult);LoadPlaceTool()}}function SearchNearByPointExt(c,d,i,h,a,g,f,b){ping_connection();var e=false;if(dsResultData!=null&&dsResultData.Tables.length>1)e=dsResultData.Tables[1].Rows[0].IsAddress;SetSearchType(0);ChangeFunctionType(GLOBAL_SEARCH_FUNCTION);showBusyDiv("","searchresult_div");if(a!=null){if(document.getElementById("searchnearbypoint")!=null)document.getElementById("searchnearbypoint").value=a}else if(a==null)a=document.getElementById("searchnearbypoint").value;if(b!=null){if(document.getElementById("searchnearbypoint_radius")!=null)document.getElementById("searchnearbypoint_radius").value=b}else if(b==null)b=document.getElementById("searchnearbypoint_radius").value;if(isNaN(b))b=2e3;c=RemoveHTMLTag(c);a=a.replace(/\[quote]/g,'"');document.getElementById("mapinput").value=a+" gần "+c+(d!=""?", "+d:"");isSearching=true;AJLocationSearch.SearchNearByPoint(a,g,c,d,i,h,b,f,SearchNearByPointChange)}function SearchNearByPointChange(q){isSearching=false;if(q.error!=null)return;hideBusyDiv();map.closeInfoWindow();dsResultData=q.value;var a=[];if(null!=dsResultData&&"object"==typeof dsResultData){var f=dsResultData.Tables[0].Rows.length,c=dsResultData.Tables[1].Rows[0].HitSize,g=dsResultData.Tables[1].Rows[0].Key,b=parseInt((c+PAGE_ROWS-1)/PAGE_ROWS),l=10;b=b>l?l:b;var t=b>PAGE_SHOW?PAGE_SHOW:b,k=dsResultData.Tables[1].Rows[0].PageIdx,z=dsResultData.Tables[1].Rows[0].Lx,A=dsResultData.Tables[1].Rows[0].Ly,B=dsResultData.Tables[1].Rows[0].Rx,C=dsResultData.Tables[1].Rows[0].Ry,u=dsResultData.Tables[1].Rows[0].SearchType,r=dsResultData.Tables[1].Rows[0].SuggestedKey,e=dsResultData.Tables[0].Rows[f-1].Name,d=dsResultData.Tables[0].Rows[f-1].Address,n=dsResultData.Tables[0].Rows[f-1].Longitude+"",m=dsResultData.Tables[0].Rows[f-1].Latitude+"",h=dsResultData.Tables[1].Rows[0].Radius,i;if(d!="")i=e+", "+d;else i=e;var p=dsResultData.Tables[1].Rows[0].What,j=(k-1)*PAGE_ROWS+1,s=j+PAGE_ROWS-1>c?c:j+PAGE_ROWS-1;a[a.length]='<div id="TablePlace">';var o="<b>"+g+"</b> ở gần <b>"+i+"</b> trong phạm vi <b>"+h+"(m)</b>";a[a.length]=Global.GetResultText(o,o,"",r,c,dsResultData.Tables[1].Rows[0].IsLonLat,dsResultData.Tables[1].Rows[0].IsAddress,j,s);var v,x,y,w,D=0;KeySearch=g;if(k+1<=b&&isFirstSearch){TypeSearch=6;setTimeout(function(){isBindingMorePlace=true;AJLocationSearch.FindMoreNearByPoint(g,p,e,d,n,m,h,1,MorePlaceBinding)},1e3)}ClearSearchMapResult();HideSelectPlaceBox();a[a.length]=BindResult(dsResultData.Tables[0]);a[a.length]="</div>";a[a.length]=Global.GetComplainLink(KeySearch);a[a.length]=Global.BuildPaging(k,b,c,t,Global.PagingSearchNearByPointExt,[e,d,n+"",m+"",g,p,h]);$("#searchresult_div").html(a.join("")).scrollTop(0);c>0&&map.fitMultiOverlays(arrSearchMapResult);LoadPlaceTool()}}function GetNodeName(a){switch(a){case 0:return "A->B";break;case 1:return "B->C";break;case 2:return "C->D";break;case 3:return "D->E";break;case 4:return "E->F";break;case 5:return "F->G";break;case 6:return "G->H";break;case 7:return "H->I";break;case 8:return "I->J";break;case 9:return "J->K";break;case 10:return "K->L";break;case 11:return "L->M";break;case 12:return "M->N";break;case 13:return "N->O";break;case 14:return "O->P";break;case 15:return "P->Q";break;case 16:return "Q->R";break;case 17:return "R->S";break;case 18:return "S->T";break;case 19:return "T->U";break;case 20:return "U->V";break;case 21:return "V->W";break;case 22:return "W->X";break;case 23:return "X->Y";break;case 24:return "Y->Z"}}function GetSectionId(a){if(a==null)return;switch(a.toUpperCase()){case "A":return 0;break;case "B":return 1;break;case "C":return 2;break;case "D":return 3;break;case "E":return 4;break;case "F":return 5;break;case "G":return 6;break;case "H":return 7;break;case "I":return 8;break;case "J":return 9;break;case "K":return 10;break;case "L":return 11;break;case "M":return 12;break;case "N":return 13;break;case "O":return 14;break;case "P":return 15;break;case "Q":return 16;break;case "R":return 17;break;case "S":return 18;break;case "T":return 19;break;case "U":return 20;break;case "V":return 21;break;case "W":return 22;break;case "X":return 23;break;case "Y":return 24;break;case "Z":return 25}}function SearchNearByPolylineEnter(c,b){var a;if(document.all)a=event.keyCode;else a=c.keyCode;if(a==13){isFirstSearch=true;SearchNearByPolylineExt(b,null,null,1,null);return false}return true}function SearchNearByPointEnter(h,c,b,g,f,d,e){var a;if(document.all)a=event.keyCode;else a=h.keyCode;if(a==13){isFirstSearch=true;centerObjectNearby=centerObjectNearbyTemp;SearchNearByPointExt(c,b,g,f,d,"",1,e);return false}return true}function ShowSearchNearByShortestPath(d){var c=d.parentNode.parentNode.id,a=parseInt(c.substring(5,c.length)),b='<div class="MiniPopup">';if(isLang("vi"))b+='<span class="Title">Tìm dịch vụ trên đường đi</span>                <ol class="SearchNearBy">                    <li><span class="ServiceTit">Vd: khách sạn</span><span class="RadiusTit">Bán kính (m)</span></li>                    <li>                        <input id="shortestpathsearchnearby" class="ServiceInput" onkeydown="return SearchNearByPolylineEnter(event,'+a+')" type="text"/>                        <input id="shortestpathsearchnearby_radius" class="RadiusInput" value="100" onkeydown="return SearchNearByPolylineEnter(event,'+a+')" type="text"/>\t\t\t\t\t\t<a class="backbtn" onclick="SearchNearByPolylineExt('+a+',null,null,1,null)"><span>Tìm</span></a>                    </li>                </ol>';else b+='<span class="Title">Find business on road</span>                <ol class="SearchNearBy">                    <li><span class="ServiceTit">Eg: Hotel</span><span class="RadiusTit">Radius (m)</span></li>                    <li>                        <input id="shortestpathsearchnearby" class="ServiceInput" onkeydown="return SearchNearByPolylineEnter(event,'+a+')" type="text"/>                        <input id="shortestpathsearchnearby_radius" class="RadiusInput" value="100" onkeydown="return SearchNearByPolylineEnter(event,'+a+')" type="text"/>\t\t\t\t\t\t<a class="backbtn" onclick="SearchNearByPolylineExt('+a+',null,null,1,null)"><span>Search</span></a>                    </li>                </ol>';b+="</div>";if(a>=0){var e=arrPaths[a][0].getVertex(0);currentStep=d;map.openInfoWindow(e,b);setTimeout(function(){document.getElementById("shortestpathsearchnearby")!=null&&document.getElementById("shortestpathsearchnearby").focus()},500)}}var isFindReverse=false;function FindReverseDirection(){if(arrDes.length!=2)return;isFindReverse=true;var c=$("input","#direction0").val(),d=$("input","#direction1").val(),a=arrDes[0][0].getLatLng(),b=arrDes[1][0].getLatLng();ClearPathResult();AddPlaceFromFind(b,d);AddPlaceToFind(a,c)}function GetTotalDistance(){var d="Tổng chiều dài: ";$("#FindPathStatus").html("");for(var b=0,c=0;c<arrDes.length-1;c++){var a=RemoveHTMLTag($(".summary","#guide"+c).html());if(isLang("vi"))a=a.substring(a.indexOf("Chiều dài: ")+11,a.indexOf("m"));else a=a.substring(a.indexOf("Length: ")+8,a.indexOf("m"));if(a.indexOf("k")>-1)b+=parseFloat(a.substring(0,a.length-1))*1e3;else b+=parseFloat(a.substring(0,a.length))}if(b!=0)if(b>1e3)$("#FindPathStatus").html(d+'<b style="color:#333;">'+parseFloat(parseInt(b)/1e3)+"</b> km");else $("#FindPathStatus").html(d+'<b style="color:#333;">'+parseFloat(b)+"</b> m");else $("#FindPathStatus").html("")}function clearArrows(){if(arrArrows.length>0){for(i=0;i<arrArrows.length;i++)map.removeOverlay(arrArrows[i]);arrArrows=[]}}function OnforcusTextBoxAB(a){a=$(a);a.val()==inputDirHelp&&a.val("");HideSelectPlaceBox();prev_selectedResAB_Text=selectedResAB_Text=a.val()}function OnblurTextBoxAB(a){a=$(a);var b=a.parent().parent()[0].id,c=parseInt(b.substring(9,b.length));a.val()==""&&a.val(inputDirHelp)}var g_Index,g_Value,g_CurPageAB;function SearchPlace(c,b,e){ping_connection();if(isSearching==true)return;g_Index=c;g_Value=b;current_index=c;if(b!=null&&b.length>0){ShowSelectPlaceBox();showBusyDiv("","SelectPlaceContent");isSearching=true;var a=map.getBounds(),d=GLOBAL_SEARCH_ALL;AJLocationSearch.SearchResult(b,"","",e,map.getLevel(),a.getNorthWest().lng(),a.getNorthWest().lat(),a.getSouthEast().lng(),a.getSouthEast().lat(),d,PathBinding)}return false}function PathBinding(y){isSearching=false;hideBusyDiv();var a=y.value,c=[];if(null!=a&&"object"==typeof a){var x=a.Tables[0].Rows.length,e=a.Tables[1].Rows[0].HitSize,v=a.Tables[1].Rows[0].IsAddress,r=a.Tables[1].Rows[0].SuggestedKey,l=a.Tables[1].Rows[0].Key,A=a.Tables[1].Rows[0].IsLonLat,q=l.indexOf("|"),i,h;if(q>=0){i=l.substring(0,q);i=Global.TrimSpace(i);h=l.substring(q+1);h=Global.TrimSpace(h)}var b=parseInt((e+PAGE_ROWS-1)/PAGE_ROWS),g=10;b=b>g?g:b;var w=b>PAGE_SHOW?PAGE_SHOW:b,p=a.Tables[1].Rows[0].PageIdx;searchType=a.Tables[1].Rows[0].SearchType;var r=a.Tables[1].Rows[0].SuggestedKey,m=(p-1)*PAGE_ROWS+1,s=m+PAGE_ROWS-1>e?e:m+PAGE_ROWS-1;if(e==1){var f=a.Tables[0].Rows[0].Address,j=a.Tables[0].Rows[0].Name,o=a.Tables[0].Rows[0].Latitude,n=a.Tables[0].Rows[0].Longitude,t=o,u=n,k=j;if(f!="")k=j+", "+f;if(v)k=f+(f!=""?", ":"")+j;changeContentFlag=true;AddPlaceAB(current_index,o,n,k);arrDes.length==1&&map.setCenter(new VLatLng(t,u),map.getLevel());return}c[c.length]='<div id="TablePlace">';c[c.length]=Global.GetResultText(l,"<b>"+i+"</b>",h,r,e,a.Tables[1].Rows[0].IsLonLat,a.Tables[1].Rows[0].IsAddress,m,s,g_Index);for(var d=0;d<x;d++){var f=a.Tables[0].Rows[d].Address,j=a.Tables[0].Rows[d].Name,z=a.Tables[0].Rows[d].Tel,o=a.Tables[0].Rows[d].Latitude,n=a.Tables[0].Rows[d].Longitude,k=GetLocationFullName(a.Tables[0].Rows[d]);c[c.length]='<div class="resultItem SPresultItem" onmouseover="ResultEntryPlaceABMouseOver(this)" onmouseout="ResultEntryPlaceABMouseOut(this)" onclick="AddPlaceAB('+current_index+","+o+","+n+",'"+k+'\')">                                    <span class="icon1-10">'+((a.Tables[1].Rows[0].PageIdx-1)*10+d+1)+'</span>                                    <a class="resultTitle SPresultTitle">'+j+'</a>                                    <p><span class="address">'+f+'</span> <span class="phone">'+z+"</span></p>                                 </div>"}var b=parseInt((e+PAGE_ROWS-1)/PAGE_ROWS),g=10;b=b>g?g:b;var w=b>PAGE_SHOW?PAGE_SHOW:b,p=a.Tables[1].Rows[0].PageIdx;c[c.length]=Global.BuildPaging(p,b,e,w,Global.PagingSearchPlaceForPath,[g_Index,g_Value,p]);c[c.length]="</div>";SetSelectPlaceBoxContent(c.join(""));$(".countPlace","#SelectPlace").addClass("SPcountPlace");$(".keyPlace","#SelectPlace").addClass("SPkeyPlace")}}function AddPlaceAB(a,c,d,b){if(a==null)a=currentSelectedResAB_Id;if(c==null)c=currentSelectedResAB_Lat;if(d==null)d=currentSelectedResAB_Lng;if(b==null)b=currentSelectedResAB_Text;if(a==-1){HideSelectPlaceBox();return}b=RemoveHTMLTag(b);var e=arrDes.length;if(a+1>=e){RemovePlace(a+",0");if(toFirst==false)if(a==0)AddPlaceFromFind(new VLatLng(c,d),b);else AddPlaceToFind(new VLatLng(c,d),b);else AddPlaceFromFind(new VLatLng(c,d),b)}else{$("input","#direction"+a).val(b);arrDes[a][0].setPoint(new VLatLng(c,d));FindShortestPath(a+",0",0,0,0)}changeContentFlag=false;HideSelectPlaceBox()}function ShowSelectPlaceBox(){var c=$("#findpathtabdiv").height(),b=21,a=$("#topLeftPathResult")[0].offsetHeight+$("#direction"+current_index)[0].offsetTop-$("#findpath_div")[0].scrollTop+110;if(a+$("#SelectPlace").height()-110>=c){a-=261;b=284;if(a<110){b=a+261-150+21;a=150}}$(".SelectPlaceArrow").css("top",b);$(".a-z, .TitFlag","#SelectPlace")[0].innerHTML=alphabet[current_index];$("#SelectPlace").show();$("#SelectPlace").css("top",a)}function SetSelectPlaceBoxContent(a){ShowSelectPlaceBox();$("#SelectPlaceContent").html(a).scrollTop(0);$(".searchinwrap","#SelectPlaceContent").remove()}function HideSelectPlaceBox(){$("#SelectPlace").css("display","none")}var bCreateNewMMObj=false,bEditMMObj=false,bReadOnly=true,bHaveDeletedMM=-1,bSendMyMap=false,bWaitingCreateNewMap=false,bDrawingPolyline=false,arrDrawingPts=null,nDrawingPts=0,tempPolyline=null,dsMyMap=null,dsMyMapCoor=null,iMyMapOpening=-1,iMyMapCoorSel=-1,iMyMapCoorOver=-1,arrMyMapCoorObj=[],nMyMapCoorObj=0,arrControlPoint=[],nControlPoint=0,arrAPControlPoint=[],nAPControlPoint=0,bCPDragging=false,clickedPoint=null,selTbrButton=null,curTitle="",curDesc="",curIcon="",curText="",curFontFamily="",curFontWeight="",curFontSize="",curFontColor="",curLineColor="",curLineWidth="",curLineOpacity="",curFillColor="",curFillOpacity="",curColElX=0,curColElY=0,Ds_MyMapProperty=null,colorArr=[["#ff8080","#ffff80","#80ff80","#00ff80","#80ffff","#0080ff","#ff80c0","#ff80ff"],["#ff0000","#ffff00","#80ff00","#00ff40","#00ffff","#0080c0","#8080c0","#ff00ff"],["#804040","#ff8040","#00ff00","#008080","#004080","#8080ff","#800040","#ff0080"],["#800000","#ff8000","#008000","#008040","#0000ff","#0000a0","#800080","#8000ff"],["#400000","#804000","#004000","#004040","#000080","#000040","#400040","#400080"],["#000000","#808000","#808040","#808080","#408080","#c0c0c0","#400040","#ffffff"]],iconArr=["point-1.gif","point-2.html","point-3.html","point-4.html","star-1.html","heart_1.html","heart_2.html","taxi.html","bus-1.html","bus-2.html","train.html","airplane.html","port.html","bicyle.html","food-1.html","drink.html","beer.html","ice-cream.html","food-4.html","food.html","birthday-cake.html","toast-done.html","college.html","school.html","book.html","snare.html","media_3.html","media_4.html","webcam.html","headphone.html","hospital.html","factory.html","hotel.html","bank.html","ATM.html","umbrella.html","park.html","pagoda.html","church.html","light.html","shopping.html","bag.html","petro.html","home.html","trambomnuoc.html","fire-engine.html","danphong.html","police.html","radar.html","bomb.html","radioactive.html","skull.html","virussafe.html","tooth.html","stethoscope.html","pills.html","toilet-paper.html","broom.html","cabinet.html","magic.html","lifebuoy.html","veston.png"],MMListTempl='<div id="MyMapList_%Order%" class="MyMapList">                        <div class="MyMapListLeft">                            <span class="MapListIcon">%ListOrder%</span>                            <a id="MyMapListTitle_%Order%" class="MapListTitle" onclick="loadMyMapCoor(%Order%)">%Title%</span></a>                            <p id="MyMapListDesc_%Order%">                                <span class="Info">%Des%</span>                            </p>    \t                </div>                        <a class="MyMapDel" onclick="deleteMyMap(%Order%)">Xóa</a>                    </div>',MMCoorTempl='<li id="MyMapCoorList_%Order%">                        <div id="MyMapCoorListIcon_%Order%"" class="MyMapCoorListImage" style="background: url(%Icon%) no-repeat 0 center;">\t\t\t\t\t\t\t<div class="MMCoorLeft">\t\t\t\t\t\t\t\t<a class="listpinstit" onclick="clickedPoint=null;showMyMapInfoWindow(%Order%, 0)">%Name%</a>\t\t\t\t\t\t\t\t<span class="listpinsinfo">%Des%</span>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>                        <a class="MyMapDel" onclick="deleteMyMapCoor(%Order%)">Xóa</a>                    </li>',BUDDY_TAB=1,FAVOURITE_TAB=2,CREATEBYME_TAB=3;function LoadMyMapToolBar(a){if(bSendMyMap&&a!="ViewItem")return;$("#createNewMap").hide();$("#btnCancelMyMap").hide()[0].onclick=function(){};$("#btnEditMyMap").hide();$("#btnSaveMyMap").hide();$("#btnTrashMyMap").hide()[0].onclick=function(){};switch(a){case "ViewList":$("#createNewMap").show();$("#MyMapInfo").html("");$(".listpins").html("");break;case "ViewItem":if(!bSendMyMap){$("#btnCancelMyMap").show()[0].onclick=function(){closeMyMap()};$("#btnEditMyMap").show();$("#btnTrashMyMap").show()[0].onclick=function(){deleteMyMap(iMyMapOpening)}}$("#MyMapToolbar").hide();$(".ToolbarExplain").hide();$(".MyMapDel","#MyMapCoorList").hide();break;case "EditItem":$("#btnCancelMyMap").show()[0].onclick=function(){cancelEditMyMap()};$("#btnSaveMyMap").show();$("#btnTrashMyMap").show()[0].onclick=function(){deleteMyMap(iMyMapOpening)};$("#MyMapToolbar").show();$(".ToolbarExplain").show();$(".ToolbarExplain").html("Thay đổi vị trí các đối tượng");$(".MyMapDel","#MyMapCoorList").show();disableSaveBtn()}}function createNewMap(){ArrEditProperty=[];ArrDeleteProperty=[];flagEditProperty=false;ArrPropertyAsLoad=[];Ds_MyMapProperty=null;if(bEditMMObj&&iMyMapOpening!=-1&&checkLogin())if(confirm(isLang("vi")?"Bạn có muốn lưu lại bản đồ của bạn không?":"Do you want to save your map?")){bWaitingCreateNewMap=true;saveMyMap()}else fnCreateNewMap();else fnCreateNewMap()}var bjustcreate=false;function fnCreateNewMap(){if(!MembershipRequire())return;bEditMMObj=false;bReadOnly=false;bjustcreate=true;$("#MyMapList").hide();$("#MyMapArea").show();showBusyDiv("Đang tạo bản đồ mới","mymap_div");var a={};a.MyMapID="";a.UserID="";a.Title="Chưa đặt tên";a.Description="";a.MapID="vietnam";a.ZoomLevel=map.getLevel();var b=map.getCenter();a.LastPosX=b.lng();a.LastPosY=b.lat();dsMyMap.Tables[0].Rows[dsMyMap.Tables[0].Rows.length]=a;iMyMapOpening=dsMyMap.Tables[0].Rows.length-1;var c=map.getLevel()+"!"+b.lng()+"!"+b.lat();AJLocationSearch.CreateNewMap(c,createNewMapCallback);if(dsMyMapCoor==null){dsMyMapCoor={};dsMyMapCoor.Tables=[];dsMyMapCoor.Tables[0]={};dsMyMapCoor.Tables[0].Rows=[]}editMyMap()}function createNewMapCallback(b){hideBusyDiv();if(b.error!=null){ReportError();return}var a=b.value.split("!");dsMyMap.Tables[0].Rows[iMyMapOpening].MyMapID=a[0];dsMyMap.Tables[0].Rows[iMyMapOpening].UserID=a[1]}function createMyMapCoor(b,c,d,e){var a=MMCoorTempl.replace(/%Order%/g,b);a=a.replace(/%Icon%/g,c);a=a.replace(/%Name%/g,d);a=a.replace(/%Des%/g,e);$(".listpins","#MyMapCoorList").append(a)}function deleteMyMap(a){bHaveDeletedMM=a;if(confirm(isLang("vi")?"Bạn có thật sự muốn xóa bản đồ này?":"Are you sure to delete this map?")){var b=dsMyMap.Tables[0].Rows[a].MyMapID;AJLocationSearch.DeleteMyMap(b);loadMyMap()}}function deleteMyMapCoor(a){if(confirm(isLang("vi")?"Bạn có thật sự muốn xóa đối tượng này?":"Are you sure to delete this object?")){if(arrMyMapCoorObj[a].actionType=="New")arrMyMapCoorObj[a].actionType="NoAction";else arrMyMapCoorObj[a].actionType="Delete";clearControlPoint();map.removeOverlay(arrMyMapCoorObj[a]);$("#"+("MyMapCoorList_"+a)).remove();iMyMapCoorSel=-1;enableSaveBtn();map.closeInfoWindow()}}var isInit=false;function InitMyMap(){isInit=true;loadMyMap()}function loadMyMap(){if(!checkLogin())return;$("#MyMapList").show();$("#MyMapArea").hide();clearControlPoint();map.closeInfoWindow();iMyMapCoorOver=-1;iMyMapCoorSel=-1;iMyMapOpening=-1;for(var a=0;a<nMyMapCoorObj;a++)arrMyMapCoorObj[a].actionType!="Delete"&&map.removeOverlay(arrMyMapCoorObj[a]);arrMyMapCoorObj=[];nMyMapCoorObj=0;dsMyMapCoor=null;if(isLang("vi"))showBusyDiv("Đang tải bản đồ","mymap_div");else showBusyDiv("Map loading","mymap_div");ArrEditProperty=[];ArrDeleteProperty=[];flagEditProperty=false;ArrPropertyAsLoad=[];AJLocationSearch.GetAllMyMap(loadMyMapCallback)}function loadMyMapCallback(c){hideBusyDiv();if(c.error!=null){ReportError();return}dsMyMap=c.value;var d=-1;if(dsMyMap!=null&&dsMyMap.Tables[0].Rows.length>0){$("#MyMapList").html("<h3 class='mymaptitle'>Danh sách các bản đồ</h3>");for(var a=0;a<dsMyMap.Tables[0].Rows.length;a++){if(dsMyMap.Tables[0].Rows[a].MyMapID==bSendMyMap){d=a;bSendMyMap=false}var b=MMListTempl.replace(/%Order%/g,a);b=b.replace(/%ListOrder%/g,a+1);b=b.replace(/%Title%/g,dsMyMap.Tables[0].Rows[a].Title);b=b.replace(/%Des%/g,dsMyMap.Tables[0].Rows[a].Description);$("#MyMapList").append(b)}}else showMyMapHelp();if(bSendMyMap==false)loadMyMapCoor(d);else{loadMyMapCoor(bSendMyMap);bSendMyMap=true}LoadMyMapToolBar("ViewList")}function showMyMapHelp(){$("#MyMapList").html(MymapHelpHTML)}function hideMyMapHelp(){$("#MyMapList").html("")}function loadMyMapCoor(a){if(a==-1)return;if(bSendMyMap){showBusyDiv("Đang nạp bản đồ","mymap_div");AJLocationSearch.GetAllMyCoorML(a,loadMyMapCoorCallback)}else{if(bHaveDeletedMM==a){bHaveDeletedMM=-1;return}bHaveDeletedMM=-1;iMyMapOpening=a;showBusyDiv("Đang nạp bản đồ","mymap_div");$("#MyMapInfo").html("");$(".listpins").html("");AJLocationSearch.GetAllMyCoor(dsMyMap.Tables[0].Rows[iMyMapOpening].MyMapID,loadMyMapCoorCallback)}}function loadMyMapCoorCallback(a){hideBusyDiv();if(a.error!=null){ReportError();return}bReadOnly=true;fnLoadMyMapCoor(a)}function fnLoadMyMapCoor(h){$("#MyMapList").hide();$("#MyMapArea").show();$("#MyMapList").html("");dsMyMapCoor=h.value;if(dsMyMapCoor!=null){if(bSendMyMap)$("#InforOfMyMap").hide();else{$("#InforOfMyMap").show();map.setCenter(new VLatLng(dsMyMap.Tables[0].Rows[iMyMapOpening].LastPosY,dsMyMap.Tables[0].Rows[iMyMapOpening].LastPosX),dsMyMap.Tables[0].Rows[iMyMapOpening].ZoomLevel);BindMyMapInfo(dsMyMap.Tables[0].Rows[iMyMapOpening])}for(var b=0;b<dsMyMapCoor.Tables[0].Rows.length;b++){var a=dsMyMapCoor.Tables[0].Rows[b].Style.toString().split(";"),c=dsMyMapCoor.Tables[0].Rows[b].Coor,d="";if(c.indexOf("POINT")>=0){e=NormalizeGeo(c,"POINT");if(a.length>=6&&a[5].length>0){d="images/icon_text.gif";var g=new VTextStyle(parseInt(a[2]),a[0],a[1],a[3]);createMMText(e,a[5],g)}else{d="images/MyMap_icon/"+a[4];createMMMarker(e,new VIcon(d,new VSize(32,32)))}}else if(c.indexOf("LINESTRING")>=0){d="images/icon_polyline.gif";var e=NormalizeGeo(c,"LINESTRING");createMMPolyline(e,a[1],parseFloat(a[0]),a[2],parseFloat(a[3]))}else if(c.indexOf("POLYGON")>=0){d="images/icon_polygon.gif";var e=NormalizeGeo(c,"POLYGON"),f=a[4]==""?.5:a[4];createMMPolygon(e,a[1],parseFloat(a[0]),a[2],f,parseFloat(a[3]))}createMyMapCoor(b,d,dsMyMapCoor.Tables[0].Rows[b].ObjectTitle,dsMyMapCoor.Tables[0].Rows[b].ObjectDesc)}}map.fitOverlays();LoadMyMapToolBar("ViewItem")}function createMMText(c,a,b){var a=new VText(c,a,b);a.type=MYMAPOBJ;a.mmIndex=nMyMapCoorObj;a.actionType="NoAction";map.addOverlay(a);arrMyMapCoorObj[nMyMapCoorObj]=a;nMyMapCoorObj++;VEvent.addListener(a,"dragend",function(a){if(a.actionType!="New")a.actionType="Edit";enableSaveBtn()})}function createMMMarker(b,c){var a=new VMarker(b,c);a.type=MYMAPOBJ;a.mmIndex=nMyMapCoorObj;a.actionType="NoAction";map.addOverlay(a);arrMyMapCoorObj[nMyMapCoorObj]=a;nMyMapCoorObj++;VEvent.addListener(a,"dragend",function(a){if(a.actionType!="New")a.actionType="Edit";enableSaveBtn()})}function createMMPolyline(f,c,d,b,e){var a=new VPolyline(f,c,d,b,e);a.type=MYMAPOBJ;a.mmIndex=nMyMapCoorObj;a.actionType="NoAction";map.addOverlay(a);arrMyMapCoorObj[nMyMapCoorObj]=a;nMyMapCoorObj++;VEvent.addListener(a,"mouseover",function(){showControlPoint(a)})}function createMMPolygon(g,e,f,d,c,b){var a=new VPolygon(g,e,f,d,c,b);a.type=MYMAPOBJ;a.mmIndex=nMyMapCoorObj;a.actionType="NoAction";a.reductionTol=0;map.addOverlay(a);arrMyMapCoorObj[nMyMapCoorObj]=a;nMyMapCoorObj++;VEvent.addListener(a,"mouseover",function(){showControlPoint(a)})}function disableSaveBtn(){var a=document.getElementById("btnSaveMyMap");if(a!=null){a.style.filter="alpha(opacity = 40)";a.style.opacity=.4}bEditMMObj=false}function enableSaveBtn(){var a=document.getElementById("btnSaveMyMap");if(a!=null){a.style.filter="";a.style.opacity=1}bEditMMObj=true}function editMyMap(){bReadOnly=false;map.closeInfoWindow();LoadMyMapToolBar("EditItem");var b='<ol class="inputinfo">        \t        <li>            \t        <span class="NameTit input">Tên</span>                        <input id="txtMapTitle" onkeydown="enableSaveBtn()" type="text" value="'+dsMyMap.Tables[0].Rows[iMyMapOpening].Title+'">                    </li>                    <li>            \t        <span class="InfoTit input">Mô tả</span>                        <textarea id="txtMapDesc" onkeydown="enableSaveBtn()">'+dsMyMap.Tables[0].Rows[iMyMapOpening].Description+"</textarea>                    </li>                </ol>";b+='<span class="subinfo">Thông tin bổ sung</span>            <ol id="MyMapPropertyInfo" class="listsubinfo listsubinfoinput">        \t    <li>            \t    <span class="Mname">Tên</span>                    <span class="Mvalue">Giá trị</span>                </li>            </ol>            <a class="addsubinfo" onclick="AddNewPropertyClick(\'MyMapPropertyInfo\',\'MyMapProInfoChild\')"><span>Thêm</span></a>';$("#MyMapInfo").html(b);if(Ds_MyMapProperty!=null&&Ds_MyMapProperty.Tables[0].Rows.length>0)for(var a=0;a<Ds_MyMapProperty.Tables[0].Rows.length;a++)AddNewPropertyClick("MyMapPropertyInfo","MyMapProInfoChild",Ds_MyMapProperty.Tables[0].Rows[a].property_name,Ds_MyMapProperty.Tables[0].Rows[a].property_value);else AddNewPropertyClick("MyMapPropertyInfo","MyMapProInfoChild");disableSaveBtn();selectToolbarBtn(document.getElementById("btnMove"));for(var a=0;a<nMyMapCoorObj;a++)(arrMyMapCoorObj[a].vType()=="VMarker"||arrMyMapCoorObj[a].vType()=="VText")&&arrMyMapCoorObj[a].enableDragging();if(iMyMapCoorSel!=-1){clickedPoint=null;showMyMapInfoWindow(iMyMapCoorSel,0)}}function cancelEditMyMap(){if(bEditMMObj)confirm(isLang("vi")?"Bản đồ của bạn đã thay đổi.\n\nBạn có muốn lưu lại không?":"Your map has changed.\n\nDo you want to save the changes?")&&saveMyMap();if(bjustcreate){bHaveDeletedMM=iMyMapOpening;AJLocationSearch.DeleteMyMap(dsMyMap.Tables[0].Rows[iMyMapOpening].MyMapID);loadMyMap();return}bReadOnly=true;selectToolbarBtn($("#btnMove")[0]);selTbrButton=null;map.closeInfoWindow();clearControlPoint();BindMyMapInfo(dsMyMap.Tables[0].Rows[iMyMapOpening]);for(var a=0;a<nMyMapCoorObj;a++)(arrMyMapCoorObj[a].vType()=="VMarker"||arrMyMapCoorObj[a].vType()=="VText")&&arrMyMapCoorObj[a].disableDragging();if(iMyMapCoorSel!=-1){clickedPoint=null;showMyMapInfoWindow(iMyMapCoorSel,0)}LoadMyMapToolBar("ViewItem")}function BindMyMapInfo(c){var a='<ol class="info">                    <li class="li-1">                        <span class="NameTit">Tên</span>                        <span class="Name">'+c.Title+'</span>                    </li>                    <li>                        <span class="InfoTit">Mô tả</span>                        <span class="Info">'+c.Description+"</span>                    </li>                </ol>";Ds_MyMapProperty=AJLocationSearch.GetMyMapProperty(c.MyMapID).value;if(Ds_MyMapProperty!=null&&Ds_MyMapProperty.Tables[0].Rows.length>0){a+='<span class="subinfo">Thông tin bổ sung</span>                    <ol class="listsubinfo">';for(var b=0;b<Ds_MyMapProperty.Tables[0].Rows.length;b++)a+='<li>                        <span class="name">'+Ds_MyMapProperty.Tables[0].Rows[b].property_name+':</span>                        <span class="value">'+Ds_MyMapProperty.Tables[0].Rows[b].property_value+"</span>                    </li>";a+="</ol>"}$("#MyMapInfo").html(a)}var ArrEditProperty=[],ArrDeleteProperty=[];function saveMyMap(){if(!bEditMMObj)return;bjustcreate=false;for(var c=[],j=[],i=[],h=[],a=0;a<nMyMapCoorObj;a++)if(arrMyMapCoorObj[a].actionType!="NoAction"){var d="";if(arrMyMapCoorObj[a].actionType!="Delete")if(arrMyMapCoorObj[a].vType()=="VMarker"||arrMyMapCoorObj[a].vType()=="VText"){var s=arrMyMapCoorObj[a].getLatLng();d="POINT("+s.lng()+" "+s.lat()+")"}else if(arrMyMapCoorObj[a].vType()=="VPolyline"){var p=arrMyMapCoorObj[a].getLatLngs();d=GeoAsText(p,"LINESTRING")}else if(arrMyMapCoorObj[a].vType()=="VPolygon"){var p=arrMyMapCoorObj[a].getLatLngs();d=GeoAsText(p,"POLYGON")}var b=dsMyMapCoor.Tables[0].Rows[a],u=b.MyMapCoorID!=""?b.MyMapCoorID:"null",m=b.ObjectTitle!=""?b.ObjectTitle:"null",o=b.ObjectDesc!=""?b.ObjectDesc:"null",n=d!=""?d:"null",l=b.Style!=""?b.Style:"null",k=b.Public!=""?b.Public:"0";if(arrMyMapCoorObj[a].actionType=="New")if(b.Property!=undefined&&b.Property!=null){c[c.length]=m+"!"+o+"!"+n+"!"+l+"!"+k+"!-"+(a+1);for(var f=0;f<b.Property.length;f++){b.Property[f].MyMapCoorID=(a+1)*-1;h[h.length]=b.Property[f]}}else c[c.length]=m+"!"+o+"!"+n+"!"+l+"!"+k+"0";else if(arrMyMapCoorObj[a].actionType=="Edit")j[j.length]=u+"!"+m+"!"+o+"!"+n+"!"+l+"!"+k;else if(arrMyMapCoorObj[a].actionType=="Delete")i[i.length]=u}var y=c.join("!!"),x=j.join("!!"),v=i.join("!!"),b=dsMyMap.Tables[0].Rows[iMyMapOpening],e=map.getCenter(),z=document.getElementById("txtMapTitle").value,A=document.getElementById("txtMapDesc").value,B=b.MyMapID+"!!"+z+"!!"+A+"!!"+map.getLevel()+"!!"+e.lng()+"!!"+e.lat(),w=GetPropertyForUpdate("MyMapPropertyInfo",Ds_MyMapProperty),g="";if(ArrDeleteProperty!=null&&ArrDeleteProperty.length>0){for(var a=0;a<ArrDeleteProperty.length-1;a++)g+=ArrDeleteProperty[a].MyMapCoor_property_value_id+",";g+=ArrDeleteProperty[ArrDeleteProperty.length-1].MyMapCoor_property_value_id}var t=AJLocationSearch.SaveMyMap(B,y,x,v,w,h,ArrEditProperty,g);if(t.error!=null){ReportError();return}if(t.value!=null);if(bWaitingCreateNewMap){fnCreateNewMap();bWaitingCreateNewMap=false}LoadMyMapToolBar("EditItem");ArrEditProperty=[];ArrDeleteProperty=[];flagEditProperty=false;ArrPropertyAsLoad=[];Ds_MyMapProperty=null;var q=document.getElementById("txtMapTitle").value,r=document.getElementById("txtMapDesc").value;dsMyMap.Tables[0].Rows[iMyMapOpening].Title=q;dsMyMap.Tables[0].Rows[iMyMapOpening].Description=r;dsMyMap.Tables[0].Rows[iMyMapOpening].ZoomLevel=map.getLevel();dsMyMap.Tables[0].Rows[iMyMapOpening].LastPosX=e.lng();dsMyMap.Tables[0].Rows[iMyMapOpening].LastPosY=e.lat();$("#MyMapListTitle_"+iMyMapOpening).html(q);$(".Info","#MyMapListDesc_"+iMyMapOpening).html(r)}function closeMyMap(){loadMyMap()}function saveMyMapCoor(){var f=document.getElementById("txtTitle").value,g=document.getElementById("txtDesc").value,j=1;dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].ObjectTitle=f;dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].ObjectDesc=g;dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Public=j;$(".listpinstit","#MyMapCoorList_"+iMyMapCoorSel).html(f);$(".listpinsinfo","#MyMapCoorList_"+iMyMapCoorSel).html(g);curIcon="";curTitle="";curDesc="";var a=arrMyMapCoorObj[iMyMapCoorSel];if(a.actionType!="New"){a.actionType="Edit";if(flagEditProperty){for(var d=[],h=dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].MyMapCoorID,b=0;b<ArrEditProperty.length;b++)ArrEditProperty[b].MyMapCoorID!=h&&d.push(ArrEditProperty[b]);ArrEditProperty=d;d=[];for(var b=0;b<ArrDeleteProperty.length;b++)ArrDeleteProperty[b].MyMapCoorID!=h&&d.push(ArrDeleteProperty[b]);ArrDeleteProperty=d;GetCoorPropertyForUpdate("CoorPropertyInfo")}dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Property=GetProperty("CoorPropertyInfo")}else dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Property=GetProperty("CoorPropertyInfo");if(a.vType()=="VMarker"){var c=document.getElementById("btnShowPro").src;c=c.substring(c.lastIndexOf("http://www.vietbando.com/")+1);dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Style=";;;;"+c+";";a.setIcon(new VIcon("images/MyMap_icon/"+c,new VSize(32,32)));$("#MyMapCoorListIcon_"+iMyMapCoorSel).css("background","url(images/MyMap_icon/"+c+") no-repeat 0 center");var e=a.getLatLng();dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Coor="POINT("+e.lng()+" "+e.lat()+")"}else if(a.vType()=="VText"){if(curText!=""){dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Style=curFontWeight+";"+curFontColor+";"+curFontSize+";"+curFontFamily+";;"+curText;var i=new VTextStyle(curFontSize,curFontWeight,curFontColor,curFontFamily);a.setText(curText,i);var e=a.getLatLng();dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Coor="POINT("+e.lng()+" "+e.lat()+")"}}else if(a.vType()=="VPolyline"){if(curLineColor!=""){dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Style=curLineWidth+";"+curLineColor+";"+curLineColor+";"+parseFloat(curLineOpacity)/100+";;";a.setStyle(curLineColor,parseFloat(curLineWidth),curLineColor,parseFloat(curLineOpacity)/100);dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Coor=GeoAsText(a.getLatLngs(),"LINESTRING")}}else if(a.vType()=="VPolygon")if(curLineColor!=""){dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Style=curLineWidth+";"+curLineColor+";"+curFillColor+";"+parseFloat(curFillOpacity)/100+";"+parseFloat(curLineOpacity)/100+";";a.setStyle(curLineColor,parseFloat(curLineWidth),curFillColor,parseFloat(curLineOpacity)/100,parseFloat(curFillOpacity)/100);dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Coor=GeoAsText(a.getLatLngs(),"POLYGON")}map.closeInfoWindow();curTitle="";curDesc="";curIcon="";curText="";curFontFamily="";curFontWeight="";curFontSize="";curFontColor="";curLineColor="";curLineWidth="";curLineOpacity="";curFillColor="";curFillOpacity=""}var ArrPropertyAsLoad=[];function showMyMapInfoWindow(b,m){if(b>=dsMyMapCoor.Tables[0].Rows.length)return;changeCoorBkColor(iMyMapCoorSel,false);changeCoorBkColor(b,true);iMyMapCoorSel=b;var j=dsMyMapCoor.Tables[0].Rows[b].MyMapCoorID;if(j!=""&&(dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Property==null||dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Property==undefined)){var g=null;g=AJLocationSearch.GetMyMapCoorProperty(parseInt(dsMyMapCoor.Tables[0].Rows[b].MyMapCoorID)).value;if(g!=null&&g.length>0){dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Property=g;var h=ArrPropertyAsLoad.length;ArrPropertyAsLoad[h]={};ArrPropertyAsLoad[h].id=j;ArrPropertyAsLoad[h].value=g}}var d=arrMyMapCoorObj[b],l=dsMyMapCoor.Tables[0].Rows[b].Style.toString().split(";"),a='<div id="MyMapCoorPopup">';if(bReadOnly){a+="<h3>"+(isLang("vi")?"Thông tin địa điểm":"Place information")+"</h3>";a+='<ol class="info">                    <li class="li-1">                        <span class="NameTit">Tên</span>                        <span class="Name">'+dsMyMapCoor.Tables[0].Rows[b].ObjectTitle+"</span>                    </li>";if(dsMyMapCoor.Tables[0].Rows[b].ObjectDesc!="")a+='<li>                        <span class="InfoTit">Mô tả</span>                        <span class="Info">'+dsMyMapCoor.Tables[0].Rows[b].ObjectDesc+"</span>                   </li>";a+="</ol>";var c=dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Property;if(c!=undefined&&c!=null&&c.length>0){a+='<span class="subinfo">Thông tin bổ sung</span>';a+='<ol class="listsubinfo">';for(var e=0;e<c.length;e++){a+="<li>";a+='<span class="name">'+c[e].property_name+": </span>";a+='<span class="value">'+c[e].property_value+"</span>";a+="</li>"}}a+="</ol>"}else{var f="",i=isLang("vi")?"Thay đổi thuộc tính":"Change attribute";if(d.vType()=="VMarker"){f=curIcon==""?"mymap_icon/"+l[4]:"mymap_icon/"+curIcon;i=isLang("vi")?"Chọn biểu tượng":"Chose symbol"}else if(d.vType()=="VText")f="icon_text.html";else if(d.vType()=="VPolyline")f="icon_polyline.html";else if(d.vType()=="VPolygon")f="icon_polygon.html";var k=bCreateNewMMObj?"Tạo mới địa điểm":"Cập nhật địa điểm",o=curTitle==""?dsMyMapCoor.Tables[0].Rows[b].ObjectTitle:curTitle,n=curDesc==""?dsMyMapCoor.Tables[0].Rows[b].ObjectDesc:curDesc,p=dsMyMapCoor.Tables[0].Rows[b].Public==1?"checked":"";a+="<h3>"+k+'</h3>                <a class="PointIcon" original-title="Chọn biểu tượng"><span><img id="btnShowPro" src="images/'+f+'" alt="'+i+'"/></span></a>                <ol class="inputinfo">        \t        <li>            \t        <span class="NameTit input">Tên</span>                        <input id="txtTitle" onkeydown="enableSaveBtn()" type="text" value="'+o+'">                    </li>                    <li>            \t        <span class="InfoTit input">Mô tả</span>                        <textarea id="txtDesc" onkeydown="enableSaveBtn()">'+n+"</textarea>                    </li>                </ol>";a+='<span class="subinfo">Thông tin bổ sung</span>            <ol id="CoorPropertyInfo" class="listsubinfo listsubinfoinput">        \t    <li class="li-relative">            \t    <span class="Mname">Tên</span>                    <span class="Mvalue">Giá trị</span>                </li>            </ol>            <a id="CoorAddNewPropertyStore" class="addsubinfo" onclick="AddNewPropertyClick(\'CoorPropertyInfo\',\'MyMapCoorProInfo\')"><span>Thêm</span></a>';a+='<div class="mmpopupbtn"><a onclick="saveMyMapCoor()" id="btnSaveMyMapCoor"><span>Đồng ý</span></a>';a+='<a onclick="map.closeInfoWindow()" id="btnSaveMyMapCoor"><span>Bỏ qua</span></a></div>'}a+='</div><div class="Spacer"></div>';if(m==0||clickedPoint==null)d.openInfoWindow(a);else if(d.vType()=="VMarker"||d.vType()=="VText")d.openInfoWindow(a);else map.openInfoWindow(clickedPoint,a);if(!bReadOnly){document.getElementById("btnShowPro").onclick=function(){curTitle=document.getElementById("txtTitle").value;curDesc=document.getElementById("txtDesc").value;showMyMapProInfoWindow()};var c=dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Property;if(c!=undefined&&c!=null&&c.length>0)for(var e=0;e<c.length;e++)AddNewPropertyClick("CoorPropertyInfo","MyMapCoorProInfo",c[e].property_name,c[e].property_value);else AddNewPropertyClick("CoorPropertyInfo","MyMapCoorProInfo")}}function GetMyMapCoorPropertyCallback(a){hideBusyDiv();if(a.error!=null){ReportError();return}val=a.value}function showMyMapProInfoWindow(){var d=arrMyMapCoorObj[iMyMapCoorSel],b=dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].Style.toString().split(";");if(d.vType()=="VMarker"){var a=[];a[a.length]="<table border='0' cellspacing='0' cellpadding='0' style='width:280px; height:200px; background-color:#FFFFFF;'>";a[a.length]="<tr>";if(isLang("vi"))a[a.length]="<td onclick='showMyMapInfoWindow("+iMyMapCoorSel+", 0)' width='280px' align='left' valign='middle' style='height:32px;'><img src='images/backpage.gif' align='absmiddle' style='cursor:pointer;' /><a style='color:#999999; font-size:11px;font-family:Verdana;cursor:pointer;' onmouseover=ChangeTextColor(this,'#558800') onmouseout=ChangeTextColor(this,'#999999')>Quay lại</a></td>";else a[a.length]="<td onclick='showMyMapInfoWindow("+iMyMapCoorSel+", 0)' width='280px' align='left' valign='middle' style='height:32px;'><img src='images/backpage.gif' align='absmiddle' style='cursor:pointer;' /><a style='color:#999999; font-size:11px;font-family:Verdana;cursor:pointer;' onmouseover=ChangeTextColor(this,'#558800') onmouseout=ChangeTextColor(this,'#999999')>Back</a></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td align='left' valign='top'>";a[a.length]="<div style='cursor:pointer; float:left; width:280px;height:155px; margin-top:2px; overflow:auto; background-color:#ffffff;'>";for(var e=0;e<iconArr.length;e++){var f="";if(curIcon=="")f=b[4];else f=curIcon;if(iconArr[e]==f)a[a.length]="<img width='32px' height='32px' style='border:1px #0066cc solid;' onclick='chooseIcon(this)' src='images/mymap_icon/"+iconArr[e]+"'/> ";else a[a.length]="<img width='32px' height='32px' style='border:1px #ffffff solid;' onclick='chooseIcon(this)' onmouseover='changeMarkerIconStyle(this)' onmouseout='changeMarkerIconStyle(this)' src='images/mymap_icon/"+iconArr[e]+"'/> "}a[a.length]="</div></td></tr>";a[a.length]="</table>";d.openInfoWindow(a.join(""))}else if(d.vType()=="VText"){var a=[],c="";a[a.length]="<table border='0' cellspacing='0' cellpadding='0' style='width:280px; height:200px; background-color:#FFFFFF;'>";a[a.length]="<tr>";if(isLang("vi")){a[a.length]="<td onclick='showMyMapInfoWindow("+iMyMapCoorSel+", 0)' width='280px' align='left' valign='middle' style='height:20px;'><img src='images/backpage.gif' align='absmiddle' style='cursor:pointer;' /><a style='color:#999999; font-size:11px;font-family:Verdana;cursor:pointer;' onmouseover=ChangeTextColor(this,'#558800') onmouseout=ChangeTextColor(this,'#999999')>Quay lại</a></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td align='left' valign='top'>";a[a.length]="<table width='100%'>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Chuỗi hiển thị</b></td>";c=curText==""?b[5]:curText;a[a.length]="<td colspan='3'><input id='txtText' onblur='changeSampleText()' onkeyup='changeSampleText()' type='text' value='"+c+"' style='font-family:Arial; width:167px; border:1px #999999 solid; ' /></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Phông chữ</b></td>";a[a.length]="<td colspan='3'>";c=curFontFamily==""?b[3]:curFontFamily;a[a.length]=getFontListHTMLString(c);a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Kiểu chữ</b></td>";a[a.length]="<td colspan='3'>";c=curFontWeight==""?b[0]:curFontWeight;a[a.length]=getWeightListHTMLString(c);a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Cỡ chữ&nbsp;</b></td>";if(browserName=="msie")a[a.length]="<td>";else a[a.length]="<td width='137'>";c=curFontSize==""?b[2]:curFontSize;a[a.length]=getSizeListHTMLString(c);if(browserName=="msie")a[a.length]="<b>&nbsp;&nbsp;&nbsp;&nbsp;Màu chữ&nbsp;&nbsp;</b>";else a[a.length]="<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Màu chữ</b>";a[a.length]="</td><td colspan='2' valign='center'>";c=curFontColor==""?b[1]:curFontColor;a[a.length]="<div id='divTextColor' onclick=showColorChosing(event,'divTextColor') valign='middle' style='background:"+c+"; position:relative; width:26px; height:18px; BORDER: #558800 1px solid; vertical-align:middle; cursor:pointer;'></div>";a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td height='40' colspan='4' align='center'>";a[a.length]="<a class='a1' id='textSample' align='absmiddle'>Sample Text</a>";a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td colspan='4'>";a[a.length]="<button align='right' onclick='saveTextPro()' id='btnSaveTextPro' style='cursor:pointer;";if(browserName=="msie")a[a.length]=" margin-left:206px; margin-right:1px; margin-top:3px;'>Đồng ý</button>";else a[a.length]=" margin-left:203px; margin-right:4px; margin-top:9px;'>Đồng ý</button>"}else{a[a.length]="<td onclick='showMyMapInfoWindow("+iMyMapCoorSel+", 0)' width='280px' align='left' valign='middle' style='height:20px;'><img src='images/backpage.gif' align='absmiddle' style='cursor:pointer;' /><a style='color:#999999; font-size:11px;font-family:Verdana;cursor:pointer;' onmouseover=ChangeTextColor(this,'#558800') onmouseout=ChangeTextColor(this,'#999999')>Back</a></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td align='left' valign='top'>";a[a.length]="<table width='100%'>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Display text</b></td>";c=curText==""?b[5]:curText;a[a.length]="<td colspan='3'><input id='txtText' onblur='changeSampleText()' onkeyup='changeSampleText()' type='text' value='"+c+"' style='font-family:Arial; width:167px; border:1px #999999 solid; ' /></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Font name</b></td>";a[a.length]="<td colspan='3'>";c=curFontFamily==""?b[3]:curFontFamily;a[a.length]=getFontListHTMLString(c);a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Font style</b></td>";a[a.length]="<td colspan='3'>";c=curFontWeight==""?b[0]:curFontWeight;a[a.length]=getWeightListHTMLString(c);a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Font size&nbsp;</b></td>";if(browserName=="msie")a[a.length]="<td>";else a[a.length]="<td width='137'>";c=curFontSize==""?b[2]:curFontSize;a[a.length]=getSizeListHTMLString(c);if(browserName=="msie")a[a.length]="<b>&nbsp;&nbsp;&nbsp;&nbsp;Text color&nbsp;&nbsp;</b>";else a[a.length]="<b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Text color</b>";a[a.length]="</td><td colspan='2' valign='center'>";c=curFontColor==""?b[1]:curFontColor;a[a.length]="<div id='divTextColor' onclick=showColorChosing(event,'divTextColor') valign='middle' style='background:"+c+"; position:relative; width:26px; height:18px; BORDER: #558800 1px solid; vertical-align:middle; cursor:pointer;'></div>";a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td height='40' colspan='4' align='center'>";a[a.length]="<a class='a1' id='textSample' align='absmiddle'>Sample Text</a>";a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td colspan='4'>";a[a.length]="<button align='right' onclick='saveTextPro()' id='btnSaveTextPro' style='cursor:pointer;";if(browserName=="msie")a[a.length]=" margin-left:206px; margin-right:1px; margin-top:3px;'>OK</button>";else a[a.length]=" margin-left:203px; margin-right:4px; margin-top:9px;'>OK</button>"}a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="</table>";a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="</table>";d.openInfoWindow(a.join(""));changeSampleText()}else if(d.vType()=="VPolyline"){var a=[];a[a.length]="<table border='0' cellspacing='0' cellpadding='0' style='width:280px; height:200px; background-color:#FFFFFF;'>";a[a.length]="<tr>";if(isLang("vi")){a[a.length]="<td onclick='showMyMapInfoWindow("+iMyMapCoorSel+", 1)' width='280px' align='left' valign='middle' style='height:40px;'><img src='images/backpage.gif' align='absmiddle' style='cursor:pointer;' /><a style='color:#999999; font-size:11px;font-family:Verdana;cursor:pointer;' onmouseover=ChangeTextColor(this,'#558800') onmouseout=ChangeTextColor(this,'#999999')>Quay lại</a></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td align='left' valign='top'>";a[a.length]="<table width='100%'>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Màu đường</b></td>";a[a.length]="<td><div id='divLineColor' onclick=showColorChosing(event,'divLineColor') valign='middle' style='background:"+b[1]+"; position:relative; width:26px; height:18px; BORDER: #558800 1px solid; vertical-align:middle; cursor:pointer;'></div></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Độ rộng đường</b></td>";a[a.length]="<td><input type='text' id='txtLineWidth' value='"+b[0]+"' style='text-align:right; font-family:Arial; width:163px; border:1px #999999 solid; ' /></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Độ mờ đường</b></td>";a[a.length]="<td><input type='text' id='txtLineOpacity' value='"+parseFloat(b[3])*100+"' style='text-align:right; font-family:Arial; width:163px; border:1px #999999 solid; ' /></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td colspan='2'>";a[a.length]="<button align='right' onclick='savePolylinePro()' id='btnSavePolylinePro' style='cursor:pointer;";if(browserName=="msie")a[a.length]=" margin-left:200px; margin-right:1px; margin-top:52px;'>Đồng ý</button>";else a[a.length]=" margin-left:200px; margin-right:4px; margin-top:53px;'>Đồng ý</button>"}else{a[a.length]="<td onclick='showMyMapInfoWindow("+iMyMapCoorSel+", 1)' width='280px' align='left' valign='middle' style='height:40px;'><img src='images/backpage.gif' align='absmiddle' style='cursor:pointer;' /><a style='color:#999999; font-size:11px;font-family:Verdana;cursor:pointer;' onmouseover=ChangeTextColor(this,'#558800') onmouseout=ChangeTextColor(this,'#999999')>Back</a></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td align='left' valign='top'>";a[a.length]="<table width='100%'>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Line color</b></td>";a[a.length]="<td><div id='divLineColor' onclick=showColorChosing(event,'divLineColor') valign='middle' style='background:"+b[1]+"; position:relative; width:26px; height:18px; BORDER: #558800 1px solid; vertical-align:middle; cursor:pointer;'></div></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Line width</b></td>";a[a.length]="<td><input type='text' id='txtLineWidth' value='"+b[0]+"' style='text-align:right; font-family:Arial; width:163px; border:1px #999999 solid; ' /></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Line opacity</b></td>";a[a.length]="<td><input type='text' id='txtLineOpacity' value='"+parseFloat(b[3])*100+"' style='text-align:right; font-family:Arial; width:163px; border:1px #999999 solid; ' /></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td colspan='2'>";a[a.length]="<button align='right' onclick='savePolylinePro()' id='btnSavePolylinePro' style='cursor:pointer;";if(browserName=="msie")a[a.length]=" margin-left:200px; margin-right:1px; margin-top:52px;'>OK</button>";else a[a.length]=" margin-left:200px; margin-right:4px; margin-top:53px;'>OK</button>"}a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="</table>";a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="</table>";if(clickedPoint!=null)map.openInfoWindow(clickedPoint,a.join(""));else d.openInfoWindow(a.join(""))}else if(d.vType()=="VPolygon"){var a=[];a[a.length]="<table border='0' cellspacing='0' cellpadding='0' style='width:280px; height:200px; background-color:#FFFFFF;'>";a[a.length]="<tr>";if(isLang("vi")){a[a.length]="<td onclick='showMyMapInfoWindow("+iMyMapCoorSel+", 1)' width='280px' align='left' valign='middle' style='height:32px;'><img src='images/backpage.gif' align='absmiddle' style='cursor:pointer;' /><a style='color:#999999; font-size:11px;font-family:Verdana;cursor:pointer;' onmouseover=ChangeTextColor(this,'#558800') onmouseout=ChangeTextColor(this,'#999999')>Quay lại</a></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td align='left' valign='top'>";a[a.length]="<table width='100%'>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Màu đường</b></td>";a[a.length]="<td><div id='divLineColor' onclick=showColorChosing(event,'divLineColor') valign='middle' style='background:"+b[1]+"; position:relative; width:26px; height:18px; BORDER: #558800 1px solid; vertical-align:middle; cursor:pointer;'></div></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Độ rộng đường</b></td>";a[a.length]="<td><input id='txtLineWidth' type='text' value='"+b[0]+"' style='text-align:right; font-family:Arial; width:163px; border:1px #999999 solid; ' /></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Độ mờ đường</b></td>";var g=b[4]==""?50:parseFloat(b[4])*100;a[a.length]="<td><input id='txtLineOpacity' type='text' value='"+g+"' style='text-align:right; font-family:Arial; width:163px; border:1px #999999 solid; ' /></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Màu tô</b></td>";a[a.length]="<td><div id='divFillColor' onclick=showColorChosing(event,'divFillColor') valign='middle' style='background:"+b[2]+"; position:relative; width:26px; height:18px; BORDER: #558800 1px solid; vertical-align:middle; cursor:pointer;'></div></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Độ mờ tô</b></td>";a[a.length]="<td><input id='txtFillOpacity' type='text' value='"+parseFloat(b[3])*100+"' style='text-align:right; font-family:Arial; width:163px; border:1px #999999 solid; ' /></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td colspan='2'>";a[a.length]="<button align='right' onclick='savePolygonPro()' id='btnSavePolygonPro' style='cursor:pointer;";if(browserName=="msie")a[a.length]=" margin-left:200px; margin-right:1px; margin-top:10px;'>Đồng ý</button>";else a[a.length]=" margin-left:203px; margin-right:4px; margin-top:13px;'>Đồng ý</button>"}else{a[a.length]="<td onclick='showMyMapInfoWindow("+iMyMapCoorSel+", 1)' width='280px' align='left' valign='middle' style='height:32px;'><img src='images/backpage.gif' align='absmiddle' style='cursor:pointer;' /><a style='color:#999999; font-size:11px;font-family:Verdana;cursor:pointer;' onmouseover=ChangeTextColor(this,'#558800') onmouseout=ChangeTextColor(this,'#999999')>Back</a></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td align='left' valign='top'>";a[a.length]="<table width='100%'>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Line color</b></td>";a[a.length]="<td><div id='divLineColor' onclick=showColorChosing(event,'divLineColor') valign='middle' style='background:"+b[1]+"; position:relative; width:26px; height:18px; BORDER: #558800 1px solid; vertical-align:middle; cursor:pointer;'></div></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Line width</b></td>";a[a.length]="<td><input id='txtLineWidth' type='text' value='"+b[0]+"' style='text-align:right; font-family:Arial; width:163px; border:1px #999999 solid; ' /></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Line opacity</b></td>";var g=b[4]==""?50:parseFloat(b[4])*100;a[a.length]="<td><input id='txtLineOpacity' type='text' value='"+g+"' style='text-align:right; font-family:Arial; width:163px; border:1px #999999 solid; ' /></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Fill color</b></td>";a[a.length]="<td><div id='divFillColor' onclick=showColorChosing(event,'divFillColor') valign='middle' style='background:"+b[2]+"; position:relative; width:26px; height:18px; BORDER: #558800 1px solid; vertical-align:middle; cursor:pointer;'></div></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td><b>&nbsp;Fill opacity</b></td>";a[a.length]="<td><input id='txtFillOpacity' type='text' value='"+parseFloat(b[3])*100+"' style='text-align:right; font-family:Arial; width:163px; border:1px #999999 solid; ' /></td>";a[a.length]="</tr>";a[a.length]="<tr>";a[a.length]="<td colspan='2'>";a[a.length]="<button align='right' onclick='savePolygonPro()' id='btnSavePolygonPro' style='cursor:pointer;";if(browserName=="msie")a[a.length]=" margin-left:200px; margin-right:1px; margin-top:10px;'>OK</button>";else a[a.length]=" margin-left:203px; margin-right:4px; margin-top:13px;'>OK</button>"}a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="</table>";a[a.length]="</td>";a[a.length]="</tr>";a[a.length]="</table>";if(clickedPoint!=null)map.openInfoWindow(clickedPoint,a.join(""));else d.openInfoWindow(a.join(""))}}function createCPMarker(c,e,d,f){var a=new VMarker(c.latlngs[d].copy(),e);a.borderStyle="1px "+c.lineColor+" solid";map.addOverlay(a);a.enableDragging();a.editObjectIndex=c.mmIndex;a.editPointIndex=nControlPoint;a.type=MMCONTROLOBJ;arrControlPoint[nControlPoint]=a;nControlPoint++;if(d<f){var g=(c.latlngs[d].lat()+c.latlngs[d+1].lat())/2,h=(c.latlngs[d].lng()+c.latlngs[d+1].lng())/2,b=new VMarker(new VLatLng(g,h),e);b.borderStyle="1px "+c.lineColor+" solid";b.opacity=50;map.addOverlay(b);b.enableDragging();b.editObjectIndex=c.mmIndex;b.addPointIndex=nAPControlPoint;b.type=MMAPCONTROLOBJ;arrAPControlPoint[nAPControlPoint]=b;nAPControlPoint++;VEvent.addListener(b,"dragging",function(){bCPDragging=true;var a,c,d;a=arrMyMapCoorObj[iMyMapCoorOver].latlngs[b.addPointIndex].copy();c=b.getLatLng().copy();d=arrMyMapCoorObj[iMyMapCoorOver].latlngs[b.addPointIndex+1].copy();if(tempPolyline==null){var e=new VPolylineOptions(true,false,"Dot");tempPolyline=new VPolyline([a,c,d],arrMyMapCoorObj[iMyMapCoorOver].lineColor);tempPolyline.opts=e;map.addOverlay(tempPolyline)}else tempPolyline.setLatLngs([a,c,d])});VEvent.addListener(b,"dragend",function(){bCPDragging=false;if(tempPolyline!=null){map.removeOverlay(tempPolyline);tempPolyline=null}var a=b.getLatLng().copy();arrMyMapCoorObj[iMyMapCoorOver].insertPoint(b.addPointIndex,a);if(arrMyMapCoorObj[iMyMapCoorOver].actionType!="New")arrMyMapCoorObj[iMyMapCoorOver].actionType="Edit";enableSaveBtn();clearControlPoint();showControlPoint(c)})}VEvent.addListener(a,"dragging",function(){bCPDragging=true;var i=arrMyMapCoorObj[iMyMapCoorOver].latlngs.length,g,h;g=a.editPointIndex-1;h=a.editPointIndex+1;var c,b,d;if(g!=-1)c=arrMyMapCoorObj[iMyMapCoorOver].latlngs[g].copy();else if(arrMyMapCoorObj[iMyMapCoorOver].vType()=="VPolygon")c=arrMyMapCoorObj[iMyMapCoorOver].latlngs[i-2].copy();b=a.getLatLng().copy();if(h!=i)d=arrMyMapCoorObj[iMyMapCoorOver].latlngs[h].copy();if(tempPolyline==null){var j=new VPolylineOptions(true,false,"Dot");if(g==-1)if(arrMyMapCoorObj[iMyMapCoorOver].vType()=="VPolyline"){tempPolyline=new VPolyline([b,d],arrMyMapCoorObj[iMyMapCoorOver].lineColor);var e=(b.lat()+d.lat())/2,f=(b.lng()+d.lng())/2;arrAPControlPoint[a.editPointIndex].setPoint(new VLatLng(e,f))}else{tempPolyline=new VPolyline([c,b,d],arrMyMapCoorObj[iMyMapCoorOver].lineColor);var e=(c.lat()+b.lat())/2,f=(c.lng()+b.lng())/2;arrAPControlPoint[nAPControlPoint-1].setPoint(new VLatLng(e,f));e=(b.lat()+d.lat())/2;f=(b.lng()+d.lng())/2;arrAPControlPoint[a.editPointIndex].setPoint(new VLatLng(e,f))}else if(h==i){tempPolyline=new VPolyline([c,b],arrMyMapCoorObj[iMyMapCoorOver].lineColor);var e=(c.lat()+b.lat())/2,f=(c.lng()+b.lng())/2;arrAPControlPoint[g].setPoint(new VLatLng(e,f))}else{tempPolyline=new VPolyline([c,b,d],arrMyMapCoorObj[iMyMapCoorOver].lineColor);var e=(c.lat()+b.lat())/2,f=(c.lng()+b.lng())/2;arrAPControlPoint[g].setPoint(new VLatLng(e,f));e=(b.lat()+d.lat())/2;f=(b.lng()+d.lng())/2;arrAPControlPoint[a.editPointIndex].setPoint(new VLatLng(e,f))}tempPolyline.opts=j;map.addOverlay(tempPolyline)}else if(g==-1)if(arrMyMapCoorObj[iMyMapCoorOver].vType()=="VPolyline"){tempPolyline.setLatLngs([b,d]);var e=(b.lat()+d.lat())/2,f=(b.lng()+d.lng())/2;arrAPControlPoint[a.editPointIndex].setPoint(new VLatLng(e,f))}else{tempPolyline.setLatLngs([c,b,d]);var e=(c.lat()+b.lat())/2,f=(c.lng()+b.lng())/2;arrAPControlPoint[nAPControlPoint-1].setPoint(new VLatLng(e,f));e=(b.lat()+d.lat())/2;f=(b.lng()+d.lng())/2;arrAPControlPoint[a.editPointIndex].setPoint(new VLatLng(e,f))}else if(h==i){tempPolyline.setLatLngs([c,b]);var e=(c.lat()+b.lat())/2,f=(c.lng()+b.lng())/2;arrAPControlPoint[g].setPoint(new VLatLng(e,f))}else{tempPolyline.setLatLngs([c,b,d]);var e=(c.lat()+b.lat())/2,f=(c.lng()+b.lng())/2;arrAPControlPoint[g].setPoint(new VLatLng(e,f));e=(b.lat()+d.lat())/2;f=(b.lng()+d.lng())/2;arrAPControlPoint[a.editPointIndex].setPoint(new VLatLng(e,f))}});VEvent.addListener(a,"dragend",function(){bCPDragging=false;if(tempPolyline!=null){map.removeOverlay(tempPolyline);tempPolyline=null}var b=a.getLatLng().copy();arrMyMapCoorObj[iMyMapCoorOver].setVertex(a.editPointIndex,b);if(arrMyMapCoorObj[iMyMapCoorOver].actionType!="New")arrMyMapCoorObj[iMyMapCoorOver].actionType="Edit";enableSaveBtn()})}function showControlPoint(a){if(!bReadOnly&&!bCPDragging){if(selTbrButton!=null&&selTbrButton.id!="btnMove")return;clearControlPoint();iMyMapCoorOver=a.mmIndex;for(var b=a.vType()=="VPolyline"?a.latlngs.length:a.latlngs.length-1,e=a.vType()=="VPolyline"?b-1:b,c=0;c<b;c++){var d=new VIcon("images/rec.jpg");d.iconSize=new VSize(8,8);var f=new VMarkerOptions(d,null,new VSize(4,4));createCPMarker(a,f,c,e)}}}function clearControlPoint(){for(var a=0;a<nControlPoint;a++)map.removeOverlay(arrControlPoint[a]);arrControlPoint=[];nControlPoint=0;for(var a=0;a<nAPControlPoint;a++)map.removeOverlay(arrAPControlPoint[a]);arrAPControlPoint=[];nAPControlPoint=0}function chooseIcon(b){var a=b.src;a=a.substring(a.lastIndexOf("http://www.vietbando.com/")+1);curIcon=a;showMyMapInfoWindow(iMyMapCoorSel,0)}function saveTextPro(){curText=document.getElementById("txtText").value;curFontFamily=document.getElementById("cboFontFamily").value;curFontWeight=document.getElementById("cboFontWeight").value;curFontSize=document.getElementById("cboFontSize").value;curFontColor=$("#divTextColor")[0].style.backgroundColor;showMyMapInfoWindow(iMyMapCoorSel,0)}function savePolylinePro(){curLineColor=$("#divLineColor")[0].style.backgroundColor;curLineWidth=document.getElementById("txtLineWidth").value;curLineOpacity=document.getElementById("txtLineOpacity").value;showMyMapInfoWindow(iMyMapCoorSel,1)}function savePolygonPro(){curLineColor=$("#divLineColor")[0].style.backgroundColor;curLineWidth=document.getElementById("txtLineWidth").value;curLineOpacity=document.getElementById("txtLineOpacity").value;curFillColor=$("#divFillColor")[0].style.backgroundColor;curFillOpacity=document.getElementById("txtFillOpacity").value;showMyMapInfoWindow(iMyMapCoorSel,1)}function changeMarkerIconStyle(a){if(a.style.borderColor=="#ffffff"||a.style.borderLeftColor=="rgb(255, 255, 255)")a.style.border="1px #558800 solid";else a.style.border="1px #ffffff solid"}function changeCoorBkColor(a,b){if(b)$("#MyMapCoorList_"+a).addClass("MyMapCoorList-active");else $("#MyMapCoorList_"+a).removeClass("MyMapCoorList-active")}function changeCoorTextStyle(b){var a=document.getElementById("MyMapCoorListTitle_"+b);if(a!=undefined)if(a.style.color=="#0066cc"||a.style.color=="rgb(0, 102, 204)")a.style.color="#558800";else a.style.color="#0066cc"}function getFontListHTMLString(d){var c=["Arial","Arial Black","Arial Narrow","Times New Roman","Verdana","Tahoma","Currier New","Microsoft Sans Serif","Webdings"],a="",e=browserName=="msie"?171:169;a+="<select id='cboFontFamily' onchange='changeSampleText()' style='font-family:Arial; font-size:12px; width:"+e+"px; border:1px #999999 solid;'>";for(var b=0;b<9;b++){a+="<option value='"+c[b]+"'";if(d==c[b])a+="selected";a+=">"+c[b]+"</option>"}a+="</select>";return a}function getSizeListHTMLString(d){var c=[8,10,12,14,16,18,20,22,24],a="",e=browserName=="msie"?60:55;a+="<select id='cboFontSize' onchange='changeSampleText()' style='font-family:Arial; font-size:12px; width:"+e+"px; border:1px #999999 solid;'>";for(var b=0;b<9;b++){a+="<option value='"+c[b]+"'";if(d==c[b])a+="selected";a+=">"+c[b]+"</option>"}a+="</select>";return a}function getWeightListHTMLString(e){if(isLang("vi"))var d=["Thường","Đậm"];else var d=["Normal","Bold"];var c=["Normal","Bold"],a="",f=browserName=="msie"?171:169;a+="<select id='cboFontWeight' onchange='changeSampleText()' style='font-family:Arial; font-size:12px; width:"+f+"px; border:1px #999999 solid;'>";for(var b=0;b<2;b++){a+="<option value='"+c[b].toLowerCase()+"'";if(e==c[b].toLowerCase())a+="selected";a+=">"+d[b]+"</option>"}a+="</select>";return a}function showColorChosing(i,f){var c=document.createElement("TABLE");c.setAttribute("width",100);c.setAttribute("cellPadding",0);c.setAttribute("cellSpacing",0);c.setAttribute("border",1);c.setAttribute("borderColor","#558800");c.setAttribute("id","basic_color_table");c.style.backgroundColor="white";var g=document.createElement("TBODY");c.appendChild(g);for(var d=0;d<8;d++){for(var h=document.createElement("TR"),e=0;e<6;e++){var a=document.createElement("TD");a.style.backgroundColor=colorArr[e][d];a.style.color=colorArr[e][d];a.style.width=16+"px";a.style.height=16+"px";a.style.borderWidth="1px";a.style.borderColor="#ffffff";a.style.borderStyle="solid";a.setAttribute("id","basic_color_"+d+"_"+e);onClickEvent=function(c,a,b){return function(){fnOnColorClick(c,a,b)}}(colorArr[e][d],d,e);ondblClickEvent=function(c,a,b){return function(){fnOnColordblClick(c,a,b,f)}}(colorArr[e][d],d,e);if(document.all){a.attachEvent("onmouseover",onClickEvent);a.attachEvent("onclick",ondblClickEvent)}else if(document.layers){a.addeventlistener("onmouseover",onClickEvent,false);a.addeventlistener("onclick",ondblClickEvent,false)}else if(document.getElementById){a.addEventListener("mouseover",onClickEvent,false);a.addEventListener("click",ondblClickEvent,false)}var j=document.createTextNode(".");a.appendChild(j);h.appendChild(a)}g.appendChild(h)}var b=document.getElementById("colorChosingPopup");if(b==null){b=document.createElement("div");b.id="colorChosingPopup";if(browserName=="msie")document.getElementById(f).appendChild(b);else document.getElementById(f).parentNode.appendChild(b);b.style.position="absolute";b.style.zIndex=200;c.style.zIndex=200;b.appendChild(c)}if(browserName=="msie"){b.style.left=event.x-80;b.style.top=event.y-90}else{b.style.left=i.clientX;b.style.top=i.clientY}}function fnOnColorClick(c,a,b){cell=document.getElementById("basic_color_"+curColElX+"_"+curColElY);if(cell!=null)cell.style.borderColor="#ffffff";curColElX=a;curColElY=b;cell=document.getElementById("basic_color_"+curColElX+"_"+curColElY);if(cell!=null)cell.style.borderColor="#ff0000"}function fnOnColordblClick(e,c,d,b){document.getElementById(b).style.background=colorArr[d][c];if(document.getElementById("id3")!=null)id3.fillcolor=colorArr[d][c];var a=document.getElementById("colorChosingPopup");if(a!=null)if(browserName=="msie")document.getElementById(b).removeChild(a);else document.getElementById(b).parentNode.removeChild(a);document.getElementById("textSample")!=null&&changeSampleText()}function changeSampleText(){var b=document.getElementById("textSample"),a=document.getElementById("txtText").value;if(a=="")a=" ";if(a.length>15)a=a.substring(0,16);b.innerHTML=a;b.style.fontFamily=document.getElementById("cboFontFamily").value;b.style.fontWeight=document.getElementById("cboFontWeight").value;b.style.fontSize=document.getElementById("cboFontSize").value+"px";b.style.color=$("#divTextColor")[0].style.backgroundColor}function selectToolbarBtn(a){clearControlPoint();if(a==selTbrButton)return;selTbrButton!=null&&$(selTbrButton).removeClass(selTbrButton.id+"Active");selTbrButton=a;$(a).addClass(a.id+"Active");document.getElementById("container").style.cursor="pointer";switch(a.id){case "btnMove":document.getElementById("container").style.cursor="url('images/openhand.cur'),auto";if(isLang("vi"))$(".ToolbarExplain").html("Thay đổi vị trí các đối tượng");else $(".ToolbarExplain").html("Drag to change object location");break;case "btnAddPoint":if(isLang("vi"))$(".ToolbarExplain").html("Nhấp chuột lên bản đồ để thêm điểm");else $(".ToolbarExplain").html("Click on map to add place");break;case "btnAddText":if(isLang("vi"))$(".ToolbarExplain").html("Nhấp chuột lên bản đồ để thêm chữ");else $(".ToolbarExplain").html("Click on map to add text");break;case "btnAddPolyline":case "btnAddPolygon":if(isLang("vi"))$(".ToolbarExplain").html("Nhấp chuột lên bản đồ để bắt đầu vẽ<br/>Nhấp chuột để vẽ tiếp<br/>Nhấp đôi để kết thúc");else $(".ToolbarExplain").html("Click on map to start drawing line")}map.closeInfoWindow()}function ChangeTextColor(a,b){if(a!=null)a.style.color=b}var PropertyIndex=0,flagEditProperty=false,exName="Vd: Giờ mở cửa",exValue="Vd: 7:00 AM - 21:00 PM";function AddNewPropertyClick(b,c,d,e){var h=$("li","#"+b).length,g=$("li:last-child input","#"+b);if(h>1&&g[0].value==exName)return;var a=PropertyIndex+100,f;if(d==undefined){d=exName;e=exValue}if(b!="CoorPropertyInfo")f="<li id="+c+a+'>                    <input tabindex="'+a+'" id="PropertyName_'+a+'" value="'+d+'" onkeydown="enableSaveBtn()" class="inputname" type="text" onfocus="OnFocusProp(this,\''+exName+"')\" onblur=\"OnBlurProp(this,'"+exName+'\')" style="width: 98px;">                    <input tabindex="'+(a+1)+'" id="PropertyValue_'+a+'" value="'+e+'" onkeydown="enableSaveBtn()" type="text" onfocus="OnFocusProp(this,\''+exValue+"')\" onblur=\"OnBlurProp(this,'"+exValue+'\')" style="width: 127px;">                    <a id="ImgDelete_'+a+'" class="del" onclick="DeleteProperty(\''+b+"','"+(c+a)+"')\">Xóa</a>                </li>";else f='<li class="PropertyChild" id='+c+a+'>                    <input tabindex="'+a+'" id="PropertyName_'+a+'" value="'+d+'" onkeydown="flagEditProperty=true;enableSaveBtn()" class="inputname" type="text" onfocus="OnFocusProp(this,\''+exName+"')\" onblur=\"OnBlurProp(this,'"+exName+'\')" style="width: 90px;">                    <input tabindex="'+(a+1)+'" id="PropertyValue_'+a+'" value="'+e+'" onkeydown="flagEditProperty=true;enableSaveBtn()" type="text" onfocus="OnFocusProp(this,\''+exValue+"')\" onblur=\"OnBlurProp(this,'"+exValue+'\')" style="width: 120px;">                    <a id="ImgDelete_'+a+'" class="delete" onclick="DeleteProperty(\''+b+"','"+(c+a)+"')\">Xóa</a>                </li>";$("#"+b).append(f);PropertyIndex+=2}function OnBlurProp(a,b){if(a.value=="")a.value=b}function OnFocusProp(a,b){if(a.value==b)a.value=""}function DeleteProperty(a,b){enableSaveBtn();if(a=="CoorPropertyInfo")flagEditProperty=true;$("#"+b).remove()}function GetProperty(f){for(var e=[],d=$("li","#"+f),c=1;c<d.length;c++){var a=$("input",d[c]);if(a[0].value!=""&&a[0].value!=exName){var b={};b.property_name=a[0].value;b.property_value=a[1].value;e.push(b)}}return e}function GetPropertyForUpdate(i,c){for(var f=[],e=c==null?0:c.Tables[0].Rows.length,h=$("li","#"+i),b=1;b<h.length;b++){var d=$("input",h[b]);if(d[0].value!=""&&d[0].value!=exName){var a={};a.property_name=d[0].value;a.property_value=d[1].value;a.MyMap_property_value_id=e>b-1?c.Tables[0].Rows[b-1].mymap_property_value_id:-1;a.MyMapID=dsMyMap.Tables[0].Rows[iMyMapOpening].MyMapID;f.push(a)}}if(b-1<e)for(var g=b-1;g<e;g++){var a={};a.MyMapID=-1;a.MyMap_property_value_id=c.Tables[0].Rows[g].mymap_property_value_id;f.push(a)}return f}function GetCoorPropertyForUpdate(g){for(var j=document.getElementById(g),i=dsMyMapCoor.Tables[0].Rows[iMyMapCoorSel].MyMapCoorID,c=null,a=0;a<ArrPropertyAsLoad.length;a++)if(i==ArrPropertyAsLoad[a].id){c=ArrPropertyAsLoad[a].value;break}for(var e=c!=null&&c!=undefined?c.length:0,h=$("li","#"+g),a=1;a<h.length;a++){var d=$("input",h[a]);if(d[0].value!=""&&d[0].value!=exName){var b={};b.property_name=d[0].value;b.property_value=d[1].value;b.MyMapCoor_property_value_id=e>a-1?c[a-1].MyMapCoor_property_value_id:-1;b.MyMapCoorID=i;ArrEditProperty.push(b)}}if(a-1<e)for(var f=a-1;f<e;f++){var b={};b.MyMapCoorID=-1;b.MyMapCoor_property_value_id=c[f].MyMapCoor_property_value_id;ArrDeleteProperty.push(b)}}function RemoveElement(a,c){for(var b=c;b<a.length-1;b++)a[b]=a[b+1];a.pop()}function MMSubTabChange(a){ChangeFunctionType(GLOBAL_MYMAP_FUNCTION);$("#buddy_tab").removeClass("active");$("#fav_tab").removeClass("active");$("#createbyme_tab").removeClass("active");$("#buddylist").hide();$("#MarkLocation").xhide();$("#mymap_div").xhide();$("#favToolbar").xhide();$("#mymaptoolbar").xhide();switch(a){case BUDDY_TAB:$("#buddy_tab").addClass("active");$("#buddylist").show();break;case FAVOURITE_TAB:$("#fav_tab").addClass("active");$("#MarkLocation").xshow();listPlaces.length>0&&$("#favToolbar").xshow();break;case CREATEBYME_TAB:$("#createbyme_tab").addClass("active");$("#mymap_div").xshow();$("#mymaptoolbar").xshow()}}var LoadingHelp=false,HelpShowed=false;function LoadHelp(){if(HelpShowed)UnLoadHelp();else{LoadingHelp=true;HelpShowed=true;$("#s-help").toggleClass("SHelpOpen");$(".SHelpDiv-div").stop().animate({height:285},2e3,"swing");setTimeout(function(){$("#HelpDiv").show();LoadingHelp=false},10)}}function UnLoadHelp(){if(!LoadingHelp&&HelpShowed){HelpShowed=false;$("#s-help").toggleClass("SHelpOpen");$(".SHelpDiv-div").stop().animate({height:10},100,"linear",function(){$("#HelpDiv").hide()})}}function clickHelp(){LoadingHelp=true;setTimeout(function(){LoadingHelp=false},10)}var LoadingTree=false;function LoadTree(){if(TreeBinding.TreeShowed)UnLoadTree();else{LoadingTree=true;TreeBinding.TreeShowed=true;$("#Tree").show().stop().animate({height:300},100,"linear",function(){TreeBinding.LoadTreeTo("Tree")});setTimeout(function(){$("#boundTree").css("padding","8px");$("#boundTree").css("border-bottom","1px solid #1163C9");$("#boundTree").css("border-top","1px solid #00477c");$("#Tree").css("padding","5px 7px");$("#Tree").css("border","solid 1px #cccccc");LoadingTree=false},10)}}function UnLoadTree(){if(!LoadingTree&&TreeBinding.TreeShowed){TreeBinding.TreeShowed=false;$("#Tree").stop().animate({height:0},100,"linear",function(){$("#Tree").hide();$("#boundTree").css("padding","0px");$("#boundTree").css("margin","0px");$("#boundTree").css("border","")})}}function clickTree(){LoadingTree=true;setTimeout(function(){LoadingTree=false},10)}function switchkey(){document.getElementById("bogo").className="bogoe"}var activeElementID="searchtab";function activeTabById(a){activeElementID=a;unactiveAll();activeTab(a);shrinkMap()}function unactiveAll(){$("#searchtab").attr("class","");$("#findpathtab").attr("class","");$("#mymaptab").attr("class","");$("#supporttab").attr("class","");$("#searchtabdiv").css("display","none");$("#findpathtabdiv").css("display","none");$("#mymaptabdiv").css("display","none");$("#supporttabdiv").css("display","none")}function activeTab(a){$("#"+a+"div").show();$("#"+a).attr("class","active2")}function moveIconClick(){if($("#leftpanel").css("left").replace("px","")<0)shrinkMap();else expandMap()}function expandMap(){var a=document.getElementById("container");a.style.left="5px";a.style.width=myWidth-a.offsetLeft+"px";map.checkResize();$("#leftpanel").stop().animate({left:-345},350,"linear");$("#centerSplit").stop().animate({left:-2},350,"linear",function(){$("#"+activeElementID).attr("class","active3");$("#moveicon").attr("class","moveicon-out")})}function shrinkMap(){if($("#moveicon")[0].className=="moveicon-out"){$("#"+activeElementID).attr("class","active2");$("#moveicon").attr("class","moveicon");$("#leftpanel").stop().animate({left:0},350,"linear");$("#centerSplit").stop().animate({left:343},350,"linear",function(){});setTimeout(function(){var a=document.getElementById("container");a.style.left="352px";a.style.width=myWidth-a.offsetLeft+"px";map.checkResize()},350)}}var hidingInputText=false;function inputTextClick(){hidingInputText=true;setTimeout(function(){hidingInputText=false},100);if(document.getElementById("mapinput").value==inputTextHelp)document.getElementById("mapinput").value=""}function showInputTextHelp(){if(!hidingInputText&&document.getElementById("mapinput").value=="")document.getElementById("mapinput").value=inputTextHelp}function WrapperClick(){UnLoadHelp();UnLoadTree();$("#nav").hideSuperfishUl();hideWeather();HideFavGroupBox()}function toggleAlley(){if(PathOptions.Alley==0)checkAlley();else uncheckAlley();FindAllPath()}function checkAlley(){if(PathOptions.Alley==1)return;$("#avoidalley").addClass("NotAlley-On");$("#avoidalley").attr("title","Hạn chế qua hẻm [Bật]");$("#avoidalley").ShowTipsy();PathOptions.Alley=1}function uncheckAlley(){if(PathOptions.Alley==0)return;$("#avoidalley").removeClass("NotAlley-On");$("#avoidalley").attr("title","Hạn chế qua hẻm [Tắt]");$("#avoidalley").ShowTipsy();PathOptions.Alley=0}function toggleBlock(){if(PathOptions.Block==0)checkBlock();else uncheckBlock();FindAllPath()}function checkBlock(){if(PathOptions.Block==1)return;$("#avoidblock").addClass("NotCons-On");$("#avoidblock").attr("title","Hạn chế kẹt xe [Bật]");$("#avoidblock").ShowTipsy();PathOptions.Block=1;ShowPopupTraffic()}function uncheckBlock(){if(PathOptions.Block==0)return;$("#avoidblock").removeClass("NotCons-On");$("#avoidblock").attr("title","Hạn chế kẹt xe [Tắt]");$("#avoidblock").ShowTipsy();PathOptions.Block=0;ClosePopupTraffic()}function ResetVehicle(){$(".pedestrian").removeClass("pedestrian-enable");$(".motor").removeClass("motor-enable");$(".car").removeClass("car-enable");$(".lorry").removeClass("lorry-enable");$(".bus").removeClass("bus-enable")}function changeVehicle(a){ResetVehicle();PathOptions.Vehicle=a;switch(a){case 1:$(".motor").addClass("motor-enable");break;case 2:$(".car").addClass("car-enable");break;case 3:$(".lorry").addClass("lorry-enable");break;case 5:$(".pedestrian").addClass("pedestrian-enable");break;case 6:$(".bus").addClass("bus-enable");break}}function InitAnimation(){$(".pedestrian").click(function(){changeVehicle(5);FindAllPath()});$(".motor").click(function(){changeVehicle(1);FindAllPath()});$(".car").click(function(){changeVehicle(2);FindAllPath()});$(".lorry").click(function(){changeVehicle(3);FindAllPath()});$(".bus").click(function(){if(arrDes.length>2){alert("Hiện tại tính năng tìm xe buýt đang trong giai đoạn phát triển.\nBạn chỉ có thể tìm xe buýt qua 2 điểm.");return}changeVehicle(6);FindAllPath()});if(isLang("en"))$(".lang-Eng").addClass("lang-Vie");else isLang("vi")&&$(".lang-Eng").removeClass("lang-Vie")}function replaceQueryString(b,a,c){var d=new RegExp("([?|&])"+a+"=.*?(&|$)","i");if(b.match(d))return b.replace(d,"$1"+a+"="+c+"$2");else return b+"&"+a+"="+c}function isLang(a){getCookie("Culture")==null&&setCookie("Culture","vi",5e3,"http://www.vietbando.com/","","");return getCookie("Culture")==a}function changeLang(){if(isLang("en"))setCookie("Culture","vi",5e3,"http://www.vietbando.com/","","");else isLang("vi")&&setCookie("Culture","en",5e3,"http://www.vietbando.com/","","");location.reload(true)}function BodyLoad(){ping_connection();VUtil.isIE6Browser()&&$(".IE6-warning").show();$("#nav").superfish();$("#nav").lavaLamp({fx:"easeOutBack",speed:800});var a=1e3;$("div, ul, img").not($("#container *")).not($("#divWeatherModule *")).each(function(){$(this).css("zIndex",a);a-=2});InitAnimation();$("a").not($("#container *")).each(function(){$(this).tipsy()});StartApp()}function ResizeWindow(){calculateWindowSize();var a=document.getElementById("container"),c=document.getElementById("leftpanel"),b=document.getElementById("copyright");a.style.width=myWidth-a.offsetLeft-1+"px";a.style.height=myHeight-a.offsetTop-1+"px";$("#leftpanel").css("height",myHeight-a.offsetTop+3+"px");$("#searchresult_div").css("height",myHeight-a.offsetTop-45+20+"px");$("#findpath_div").css("height",myHeight-a.offsetTop-125+41+"px");$("#findpathtabdiv").css("height",myHeight-a.offsetTop-13+11+"px");$("#mymap_div").css("height",myHeight-a.offsetTop-75+"px");$("#MarkLocation").css("height",myHeight-a.offsetTop-50+"px");document.getElementById("centerSplit").style.height=myHeight-a.offsetTop+"px";document.getElementById("moveicon").style.top=a.offsetHeight/2-20+"px";b.style.top=myHeight-25+"px";map!=null&&map.checkResize()}function CalculatePopupSize(){var a=document.getElementById("container");if(a==null)return;popupW=myWidth-a.offsetLeft-Global.pHPad;popupH=myHeight-a.offsetTop-Global.pVPad;popupW=popupW<Global.pMinW?Global.pMinW:popupW;popupH=popupH<Global.pMinH?Global.pMinH:popupH;popupW=popupW>Global.pMaxW?Global.pMaxW:popupW;popupH=popupH>Global.pMaxH?Global.pMaxH:popupH}function ShowFavToolbar(){var a=document.getElementById("container");$("#favToolbar").show();$("#MarkLocation").css("height",myHeight-a.offsetTop-50-28+"px")}var placeMap,listPlaces=[],handler_MapClick,handler_MarkerClick=[],handler_MarkerDragEnd=[],handler_MarkerDragging=[],overlays=[];overlays["places"]=[];var limitcom=150;function loadUserPlaces(){$("#divPlaces").html("");listPlaces=Control_LocationManager_PlacesManager.AjaxLoadPlaces().value;var c=[];if(listPlaces!=null)if(listPlaces.length>0){ShowFavToolbar();removeAllMarkerPlace();for(var d=0;d<listPlaces.length;d++){var a=listPlaces[d];a.GroupName=ChangeGroupLanguage(a.GroupName);a.Comment=a.Comment.substring(0,limitcom);var b="";b+='<li class="resultItem" id="favItemLogged_'+d+'">                            <a href="javascript:void(0);" class="a-place-hover"></a>';if(a.DefaultLocation!=true)b+='<span class="fav1-10"></span>                                <a onclick="loadPlaceInfo(\''+a.LocationGuid+'\')" class="resultTitle">'+a.LocationName+"</a>                                <a onclick=\"deleteUserLocation('"+a.LocationGuid+'\')" class="MyMapDel">Xóa</a>                                <a onclick="ShowGroup(event, '+d+","+a.UserLocationId+')" href="javascript:void(0);" class="favGroupButtonClass"><span>Chọn nhóm</span></a><span class="space-line">|</span>                                <a onclick="ShowComment('+d+","+a.UserLocationId+')" href="javascript:void(0);" class="favCommentButtonClass"><span>Ghi chú</span></a>';else b+='<span class="favDefault"></span>                                <a onclick="loadPlaceInfo(\''+a.LocationGuid+'\')"  class="resultTitle">'+a.LocationName+'</a>                                <a class="DefaultPlaceEdit" href="/Accounts/Account.aspx#minimap"><span>Sửa</span></a>                                <a onclick="ShowComment('+d+","+a.UserLocationId+')" href="javascript:void(0);" class="favCommentButtonClass"><span>Ghi chú</span></a>';b+='<div class="Spacer"></div>';b+="</li>";if(a.DefaultLocation!=true){if($("#ulGroup_"+a.GroupId).length<1){$("#divPlaces").append('<div class="Group_Wrap"><h3 class="groupNameTitle">'+a.GroupName+'</h3><ul id="ulGroup_'+a.GroupId+'" class="connectedSortable"></ul></div>');c[a.GroupId]=0}c[a.GroupId]=c[a.GroupId]+1;$("#ulGroup_"+a.GroupId).append(b);$("#favItemLogged_"+d+" span.fav1-10").html(c[a.GroupId])}else{b=b.replace("resultItem","defaultPlace");b='<ul class="defaultPlace-wrap"><h3>Vị trí mặc định</h3>'+b+"</ul>";$("#divPlaces").append(b)}var e,f,g;if(a.DefaultLocation){f="images/shop24.png";g=new VSize(24,24)}else{f="images/mymap_icon/favonmap.png";g=new VSize(19,15)}if(a.RLatitude!=null&&a.RLongitude!=null&&a.RLatitude!=0&&a.RLongitude!=0)e=new VMarker(new VLatLng(a.RLatitude,a.RLongitude),new VIcon(f,g));else e=new VMarker(new VLatLng(a.Latitude,a.Longitude),new VIcon(f,g));placeMap.addOverlay(e);bindClickOnMarker(e,a);var h=overlays["places"].length;overlays["places"][h]=e;overlays["places"][h].GUID=a.LocationGuid}if($("#divPlaces ul").length>0){$(".Group_Wrap").droppable({hoverClass:"ui-state-hover",drop:function(j,d){var e=d.draggable.attr("id").split("_")[1],i=d.draggable,b=$(this).find(".connectedSortable").attr("id").split("_")[1],a=listPlaces[e].GroupId,g=$(this).find("h3")[0].innerHTML,h=listPlaces[e].UserLocationId;if(a!=b){UpdateULGroup(h,g,b);listPlaces[e].GroupName=g;listPlaces[e].GroupId=b;c[a]=c[a]-1;c[b]=c[b]+1;d.helper.find("span.fav1-10").html(c[b]);d.helper.appendTo($(this).find(".connectedSortable"))}d.helper.css("top","").css("left","");if($("#ulGroup_"+a+" li").length==0)$("#ulGroup_"+a).parent().length>0&&$("#ulGroup_"+a).parent().remove();else for(var f=0;f<$("#ulGroup_"+a+" li").length;f++)$($("#ulGroup_"+a+" li")[f]).find(".fav1-10").html(f+1)}});$(".resultItem").draggable({revert:"invalid",stack:"#divPlaces",containment:"#MarkLocation",opacity:.7,start:function(){HideFavGroupBox()}})}liveFilterInit()}else $("#divPlaces").html(FavHelppHTML)}function initPlacesManager(b){if(b==null){var a=new VMapOptions;a.size=new VSize(580,455);placeMap=new VMap(document.getElementById("Places_Map"),a);placeMap.addControl(new VLargeMapControl);placeMap.addControl(new VOverviewMapControl);placeMap.setCenter(new VLatLng(16.130262,107.753906),5)}else{$("#Places_Map").remove();placeMap=b}}function loadPlaceInfo(c){var a=getLocationByGuid(c);if(a!=null)if(!isContainOverlayPlaces(c)){removeAllMarkerPlace();var b,d,e;if(a.DefaultLocation){d="images/shop24.png";e=new VSize(24,24)}else{d="images/mymap_icon/favonmap.png";e=new VSize(19,15)}if(a.RLatitude!=null&&a.RLongitude!=null&&a.RLatitude!=0&&a.RLongitude!=0)b=new VMarker(new VLatLng(a.RLatitude,a.RLongitude),new VIcon(d,e));else b=new VMarker(new VLatLng(a.Latitude,a.Longitude),new VIcon(d,e));b.GUID=c;b.order=overlays["places"].length;overlays["places"][overlays["places"].length]=b;placeMap.addOverlay(b);if(a.DefaultLocation)showInfoPlace(b,a);else ShowLocationInfo(b,b.GUID,"fav");handler_MarkerClick[c]=VEvent.addListener(b,"click",function(){if(a.DefaultLocation)showInfoPlace(b,a);else ShowLocationInfo(b,b.GUID,"fav")})}else if(a.DefaultLocation)showInfoPlace(overlays["places"][getMarkerLocationByGuid(c)],a);else ShowLocationInfo(overlays["places"][getMarkerLocationByGuid(c)],c,"fav")}function showInfoPlace(f,b){if(f!=null){var i=b.LocationName,c=CombineAddress(b),g=GetShortText(RemoveHTMLTag(b.Note),320),e=b.Phone,h=b.TableName,d=b.LocationGuid,j=h!="ds_store"?"ip":"ds",a=[];a[a.length]='<div class="MiniPopup">';a[a.length]='<span class="Title">'+i;if(d!=""&&d!=null&&b.DefaultLocation!=true)a[a.length]='<a id="pmarklocation" onclick="deleteUserLocation(\''+d+'\')" class="favToogle-Dis favToogle-Ena"></a>';a[a.length]='</span><br/><p class="Content">';if(c!=""&&c!=null)a[a.length]='<span class="address">'+c+"</span>";if(e!=""&&e!=null)a[a.length]='<span class="phone">'+e+"</span>";a[a.length]='<span class="comment">'+g+"</span>";a[a.length]="</p>";if(typeof Langs!="undefined"){a[a.length]='<ul class="CommonFunction">';a[a.length]='<li><a class="flnk" id="pfromhere">Từ đây</a></li>';a[a.length]='<li><a class="flnk" id="ptohere">Đến đây</a><li>';a[a.length]='<li><a class="flnk" id="pviewonmap">Phóng to</a><li>';a[a.length]='<li><a class="flnk" id="pviewsearchnearby">Tìm xung quanh</a></li>';a[a.length]="</ul>"}a[a.length]="</div>";f.openInfoWindow(a.join(""));b.Name=i;b.Address=c;b.Comment=g;b.Table=h;b.GUID=d;b.Phone=e;AtachEventMiniPopup(b,f.order,b.LocationName,"poi")}}function addUserLocation(d,c,b){var a=Control_LocationManager_PlacesManager.AjaxAddUserLocation(d,c);if(a.value==true){b&&loadUserPlaces();return true}else return false}function isContainOverlayPlaces(b){for(var a=0;a<overlays["places"].length;a++)if(overlays["places"][a].GUID==b)return true;return false}function HideFavGroupBox(a){a!=null&&$("#favItemLogged_"+a).removeClass("place-hover");$(".favGroup").remove()}function HideCommentBox(a){a!=null&&$("#favItemLogged_"+a).removeClass("place-hover");$(".favComment").remove()}var isShowFav=true;function toggleAllMarkerPlace(){if(isShowFav){removeAllMarkerPlace();clearFavMarker();$(".showAllMarkerClass").attr("class","hideAllMarkerClass")}else{showAllMarkerPlaces();showFavMarker();$(".hideAllMarkerClass").attr("class","showAllMarkerClass")}isShowFav=!isShowFav}function showAllMarkerPlaces(){removeAllMarkerPlace();for(var a=0;a<listPlaces.length;a++){var b,c,d;if(listPlaces[a].DefaultLocation){c="images/shop24.png";d=new VSize(24,24)}else{c="images/mymap_icon/favonmap.png";d=new VSize(19,15)}if(listPlaces[a].RLatitude!=null&&listPlaces[a].RLongitude!=null&&listPlaces[a].RLatitude!=0&&listPlaces[a].RLongitude!=0)b=new VMarker(new VLatLng(listPlaces[a].RLatitude,listPlaces[a].RLongitude),new VIcon(c,d));else b=new VMarker(new VLatLng(listPlaces[a].Latitude,listPlaces[a].Longitude),new VIcon(c,d));placeMap.addOverlay(b);bindClickOnMarker(b,listPlaces[a]);var e=overlays["places"].length;overlays["places"][e]=b;overlays["places"][e].GUID=listPlaces[a].LocationGuid}}function removeAllMarkerPlace(){for(var a=0;a<overlays["places"].length;a++)placeMap.removeOverlay(overlays["places"][a]);overlays["places"].clear()}function deleteUserLocation(a){if(confirm(isLang("vi")?"Bạn có thật sự muốn xóa điểm ưa thích này?":"Are you sure you want to delete this favourite place?")){var b=Control_LocationManager_PlacesManager.AjaxDeletePlace(a);if(b.value==true){loadUserPlaces();placeMap.closeInfoWindow();return true}else return false}else return false}function getLocationByGuid(b){for(var a=0;a<listPlaces.length;a++)if(listPlaces[a].LocationGuid==b)return listPlaces[a];return null}function getMarkerLocationByGuid(b){for(var a=0;a<overlays["places"].length;a++)if(overlays["places"][a].GUID==b)return a;return -1}function bindClickOnMarker(b,a){handler_MarkerClick[a.LocationGuid]=VEvent.addListener(b,"click",function(b){ShowLocationInfo(b,a.LocationGuid,"more")})}function bindFromCookie(){if(!MembershipRequire())return;var a=getCookie("VBDFav");if(a!=null&&a!="")if(confirm(isLang("vi")?"Bạn có muốn chuyển các vị trí lưu tạm thời vào tài khoản không?":"Do you want to save those temporary places to your account?")){$("#MarkLocation_Cookie").html("");clearFavMarker();a=a.split("$$");for(var d=[],c=0;c<a.length;c++){if(a[c]=="")continue;var b=a[c].split("$");b[1]!=null&&b[4]!=null&&b[1]!=""&&b[4]!=""&&addUserLocation(b[1],b[4],false)}DeleteCookie("VBDFav","http://www.vietbando.com/");loadUserPlaces()}}function OnChangeChoseGroup(a){if($("#favItemGroup_"+a+" :selected").val()==-1)$("#favNewGroup_"+a).show();else $("#favNewGroup_"+a).hide()}function stopProp(a){a.cancelBubble=true;a.stopPropagation&&a.stopPropagation()}function ChangeGroupLanguage(a){if(isLang("en")){a=a.replace("Yêu thích","Favourite");a=a.replace("Công ty","Work");a=a.replace("Trường học","College");a=a.replace("Bạn bè","Friends");a=a.replace("Gia đình","Family");a=a.replace("Nhà","Place");a=a.replace("Người yêu","Love")}return a}function ShowGroup(g,a,f){HideCommentBox();$(".favGroup").not("#favItemGroup_"+a).remove();if($("#favItemGroup_"+a).length==0){var c=Control_LocationManager_PlacesManager.AjaxGetAllPlaceGroups().value,e=listPlaces[a].GroupId;if(c!=null){var b='<div id="favItemGroup_'+a+'" class="favGroup" onclick="stopProp(event)">';b+='<select onchange="OnChangeChoseGroup('+a+')">';for(var d=0;d<c.length;d++)b+='<option value="'+c[d][0]+'" '+(e==c[d][0]?'selected="selected"':"")+">"+ChangeGroupLanguage(c[d][1])+"</option>";b+='<option value="-1">Tạo nhóm mới...</option>';b+="</select>";b+='<input type="text" id="favNewGroup_'+a+'" value="Tên nhóm" style="display:none"/>                        <div class="divfavsavecancel"><a class="favsave" onclick="PreUpdateULGroup('+f+", "+a+')">Lưu</a>                        <a class="favcancel" onclick="HideFavGroupBox('+a+')">Hủy</a></div>                        </div>';$(b).hide().appendTo("#favItemLogged_"+a).fadeIn()}}else $("#favItemGroup_"+a).remove();stopProp(g)}function UpdateULGroup(b,a,c){if(b>-1&&b!=null&&a!=null&&a!="")!Control_LocationManager_PlacesManager.UpdateULGroup(b,a,c).value&&alert("Cập nhật thông tin chi tiết địa điểm yêu thích không thành công. Vui lòng thử lại.")}function PreUpdateULGroup(d,a){var c=$("#favItemGroup_"+a+" :selected").val(),b=c==-1?$("#favNewGroup_"+a).val():$("#favItemGroup_"+a+" :selected").text();if(b=="")return;UpdateULGroup(d,b,c);loadUserPlaces()}function ShowComment(a,c){HideFavGroupBox();$(".favComment").not("#favComment_"+a).remove();if($("#favComment_"+a).length==0){var d=listPlaces[a].Comment,b='<div class="favComment" id="favComment_'+a+'">';b+='<div onclick="EditComment('+a+","+c+')" class="itemComment">'+d.replace(/\n/g,"<br />")+"</div>";b+="</div>";$(b).hide().appendTo("#favItemLogged_"+a).fadeIn();if(d==""){EditComment(a,c);return}}else $("#favComment_"+a).remove()}function UpdateComment(b,c){var a=$("#favComment_"+b+" .inputCommentEdit").val();if(a!=null){if(a.length>limitcom){alert("Bạn không thể ghi chú nhiều hơn "+limitcom+" ký tự");return}if(Control_LocationManager_PlacesManager.AjaxUpdateComment(a,c).value){var d='<div onclick="EditComment('+b+","+c+')" class="itemComment">'+a.replace(/\n/g,"<br />")+"</div>";$("#favComment_"+b).html(d);listPlaces[b].Comment=a}else alert("Cập nhật ghi chú gặp lỗi. Xin vui lòng thử lại.")}}function EditComment(a,d){var b=listPlaces[a].Comment.replace(/<br>/g,"\n"),c="limitText(this, 'favcomlim_"+a+"', "+limitcom+")",e='<textarea class="inputCommentEdit" onKeyDown="'+c+'" onKeyUp="'+c+'">'+b+'</textarea>                    <a class="favsave" href="javascript:void(0);" onclick="UpdateComment('+a+","+d+')"><span>Lưu</span></a>                    <a class="favcancel" href="javascript:void(0);" onclick="HideCommentBox('+a+')"><span>Hủy</span></a>                    <span class="favcomlim"><span id="favcomlim_'+a+'">'+(limitcom-b.length)+"</span></span>";$("#favComment_"+a).html(e)}function limitText(a,c,b){if($(a).val().length>b)$(a).val($(a).val().substring(0,b));else $("#"+c).text(b-$(a).val().length)}function liveFilterInit(){jQuery.expr[":"].Contains=function(a,c,b){return jQuery(a).text().toUpperCase().indexOf(b[3].toUpperCase())>=0};$("input.filerFavInput").live("keyup",function(){var a=$(this).val();$(".resultItem, .Group_Wrap").hide();$('.resultItem:Contains("'+a+'")').show();$('.resultItem:Contains("'+a+'")').parent().parent().show();$(".groupNameTitle").parent().each(function(){})});$(".resultItem, .defaultPlace").hover(function(){$(this).addClass("place-hover")},function(){$(this).removeClass("place-hover")})}function ShowFavToolbar(){var a=document.getElementById("container");$("#favToolbar").show();$("#MarkLocation").css("height",myHeight-a.offsetTop-50-28+"px")}var arrListFavour=[];function LoadFav(){var a=getCookie("VBDFav");if(a==null)return;arrListFavour=[];a=a.split("$$");for(var c=0;c<a.length;c++){if(a[c]=="")continue;var b=a[c].split("$");arrListFavour[arrListFavour.length]=[b[0],b[1],b[2],b[3],b[4]]}}function AddFav(a){if(checkLogin())addUserLocation(a.GUID,a.Table,true);else AddCookieFav(a)}function DelFav(a){if(checkLogin())deleteUserLocation(a.GUID);else DeleteFavByGuid(a.GUID)}function hasFav(c){var b=false;if(arrListFavour!=null)for(var a=0;a<arrListFavour.length;a++)if(arrListFavour[a][1]==c){b=true;break}if(!b&&listPlaces!=null)for(var a=0;a<listPlaces.length;a++)if(listPlaces[a].LocationGuid==c){b=true;break}return b}function AddCookieFav(a){for(var b=0;b<arrListFavour.length;b++)if(arrListFavour[b][1]==a.GUID)return;arrListFavour[arrListFavour.length]=[RemoveHTMLTag(a.Name),a.GUID,a.Latitude,a.Longitude,a.Table];SaveFavState();ShowFav()}function DeleteFavByGuid(b){for(var a=0;a<arrListFavour.length;a++)if(arrListFavour[a][1]==b){DeleteFav(a);return}}function DeleteFav(a){if(confirm(isLang("vi")?"Bạn có thật sự muốn xóa điểm ưa thích này?":"Are you sure you want to delete this favourite place?")){$("#pmarklocation").removeClass("favToogle-Ena");arrListFavour[a][0]="";SaveFavState();ShowFav();map.closeInfoWindow()}}function SaveFavState(){for(var b="",a=0;a<arrListFavour.length;a++)if(arrListFavour[a][0]!="")b+=arrListFavour[a][0]+"$"+arrListFavour[a][1]+"$"+arrListFavour[a][2]+"$"+arrListFavour[a][3]+"$"+arrListFavour[a][4]+"$$";setCookie("VBDFav",b,5e3,"http://www.vietbando.com/","","")}function ShowFav(){initPlacesManager(map);if(checkLogin()){loadUserPlaces();$("#MarkLocation_Cookie").html(FavHTML())}else{clearFavMarker();var a=FavHTML();if(a!="")$("#MarkLocation_Cookie").html(a);else showFavHelp()}}function showFavHelp(){$("#MarkLocation_Cookie").html(FavHelppHTML)}function showFavMarker(){FavHTML()}function clearFavMarker(){for(var a=0;a<arrFavPlace.length;a++)map.removeOverlay(arrFavPlace[a]);arrFavPlace=[]}function FavHTML(){LoadFav();for(var b="",a=0;a<arrListFavour.length;a++){if(arrListFavour[a][0]=="")continue;var c={Name:arrListFavour[a][0],GUID:arrListFavour[a][1],Latitude:arrListFavour[a][2],Longitude:arrListFavour[a][3]};b+=BuildFavItem(c,a)}if(b!=""){b='<h3 class="mymaptitle">Vị trí lưu tạm thời</h3>'+b;b+='<a class="favsave2acc" onclick="bindFromCookie()">Lưu vào tài khoản</a>                <p class="favnote">Vị trí lưu tạm thời là các vị trí chỉ được lưu trên máy đang sử dụng. Bạn sẽ không thấy được các vị trí này khi sử dụng một máy tính khác. Hãy lưu các vị trí này vào tài khoản để có thể sử dụng lại.</p>'}return b}function ShowFavInfo(a){ShowLocationInfo(arrFavPlace[a],arrFavPlace[a].GUID,"fav")}function BuildFavItem(c,d){var a='<div id="favItem_%Number%" class="resultItem">\t\t\t\t\t\t\t%Icon%<span id="favTitle_%Number%" onclick="ShowFavInfo(%Number%)">%Title%</span>\t\t\t\t\t\t\t<a onclick="DeleteFav(%Number%)" class="MyMapDel">Xóa</a>\t\t\t\t\t\t\t<div class="Spacer"></div>\t\t\t\t\t\t</div>',h=ToSafeHTML(c.Name),f='<span class="fav1-10">'+(d+1)+"</span>",g=new VIcon("images/mymap_icon/favonmap.png",new VSize(19,15)),e=new VMarkerOptions(g);e.offset=new VSize(8,15);e.zIndexProcess=function(){return 5};var b=new VMarker(new VLatLng(c.Latitude,c.Longitude),e);b.GUID=c.GUID;b.order=d;map.addOverlay(b);arrFavPlace.push(b);VEvent.addListener(b,"click",function(){ShowLocationInfo(b,b.GUID,"fav")});a=a.replace(/%Number%/g,d);a=a.replace(/%Icon%/g,f);a=a.replace(/%Order%/g,d);a=a.replace(/%Title%/g,'<a class="resultTitle">'+h+"</a>");return a}